{
  "file_path": "src/web/manager/components/DynamicField.tsx",
  "main_branch_history": [],
  "task_views": {
    "004-document-frontend-react-components-and-hooks": {
      "task_id": "004-document-frontend-react-components-and-hooks",
      "branch_point": {
        "commit_hash": "34a3f60da53773d90bd6579cb1cfd8417a1dd0b9",
        "content": "import React from 'react';\nimport type { InputField } from '../services/api';\nimport { Input } from './ui/Input';\n\ninterface DynamicFieldProps {\n  field: InputField;\n  value: any;\n  onChange: (value: any) => void;\n}\n\nconst DynamicField: React.FC<DynamicFieldProps> = ({ field, value, onChange }) => {\n  const { name, type, label, placeholder, required, options, default: defaultValue } = field;\n\n  // Use default value if value is undefined\n  const currentValue = value !== undefined ? value : defaultValue;\n\n  switch (type) {\n    case 'text':\n      return (\n        <div className=\"mb-4\">\n          <label className=\"block text-sm font-medium mb-2\">\n            {label} {required && <span className=\"text-red-500\">*</span>}\n          </label>\n          {field.description && (\n            <p className=\"text-xs text-muted-foreground mb-2\">{field.description}</p>\n          )}\n          <Input\n            type=\"text\"\n            value={currentValue || ''}\n            onChange={(e) => onChange(e.target.value)}\n            placeholder={placeholder}\n            required={required}\n            className=\"w-full\"\n          />\n        </div>\n      );\n\n    case 'textarea':\n      return (\n        <div className=\"mb-4\">\n          <label className=\"block text-sm font-medium mb-2\">\n            {label} {required && <span className=\"text-red-500\">*</span>}\n          </label>\n          {field.description && (\n            <p className=\"text-xs text-muted-foreground mb-2\">{field.description}</p>\n          )}\n          <textarea\n            value={currentValue || ''}\n            onChange={(e) => onChange(e.target.value)}\n            placeholder={placeholder}\n            required={required}\n            rows={4}\n            className=\"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary\"\n          />\n        </div>\n      );\n\n    case 'dropdown':\n      return (\n        <div className=\"mb-4\">\n          <label className=\"block text-sm font-medium mb-2\">\n            {label} {required && <span className=\"text-red-500\">*</span>}\n          </label>\n          {field.description && (\n            <p className=\"text-xs text-muted-foreground mb-2\">{field.description}</p>\n          )}\n          <select\n            value={currentValue || ''}\n            onChange={(e) => onChange(e.target.value)}\n            required={required}\n            className=\"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary\"\n          >\n            <option value=\"\">Select an option</option>\n            {options?.map((option) => (\n              <option key={option} value={option}>\n                {option}\n              </option>\n            ))}\n          </select>\n        </div>\n      );\n\n    case 'checkbox':\n      return (\n        <div className=\"mb-4 flex items-center gap-2\">\n          <input\n            type=\"checkbox\"\n            checked={currentValue === true}\n            onChange={(e) => onChange(e.target.checked)}\n            className=\"w-4 h-4\"\n          />\n          <label className=\"text-sm font-medium\">{label}</label>\n        </div>\n      );\n\n    case 'number':\n      return (\n        <div className=\"mb-4\">\n          <label className=\"block text-sm font-medium mb-2\">\n            {label} {required && <span className=\"text-red-500\">*</span>}\n          </label>\n          <Input\n            type=\"number\"\n            value={currentValue || ''}\n            onChange={(e) => onChange(Number(e.target.value))}\n            placeholder={placeholder}\n            required={required}\n            className=\"w-full\"\n          />\n        </div>\n      );\n\n    case 'multiselect':\n      return (\n        <div className=\"mb-4\">\n          <label className=\"block text-sm font-medium mb-2\">\n            {label} {required && <span className=\"text-red-500\">*</span>}\n          </label>\n          {field.description && (\n            <p className=\"text-xs text-muted-foreground mb-2\">{field.description}</p>\n          )}\n          <div className=\"border border-border rounded-md p-2 max-h-40 overflow-y-auto bg-background\">\n            {options?.map((option) => (\n              <label key={option} className=\"flex items-center gap-2 p-1 hover:bg-muted cursor-pointer rounded\">\n                <input\n                  type=\"checkbox\"\n                  checked={Array.isArray(currentValue) && currentValue.includes(option)}\n                  onChange={(e) => {\n                    const currentArray = Array.isArray(currentValue) ? currentValue : [];\n                    if (e.target.checked) {\n                      onChange([...currentArray, option]);\n                    } else {\n                      onChange(currentArray.filter((v: string) => v !== option));\n                    }\n                  }}\n                  className=\"w-4 h-4\"\n                />\n                <span className=\"text-sm\">{option}</span>\n              </label>\n            ))}\n          </div>\n        </div>\n      );\n\n    case 'filepath':\n      return (\n        <div className=\"mb-4\">\n          <label className=\"block text-sm font-medium mb-2\">\n            {label} {required && <span className=\"text-red-500\">*</span>}\n          </label>\n          {field.description && (\n            <p className=\"text-xs text-muted-foreground mb-2\">{field.description}</p>\n          )}\n          <Input\n            type=\"text\"\n            value={currentValue || ''}\n            onChange={(e) => onChange(e.target.value)}\n            placeholder={placeholder || \"/path/to/file\"}\n            required={required}\n            className=\"w-full font-mono text-sm\"\n          />\n          <p className=\"text-xs text-muted-foreground mt-1\">\n            Enter a file or directory path\n          </p>\n        </div>\n      );\n\n    default:\n      return null;\n  }\n};\n\nexport default DynamicField;\n",
        "timestamp": "2026-01-02T14:22:14.293924"
      },
      "worktree_state": {
        "content": "/**\n * @file DynamicField.tsx\n * @description Generic dynamic form field component that renders different input types based on field\n * configuration. Used in AgentConfigModal and SkillCreationModal for dynamic form generation.\n *\n * ## Features\n * - Support for 7 field types (text, textarea, dropdown, checkbox, number, multiselect, filepath)\n * - Automatic default value handling\n * - Required field validation indicators\n * - Optional field descriptions with muted styling\n * - Type-safe value conversion (string to number for number fields)\n * - Consistent styling across all field types\n * - Accessible labels with required field markers\n *\n * ## Field Type Handling\n * The component dynamically renders different input controls based on the `field.type` property:\n *\n * ### 1. text\n * - Single-line text input using Input component\n * - Supports placeholder, required validation\n * - Full-width input with consistent styling\n * - Value stored as string\n *\n * ### 2. textarea\n * - Multi-line text input for longer content\n * - 4 rows default height with scrollable overflow\n * - Supports placeholder, required validation\n * - Native textarea element with custom styling\n * - Value stored as string\n *\n * ### 3. dropdown\n * - Single-selection dropdown using select element\n * - Options provided via `field.options` array\n * - Includes empty \"Select an option\" placeholder option\n * - Supports required validation\n * - Value stored as string (selected option)\n *\n * ### 4. checkbox\n * - Boolean toggle with label on right\n * - Compact layout with flex items-center\n * - No required field support (optional by nature)\n * - Value stored as boolean (true/false)\n *\n * ### 5. number\n * - Numeric input using Input component with type=\"number\"\n * - Automatically converts string to number on change\n * - Supports placeholder, required validation\n * - Value stored as number\n *\n * ### 6. multiselect\n * - Multiple-selection checkbox list\n * - Options displayed in scrollable container (max-height 10rem)\n * - Each option rendered as checkbox with label\n * - Array manipulation: adds selected, removes deselected\n * - Supports required validation\n * - Value stored as string array\n *\n * ### 7. filepath\n * - File path input with monospace font\n * - Default placeholder: \"/path/to/file\"\n * - Includes helper text: \"Enter a file or directory path\"\n * - Supports placeholder, required validation\n * - Value stored as string\n *\n * ## Value Rendering\n * The component handles value rendering with default value fallback:\n *\n * ### Default Value Handling\n * - If `value` prop is undefined, uses `field.default` as fallback\n * - Default value specified in InputField schema\n * - Allows pre-population of form fields with sensible defaults\n * - Formula: `currentValue = value !== undefined ? value : defaultValue`\n *\n * ### Type Conversion\n * Different field types convert values appropriately:\n * - **text, textarea, dropdown, filepath**: String values, empty string fallback\n * - **checkbox**: Boolean value, strict equality check (`=== true`)\n * - **number**: Automatic conversion via `Number(e.target.value)` on change\n * - **multiselect**: Array validation (`Array.isArray()`) with empty array fallback\n *\n * ### Empty State Handling\n * - Text-based fields: `currentValue || ''` ensures empty string (not null/undefined)\n * - Checkbox: Strict boolean check ensures false for undefined/null\n * - Multiselect: Array.isArray check with empty array fallback prevents errors\n *\n * ## Dynamic Form Support\n * The component integrates seamlessly with dynamic form systems:\n *\n * ### Schema-Driven Rendering\n * - Field configuration passed via `field` prop (InputField interface)\n * - All field metadata in single object (name, type, label, description, etc.)\n * - Loop through field array to render complete form\n *\n * ### Form State Management\n * - Controlled component pattern with `value` and `onChange` props\n * - Parent component manages form state (typically object with field names as keys)\n * - onChange callback receives typed value (string, number, boolean, or array)\n * - Parent updates state: `onChange={(val) => setFormState({...formState, [field.name]: val})}`\n *\n * ### Validation Integration\n * - Required field indicator (red asterisk) displayed automatically\n * - Required attribute passed to input elements for HTML5 validation\n * - Parent component can implement additional validation logic\n * - Error states managed by parent (not within DynamicField)\n *\n * ## Styling Behavior\n * The component uses consistent Tailwind CSS styling:\n * - **Container**: mb-4 spacing between fields\n * - **Labels**: text-sm font-medium mb-2, block display\n * - **Required Indicator**: text-red-500 asterisk after label\n * - **Description**: text-xs text-muted-foreground mb-2 (optional)\n * - **Inputs**: w-full, px-3 py-2, border border-border, rounded-md\n * - **Focus State**: focus:outline-none focus:ring-2 focus:ring-primary\n * - **Theme Colors**: bg-background, text-foreground\n * - **Checkbox Layout**: flex items-center gap-2 for horizontal alignment\n * - **Multiselect**: border rounded-md p-2, max-h-40 overflow-y-auto\n * - **Multiselect Options**: hover:bg-muted, cursor-pointer, rounded\n * - **Filepath**: font-mono text-sm for monospace path display\n *\n * @example\n * // Text input field\n * const textField: InputField = {\n *   name: \"username\",\n *   type: \"text\",\n *   label: \"Username\",\n *   description: \"Enter your unique username\",\n *   placeholder: \"john_doe\",\n *   required: true\n * };\n *\n * <DynamicField\n *   field={textField}\n *   value={formState.username}\n *   onChange={(val) => setFormState({...formState, username: val})}\n * />\n *\n * @example\n * // Dropdown field with options\n * const dropdownField: InputField = {\n *   name: \"role\",\n *   type: \"dropdown\",\n *   label: \"User Role\",\n *   description: \"Select the user's role in the system\",\n *   options: [\"Admin\", \"Developer\", \"Viewer\"],\n *   default: \"Viewer\",\n *   required: true\n * };\n *\n * <DynamicField\n *   field={dropdownField}\n *   value={formState.role}\n *   onChange={(val) => setFormState({...formState, role: val})}\n * />\n *\n * @example\n * // Multiselect field for multiple options\n * const multiselectField: InputField = {\n *   name: \"permissions\",\n *   type: \"multiselect\",\n *   label: \"Permissions\",\n *   description: \"Select all applicable permissions\",\n *   options: [\"Read\", \"Write\", \"Delete\", \"Execute\"],\n *   default: [\"Read\"],\n *   required: false\n * };\n *\n * <DynamicField\n *   field={multiselectField}\n *   value={formState.permissions}\n *   onChange={(val) => setFormState({...formState, permissions: val})}\n * />\n *\n * @example\n * // Number input with type conversion\n * const numberField: InputField = {\n *   name: \"port\",\n *   type: \"number\",\n *   label: \"Port Number\",\n *   placeholder: \"8080\",\n *   default: 3000,\n *   required: true\n * };\n *\n * <DynamicField\n *   field={numberField}\n *   value={formState.port}\n *   onChange={(val) => setFormState({...formState, port: val})}\n * />\n * // Note: onChange receives number type, not string\n *\n * @example\n * // Checkbox field for boolean values\n * const checkboxField: InputField = {\n *   name: \"enabled\",\n *   type: \"checkbox\",\n *   label: \"Enable Feature\",\n *   default: false\n * };\n *\n * <DynamicField\n *   field={checkboxField}\n *   value={formState.enabled}\n *   onChange={(val) => setFormState({...formState, enabled: val})}\n * />\n *\n * @example\n * // Filepath input with monospace styling\n * const filepathField: InputField = {\n *   name: \"configPath\",\n *   type: \"filepath\",\n *   label: \"Configuration File\",\n *   description: \"Path to the configuration file\",\n *   placeholder: \"/etc/app/config.json\",\n *   required: true\n * };\n *\n * <DynamicField\n *   field={filepathField}\n *   value={formState.configPath}\n *   onChange={(val) => setFormState({...formState, configPath: val})}\n * />\n *\n * @example\n * // Dynamic form generation from field array\n * const fields: InputField[] = [\n *   { name: \"name\", type: \"text\", label: \"Name\", required: true },\n *   { name: \"description\", type: \"textarea\", label: \"Description\" },\n *   { name: \"priority\", type: \"dropdown\", label: \"Priority\", options: [\"Low\", \"Medium\", \"High\"], default: \"Medium\" },\n *   { name: \"enabled\", type: \"checkbox\", label: \"Enabled\", default: true }\n * ];\n *\n * const [formState, setFormState] = useState({});\n *\n * {fields.map((field) => (\n *   <DynamicField\n *     key={field.name}\n *     field={field}\n *     value={formState[field.name]}\n *     onChange={(val) => setFormState({...formState, [field.name]: val})}\n *   />\n * ))}\n */\n\nimport React from 'react';\nimport type { InputField } from '../services/api';\nimport { Input } from './ui/Input';\n\n/**\n * Props for the DynamicField component\n *\n * @interface DynamicFieldProps\n * @property {InputField} field - Field configuration object defining type, label, validation, etc.\n * @property {any} value - Current value of the field (type varies by field.type)\n * @property {(value: any) => void} onChange - Callback invoked when field value changes, receives typed value\n */\ninterface DynamicFieldProps {\n  field: InputField;\n  value: any;\n  onChange: (value: any) => void;\n}\n\n/**\n * DynamicField Component\n *\n * Generic form field component that renders different input types based on field configuration.\n * Supports text, textarea, dropdown, checkbox, number, multiselect, and filepath inputs.\n *\n * @param {DynamicFieldProps} props - Component props\n * @returns {React.ReactElement | null} Rendered field component or null for unknown types\n */\nconst DynamicField: React.FC<DynamicFieldProps> = ({ field, value, onChange }) => {\n  const { name, type, label, placeholder, required, options, default: defaultValue } = field;\n\n  // Use default value if value is undefined\n  const currentValue = value !== undefined ? value : defaultValue;\n\n  switch (type) {\n    case 'text':\n      return (\n        <div className=\"mb-4\">\n          <label className=\"block text-sm font-medium mb-2\">\n            {label} {required && <span className=\"text-red-500\">*</span>}\n          </label>\n          {field.description && (\n            <p className=\"text-xs text-muted-foreground mb-2\">{field.description}</p>\n          )}\n          <Input\n            type=\"text\"\n            value={currentValue || ''}\n            onChange={(e) => onChange(e.target.value)}\n            placeholder={placeholder}\n            required={required}\n            className=\"w-full\"\n          />\n        </div>\n      );\n\n    case 'textarea':\n      return (\n        <div className=\"mb-4\">\n          <label className=\"block text-sm font-medium mb-2\">\n            {label} {required && <span className=\"text-red-500\">*</span>}\n          </label>\n          {field.description && (\n            <p className=\"text-xs text-muted-foreground mb-2\">{field.description}</p>\n          )}\n          <textarea\n            value={currentValue || ''}\n            onChange={(e) => onChange(e.target.value)}\n            placeholder={placeholder}\n            required={required}\n            rows={4}\n            className=\"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary\"\n          />\n        </div>\n      );\n\n    case 'dropdown':\n      return (\n        <div className=\"mb-4\">\n          <label className=\"block text-sm font-medium mb-2\">\n            {label} {required && <span className=\"text-red-500\">*</span>}\n          </label>\n          {field.description && (\n            <p className=\"text-xs text-muted-foreground mb-2\">{field.description}</p>\n          )}\n          <select\n            value={currentValue || ''}\n            onChange={(e) => onChange(e.target.value)}\n            required={required}\n            className=\"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary\"\n          >\n            <option value=\"\">Select an option</option>\n            {options?.map((option) => (\n              <option key={option} value={option}>\n                {option}\n              </option>\n            ))}\n          </select>\n        </div>\n      );\n\n    case 'checkbox':\n      return (\n        <div className=\"mb-4 flex items-center gap-2\">\n          <input\n            type=\"checkbox\"\n            checked={currentValue === true}\n            onChange={(e) => onChange(e.target.checked)}\n            className=\"w-4 h-4\"\n          />\n          <label className=\"text-sm font-medium\">{label}</label>\n        </div>\n      );\n\n    case 'number':\n      return (\n        <div className=\"mb-4\">\n          <label className=\"block text-sm font-medium mb-2\">\n            {label} {required && <span className=\"text-red-500\">*</span>}\n          </label>\n          <Input\n            type=\"number\"\n            value={currentValue || ''}\n            onChange={(e) => onChange(Number(e.target.value))}\n            placeholder={placeholder}\n            required={required}\n            className=\"w-full\"\n          />\n        </div>\n      );\n\n    case 'multiselect':\n      return (\n        <div className=\"mb-4\">\n          <label className=\"block text-sm font-medium mb-2\">\n            {label} {required && <span className=\"text-red-500\">*</span>}\n          </label>\n          {field.description && (\n            <p className=\"text-xs text-muted-foreground mb-2\">{field.description}</p>\n          )}\n          <div className=\"border border-border rounded-md p-2 max-h-40 overflow-y-auto bg-background\">\n            {options?.map((option) => (\n              <label key={option} className=\"flex items-center gap-2 p-1 hover:bg-muted cursor-pointer rounded\">\n                <input\n                  type=\"checkbox\"\n                  checked={Array.isArray(currentValue) && currentValue.includes(option)}\n                  onChange={(e) => {\n                    const currentArray = Array.isArray(currentValue) ? currentValue : [];\n                    if (e.target.checked) {\n                      onChange([...currentArray, option]);\n                    } else {\n                      onChange(currentArray.filter((v: string) => v !== option));\n                    }\n                  }}\n                  className=\"w-4 h-4\"\n                />\n                <span className=\"text-sm\">{option}</span>\n              </label>\n            ))}\n          </div>\n        </div>\n      );\n\n    case 'filepath':\n      return (\n        <div className=\"mb-4\">\n          <label className=\"block text-sm font-medium mb-2\">\n            {label} {required && <span className=\"text-red-500\">*</span>}\n          </label>\n          {field.description && (\n            <p className=\"text-xs text-muted-foreground mb-2\">{field.description}</p>\n          )}\n          <Input\n            type=\"text\"\n            value={currentValue || ''}\n            onChange={(e) => onChange(e.target.value)}\n            placeholder={placeholder || \"/path/to/file\"}\n            required={required}\n            className=\"w-full font-mono text-sm\"\n          />\n          <p className=\"text-xs text-muted-foreground mt-1\">\n            Enter a file or directory path\n          </p>\n        </div>\n      );\n\n    default:\n      return null;\n  }\n};\n\nDynamicField.displayName = 'DynamicField';\n\nexport default DynamicField;\n",
        "last_modified": "2026-01-02T15:11:36.279854"
      },
      "task_intent": {
        "title": "Document Frontend React Components and Hooks",
        "description": "Add comprehensive JSDoc documentation to all React components and custom hooks in the frontend, including prop types, usage examples, component purposes, state management, and side effects.",
        "from_plan": true
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2026-01-02T14:01:11.203463",
  "last_updated": "2026-01-02T14:22:14.782132"
}
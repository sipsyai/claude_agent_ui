{
  "file_path": "src/web/manager/components/ui/ArrayEditor.tsx",
  "main_branch_history": [],
  "task_views": {
    "004-document-frontend-react-components-and-hooks": {
      "task_id": "004-document-frontend-react-components-and-hooks",
      "branch_point": {
        "commit_hash": "34a3f60da53773d90bd6579cb1cfd8417a1dd0b9",
        "content": "import React from 'react';\nimport { Input } from './Input';\nimport { Button } from './Button';\nimport { PlusIcon, TrashIcon } from './Icons';\n\ninterface ArrayEditorProps {\n  value: string[];\n  onChange: (value: string[]) => void;\n  placeholder?: string;\n  disabled?: boolean;\n  label?: string;\n}\n\nexport const ArrayEditor: React.FC<ArrayEditorProps> = ({\n  value,\n  onChange,\n  placeholder = 'Enter value',\n  disabled = false,\n  label,\n}) => {\n  const handleAdd = () => {\n    onChange([...value, '']);\n  };\n\n  const handleRemove = (index: number) => {\n    const newValue = value.filter((_, i) => i !== index);\n    onChange(newValue);\n  };\n\n  const handleChange = (index: number, newVal: string) => {\n    const newValue = [...value];\n    newValue[index] = newVal;\n    onChange(newValue);\n  };\n\n  return (\n    <div className=\"space-y-2\">\n      {label && <label className=\"block text-sm font-medium\">{label}</label>}\n\n      {value.length === 0 && !disabled && (\n        <div className=\"text-sm text-muted-foreground text-center py-4 border border-dashed rounded-md\">\n          No items. Click \"Add Item\" to add one.\n        </div>\n      )}\n\n      {value.map((item, index) => (\n        <div key={index} className=\"flex gap-2 items-center\">\n          <div className=\"flex-1\">\n            <Input\n              value={item}\n              onChange={(e) => handleChange(index, e.target.value)}\n              placeholder={placeholder}\n              disabled={disabled}\n            />\n          </div>\n          {!disabled && (\n            <button\n              type=\"button\"\n              onClick={() => handleRemove(index)}\n              className=\"p-2 hover:bg-destructive/10 text-destructive rounded transition-colors\"\n              title=\"Remove\"\n            >\n              <TrashIcon className=\"h-4 w-4\" />\n            </button>\n          )}\n        </div>\n      ))}\n\n      {!disabled && (\n        <Button\n          type=\"button\"\n          variant=\"secondary\"\n          size=\"sm\"\n          onClick={handleAdd}\n          className=\"w-full\"\n        >\n          <PlusIcon className=\"h-4 w-4 mr-2\" />\n          Add Item\n        </Button>\n      )}\n    </div>\n  );\n};\n",
        "timestamp": "2026-01-02T14:22:14.293924"
      },
      "worktree_state": {
        "content": "/**\n * ArrayEditor Component\n *\n * A dynamic array editor that allows users to add, remove, and edit string values in a list.\n * Provides an intuitive interface for managing collections of strings with individual input\n * fields for each item. Built with accessibility and user experience in mind.\n *\n * ## Features\n * - Add new items to the array (initialized as empty strings)\n * - Remove individual items from the array by index\n * - Edit each array item independently with separate input fields\n * - Visual empty state when no items exist\n * - Optional label for the entire array field\n * - Full disabled state support (hides add/remove controls)\n * - Customizable placeholder text for input fields\n * - Controlled component pattern with onChange callbacks\n * - Smooth hover transitions on remove buttons\n *\n * ## Value Handling\n * The component operates as a fully controlled component:\n * - **value prop**: Array of strings representing the current list items\n * - **onChange callback**: Invoked with the new array whenever items are added, removed, or modified\n * - **Immutability**: All operations create new arrays rather than mutating existing ones\n * - **Empty items**: New items are initialized as empty strings and can be filled by the user\n *\n * When a user adds an item, the component appends an empty string to the array.\n * When removing an item, the component filters out that index position.\n * When editing, the component replaces the value at the specific index.\n *\n * ## Add/Remove Item Functionality\n * **Adding Items:**\n * - Click the \"Add Item\" button at the bottom of the list\n * - A new empty string is appended to the value array\n * - onChange is called with the updated array\n * - The button is hidden when disabled prop is true\n *\n * **Removing Items:**\n * - Click the trash icon button next to any item\n * - The item at that index is removed from the array\n * - onChange is called with the filtered array\n * - Remove buttons are hidden when disabled prop is true\n * - Hover effect: background changes to destructive/10 with smooth transition\n *\n * ## Callbacks\n * **onChange(value: string[])**\n * - Called whenever the array is modified (add, remove, or edit)\n * - Receives the complete new array as its parameter\n * - Always receives a new array instance (not mutated)\n * - Should be used to update parent component state in controlled pattern\n *\n * The onChange callback is invoked in three scenarios:\n * 1. When adding an item: `onChange([...value, ''])`\n * 2. When removing an item: `onChange(value.filter((_, i) => i !== index))`\n * 3. When editing an item: `onChange([...value.slice(0, index), newValue, ...value.slice(index + 1)])`\n *\n * ## Styling Behavior\n * The component uses Tailwind CSS with:\n * - **Container**: Vertical spacing with space-y-2\n * - **Label**: Block display, small text, medium font weight\n * - **Empty State**: Centered text, dashed border, rounded, padding, muted foreground color\n * - **Item Rows**: Flex layout with gap-2, items centered\n * - **Input Fields**: Flex-1 to fill available space\n * - **Remove Buttons**: Padding, hover background (destructive/10), destructive text color, rounded, smooth transitions\n * - **Add Button**: Full width (w-full), secondary variant, small size, with icon\n *\n * @example\n * // Basic usage with controlled state\n * const [items, setItems] = useState(['Item 1', 'Item 2']);\n * <ArrayEditor value={items} onChange={setItems} />\n *\n * @example\n * // With label and custom placeholder\n * const [tags, setTags] = useState([]);\n * <ArrayEditor\n *   value={tags}\n *   onChange={setTags}\n *   label=\"Tags\"\n *   placeholder=\"Enter tag name\"\n * />\n *\n * @example\n * // With initial values\n * const [skills, setSkills] = useState(['JavaScript', 'TypeScript', 'React']);\n * <ArrayEditor\n *   value={skills}\n *   onChange={setSkills}\n *   label=\"Skills\"\n *   placeholder=\"Enter skill\"\n * />\n *\n * @example\n * // Disabled state (read-only view)\n * const [items, setItems] = useState(['Value 1', 'Value 2']);\n * <ArrayEditor\n *   value={items}\n *   onChange={setItems}\n *   disabled={true}\n *   label=\"Read-only Items\"\n * />\n *\n * @example\n * // Empty state (no items initially)\n * const [items, setItems] = useState([]);\n * <ArrayEditor\n *   value={items}\n *   onChange={setItems}\n *   label=\"Environment Variables\"\n *   placeholder=\"Enter variable value\"\n * />\n *\n * @example\n * // Form integration with validation\n * const [emails, setEmails] = useState(['admin@example.com']);\n * const handleChange = (newEmails: string[]) => {\n *   // Validate email format before updating\n *   const validEmails = newEmails.filter(e => e === '' || /\\S+@\\S+\\.\\S+/.test(e));\n *   setEmails(validEmails);\n * };\n * <ArrayEditor\n *   value={emails}\n *   onChange={handleChange}\n *   label=\"Email Addresses\"\n *   placeholder=\"user@example.com\"\n * />\n *\n * @example\n * // Callback with side effects\n * const [urls, setUrls] = useState([]);\n * const handleUrlsChange = (newUrls: string[]) => {\n *   setUrls(newUrls);\n *   console.log('URLs updated:', newUrls.length);\n *   // Trigger validation, save to localStorage, etc.\n * };\n * <ArrayEditor value={urls} onChange={handleUrlsChange} />\n */\n\nimport React from 'react';\nimport { Input } from './Input';\nimport { Button } from './Button';\nimport { PlusIcon, TrashIcon } from './Icons';\n\n/**\n * Props for the ArrayEditor component\n */\ninterface ArrayEditorProps {\n  /**\n   * The current array of string values to display and edit.\n   * This component is fully controlled - the parent must manage state.\n   *\n   * Each string in the array is rendered as a separate input field.\n   * Empty strings are valid and represent blank inputs that users can fill.\n   *\n   * **Important:** Always maintain a proper array (not null/undefined).\n   * Use an empty array `[]` when there are no items.\n   *\n   * @example\n   * value={['Item 1', 'Item 2', '']}\n   */\n  value: string[];\n\n  /**\n   * Callback function invoked when the array is modified.\n   * Receives the complete new array as its parameter.\n   *\n   * This is called when:\n   * - Adding a new item (appends empty string)\n   * - Removing an item (filters out the item at index)\n   * - Editing an item (updates value at specific index)\n   *\n   * The callback always receives a new array instance (not mutated).\n   *\n   * @param value - The new array after the modification\n   *\n   * @example\n   * onChange={(newArray) => setItems(newArray)}\n   */\n  onChange: (value: string[]) => void;\n\n  /**\n   * Placeholder text displayed in empty input fields.\n   * Applied to all input fields in the array.\n   *\n   * @default 'Enter value'\n   *\n   * @example\n   * placeholder=\"Enter email address\"\n   */\n  placeholder?: string;\n\n  /**\n   * When true, the component becomes read-only:\n   * - Hides the \"Add Item\" button\n   * - Hides all remove (trash) buttons\n   * - Disables all input fields\n   * - Prevents any modifications to the array\n   *\n   * Use this for displaying arrays in a non-editable context.\n   *\n   * @default false\n   */\n  disabled?: boolean;\n\n  /**\n   * Optional label text displayed above the array editor.\n   * Rendered as a block element with medium font weight.\n   *\n   * When not provided, no label is shown.\n   *\n   * @example\n   * label=\"Environment Variables\"\n   */\n  label?: string;\n}\n\nexport const ArrayEditor: React.FC<ArrayEditorProps> = ({\n  value,\n  onChange,\n  placeholder = 'Enter value',\n  disabled = false,\n  label,\n}) => {\n  const handleAdd = () => {\n    onChange([...value, '']);\n  };\n\n  const handleRemove = (index: number) => {\n    const newValue = value.filter((_, i) => i !== index);\n    onChange(newValue);\n  };\n\n  const handleChange = (index: number, newVal: string) => {\n    const newValue = [...value];\n    newValue[index] = newVal;\n    onChange(newValue);\n  };\n\n  return (\n    <div className=\"space-y-2\">\n      {label && <label className=\"block text-sm font-medium\">{label}</label>}\n\n      {value.length === 0 && !disabled && (\n        <div className=\"text-sm text-muted-foreground text-center py-4 border border-dashed rounded-md\">\n          No items. Click \"Add Item\" to add one.\n        </div>\n      )}\n\n      {value.map((item, index) => (\n        <div key={index} className=\"flex gap-2 items-center\">\n          <div className=\"flex-1\">\n            <Input\n              value={item}\n              onChange={(e) => handleChange(index, e.target.value)}\n              placeholder={placeholder}\n              disabled={disabled}\n            />\n          </div>\n          {!disabled && (\n            <button\n              type=\"button\"\n              onClick={() => handleRemove(index)}\n              className=\"p-2 hover:bg-destructive/10 text-destructive rounded transition-colors\"\n              title=\"Remove\"\n            >\n              <TrashIcon className=\"h-4 w-4\" />\n            </button>\n          )}\n        </div>\n      ))}\n\n      {!disabled && (\n        <Button\n          type=\"button\"\n          variant=\"secondary\"\n          size=\"sm\"\n          onClick={handleAdd}\n          className=\"w-full\"\n        >\n          <PlusIcon className=\"h-4 w-4 mr-2\" />\n          Add Item\n        </Button>\n      )}\n    </div>\n  );\n};\n\nArrayEditor.displayName = 'ArrayEditor';\n",
        "last_modified": "2026-01-02T15:11:36.292365"
      },
      "task_intent": {
        "title": "Document Frontend React Components and Hooks",
        "description": "Add comprehensive JSDoc documentation to all React components and custom hooks in the frontend, including prop types, usage examples, component purposes, state management, and side effects.",
        "from_plan": true
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2026-01-02T14:01:11.715066",
  "last_updated": "2026-01-02T14:22:15.196950"
}
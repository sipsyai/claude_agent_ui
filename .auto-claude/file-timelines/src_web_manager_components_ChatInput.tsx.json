{
  "file_path": "src/web/manager/components/ChatInput.tsx",
  "main_branch_history": [],
  "task_views": {
    "004-document-frontend-react-components-and-hooks": {
      "task_id": "004-document-frontend-react-components-and-hooks",
      "branch_point": {
        "commit_hash": "34a3f60da53773d90bd6579cb1cfd8417a1dd0b9",
        "content": "import React, { useState, useRef } from 'react';\nimport type { ChatAttachment } from '../services/chat-api';\nimport { fileToBase64 } from '../services/chat-api';\nimport { Button } from './ui/Button';\nimport { PaperclipIcon, XCircleIcon, SendIcon } from './ui/Icons';\n\ninterface ChatInputProps {\n  onSendMessage: (message: string, attachments: ChatAttachment[]) => void;\n}\n\nconst ChatInput: React.FC<ChatInputProps> = ({ onSendMessage }) => {\n  const [message, setMessage] = useState('');\n  const [attachments, setAttachments] = useState<ChatAttachment[]>([]);\n  const [uploading, setUploading] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\n\n  const handleFileSelect = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = e.target.files;\n    if (!files || files.length === 0) return;\n\n    setUploading(true);\n\n    try {\n      const newAttachments: ChatAttachment[] = [];\n\n      for (let i = 0; i < files.length; i++) {\n        const file = files[i];\n\n        // Validate file type\n        const isImage = file.type.startsWith('image/');\n        const isPDF = file.type === 'application/pdf';\n        const isText = file.type.startsWith('text/');\n\n        if (!isImage && !isPDF && !isText) {\n          alert(`File type not supported: ${file.type}`);\n          continue;\n        }\n\n        // Validate file size (max 10MB)\n        if (file.size > 10 * 1024 * 1024) {\n          alert(`File too large: ${file.name} (max 10MB)`);\n          continue;\n        }\n\n        // Convert to base64\n        const base64 = await fileToBase64(file);\n\n        newAttachments.push({\n          name: file.name,\n          mimeType: file.type,\n          data: base64,\n        });\n      }\n\n      setAttachments(prev => [...prev, ...newAttachments]);\n    } catch (error) {\n      console.error('Failed to process files:', error);\n      alert('Failed to upload files');\n    } finally {\n      setUploading(false);\n      // Reset file input\n      if (fileInputRef.current) {\n        fileInputRef.current.value = '';\n      }\n    }\n  };\n\n  const handleRemoveAttachment = (index: number) => {\n    setAttachments(prev => prev.filter((_, i) => i !== index));\n  };\n\n  const handleSend = () => {\n    if (!message.trim() && attachments.length === 0) return;\n\n    onSendMessage(message, attachments);\n\n    // Reset form\n    setMessage('');\n    setAttachments([]);\n\n    // Reset textarea height\n    if (textareaRef.current) {\n      textareaRef.current.style.height = 'auto';\n    }\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLTextAreaElement>) => {\n    // Send on Enter (without Shift)\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSend();\n    }\n  };\n\n  const handleTextareaChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    setMessage(e.target.value);\n\n    // Auto-resize textarea\n    e.target.style.height = 'auto';\n    e.target.style.height = `${Math.min(e.target.scrollHeight, 200)}px`;\n  };\n\n  return (\n    <div className=\"p-4\">\n      {/* Attachments Preview */}\n      {attachments.length > 0 && (\n        <div className=\"mb-3 flex flex-wrap gap-2\">\n          {attachments.map((attachment, index) => (\n            <div\n              key={index}\n              className=\"relative group bg-gray-100 rounded-lg p-2 flex items-center gap-2 max-w-xs\"\n            >\n              {/* File Icon */}\n              <div className=\"flex-shrink-0\">\n                {attachment.mimeType.startsWith('image/') ? (\n                  <div className=\"w-10 h-10 rounded bg-blue-100 flex items-center justify-center text-blue-600\">\n                    <svg className=\"w-6 h-6\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                      <path fillRule=\"evenodd\" d=\"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z\" clipRule=\"evenodd\" />\n                    </svg>\n                  </div>\n                ) : attachment.mimeType === 'application/pdf' ? (\n                  <div className=\"w-10 h-10 rounded bg-red-100 flex items-center justify-center text-red-600\">\n                    <svg className=\"w-6 h-6\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                      <path d=\"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z\" />\n                    </svg>\n                  </div>\n                ) : (\n                  <div className=\"w-10 h-10 rounded bg-gray-200 flex items-center justify-center text-gray-600\">\n                    <svg className=\"w-6 h-6\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                      <path fillRule=\"evenodd\" d=\"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z\" clipRule=\"evenodd\" />\n                    </svg>\n                  </div>\n                )}\n              </div>\n\n              {/* File Info */}\n              <div className=\"flex-1 min-w-0\">\n                <p className=\"text-sm font-medium text-gray-900 truncate\">\n                  {attachment.name}\n                </p>\n                <p className=\"text-xs text-gray-500\">\n                  {attachment.mimeType}\n                </p>\n              </div>\n\n              {/* Remove Button */}\n              <button\n                onClick={() => handleRemoveAttachment(index)}\n                className=\"flex-shrink-0 p-1 text-gray-400 hover:text-red-600 transition-colors\"\n                title=\"Remove\"\n              >\n                <XCircleIcon className=\"w-5 h-5\" />\n              </button>\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* Input Area */}\n      <div className=\"flex items-end gap-2\">\n        {/* File Upload Button */}\n        <div className=\"flex-shrink-0\">\n          <input\n            ref={fileInputRef}\n            type=\"file\"\n            multiple\n            accept=\"image/*,application/pdf,text/*\"\n            onChange={handleFileSelect}\n            className=\"hidden\"\n          />\n          <Button\n            onClick={() => fileInputRef.current?.click()}\n            variant=\"secondary\"\n            size=\"md\"\n            disabled={uploading}\n            title=\"Attach files (images, PDFs, text)\"\n          >\n            <PaperclipIcon className=\"w-5 h-5\" />\n          </Button>\n        </div>\n\n        {/* Textarea */}\n        <div className=\"flex-1\">\n          <textarea\n            ref={textareaRef}\n            value={message}\n            onChange={handleTextareaChange}\n            onKeyDown={handleKeyDown}\n            placeholder=\"Type a message... (Shift+Enter for new line)\"\n            className=\"w-full px-4 py-3 border border-gray-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n            rows={1}\n            style={{ minHeight: '48px', maxHeight: '200px' }}\n          />\n        </div>\n\n        {/* Send Button */}\n        <div className=\"flex-shrink-0\">\n          <Button\n            onClick={handleSend}\n            variant=\"primary\"\n            size=\"md\"\n            disabled={!message.trim() && attachments.length === 0}\n            title=\"Send message (Enter)\"\n          >\n            <SendIcon className=\"w-5 h-5\" />\n          </Button>\n        </div>\n      </div>\n\n      {/* Hint */}\n      <div className=\"mt-2 text-xs text-gray-500\">\n        Press <kbd className=\"px-1 py-0.5 bg-gray-100 border border-gray-300 rounded\">Enter</kbd> to send,\n        <kbd className=\"ml-1 px-1 py-0.5 bg-gray-100 border border-gray-300 rounded\">Shift+Enter</kbd> for new line\n      </div>\n    </div>\n  );\n};\n\nexport default ChatInput;\n",
        "timestamp": "2026-01-02T14:22:14.293924"
      },
      "worktree_state": {
        "content": "/**\n * ChatInput Component\n *\n * A comprehensive chat input component that handles message composition, file attachments,\n * and keyboard shortcuts. Features auto-resizing textarea, attachment previews, and\n * validation for file uploads.\n *\n * ## Features\n * - Auto-resizing textarea (48px min, 200px max)\n * - File attachment support (images, PDFs, text files)\n * - File validation (type checking, size limit 10MB)\n * - Attachment preview with icons and remove functionality\n * - Keyboard shortcuts (Enter to send, Shift+Enter for new line)\n * - Disabled states when input is empty or files are uploading\n * - Base64 encoding for file attachments\n * - Visual upload feedback with loading states\n *\n * ## Input Handling\n * The component uses controlled state for the message text:\n * - `message` state tracks textarea value\n * - `handleTextareaChange` updates state and auto-resizes textarea\n * - Textarea height grows with content up to 200px, then scrolls\n * - Height calculation uses scrollHeight for smooth resizing\n *\n * ## Submit Behavior\n * Messages can be sent when:\n * - Text is not empty (after trimming), OR\n * - At least one attachment is present\n *\n * When submitted via `handleSend`:\n * 1. Validates that message or attachments exist\n * 2. Calls `onSendMessage` callback with message text and attachments array\n * 3. Resets message state to empty string\n * 4. Clears attachments array\n * 5. Resets textarea height to auto (collapses to minimum)\n *\n * ## Keyboard Shortcuts\n * - **Enter**: Send message (prevented when holding Shift)\n * - **Shift+Enter**: Insert new line in message (default browser behavior)\n *\n * Keyboard handling is implemented in `handleKeyDown`:\n * - Detects Enter key press without Shift modifier\n * - Prevents default Enter behavior (prevents form submission or newline)\n * - Triggers `handleSend` to submit message\n *\n * ## File Attachments\n * The component supports three file types:\n * - **Images**: Any mime type starting with `image/` (PNG, JPEG, GIF, etc.)\n * - **PDFs**: `application/pdf`\n * - **Text files**: Any mime type starting with `text/` (plain text, CSV, etc.)\n *\n * File handling workflow in `handleFileSelect`:\n * 1. Validates file type (rejects unsupported types with alert)\n * 2. Validates file size (max 10MB, rejects larger files with alert)\n * 3. Converts file to base64 using `fileToBase64` helper\n * 4. Creates `ChatAttachment` object with name, mimeType, and data\n * 5. Appends to attachments array (supports multiple files)\n * 6. Shows uploading state while processing\n * 7. Resets file input after processing\n *\n * Attachment previews show:\n * - Icon based on file type (blue for images, red for PDFs, gray for text)\n * - File name (truncated if too long)\n * - File mime type\n * - Remove button (X icon) on hover\n *\n * ## Styling Behavior\n * The component uses Tailwind CSS with:\n * - **Container**: Padding p-4 around entire component\n * - **Attachments preview**: Flex wrap with gap-2, shown only when attachments exist\n * - **Attachment cards**: Gray background, rounded corners, flex layout with icon, info, and remove button\n * - **Input area**: Flex layout with items-end alignment for buttons and textarea\n * - **Textarea**: Full width, border with focus ring (blue-500), auto-resizing with constraints\n * - **Buttons**: Use Button component with variants (secondary for attach, primary for send)\n * - **Hint text**: Small gray text with kbd elements for keyboard shortcuts\n *\n * The textarea styling includes:\n * - Border: `border-gray-300` with `focus:ring-blue-500`\n * - Resize: Disabled with `resize-none` (auto-resize via JS instead)\n * - Min/max height: Enforced via inline styles (48px-200px)\n * - Placeholder: Hints at Shift+Enter shortcut\n *\n * @example\n * // Basic usage with message handler\n * function ChatPanel() {\n *   const handleSendMessage = (message: string, attachments: ChatAttachment[]) => {\n *     console.log('Message:', message);\n *     console.log('Attachments:', attachments.length);\n *     // Send to backend API or append to message list\n *   };\n *\n *   return <ChatInput onSendMessage={handleSendMessage} />;\n * }\n *\n * @example\n * // Integration with chat state management\n * function ChatContainer() {\n *   const [messages, setMessages] = useState<Message[]>([]);\n *\n *   const handleSend = (text: string, files: ChatAttachment[]) => {\n *     const newMessage = {\n *       id: Date.now(),\n *       role: 'user',\n *       content: text,\n *       attachments: files,\n *       timestamp: new Date(),\n *     };\n *     setMessages(prev => [...prev, newMessage]);\n *   };\n *\n *   return (\n *     <div>\n *       <MessageList messages={messages} />\n *       <ChatInput onSendMessage={handleSend} />\n *     </div>\n *   );\n * }\n *\n * @example\n * // With API integration and error handling\n * function ApiChat() {\n *   const sendToApi = async (message: string, attachments: ChatAttachment[]) => {\n *     try {\n *       const response = await fetch('/api/chat/send', {\n *         method: 'POST',\n *         headers: { 'Content-Type': 'application/json' },\n *         body: JSON.stringify({ message, attachments }),\n *       });\n *       if (!response.ok) throw new Error('Failed to send');\n *       const data = await response.json();\n *       console.log('Message sent:', data.id);\n *     } catch (error) {\n *       console.error('Send error:', error);\n *       alert('Failed to send message');\n *     }\n *   };\n *\n *   return <ChatInput onSendMessage={sendToApi} />;\n * }\n *\n * @example\n * // With custom file size and type restrictions\n * function RestrictedChat() {\n *   const handleSend = (message: string, attachments: ChatAttachment[]) => {\n *     // Attachments are already validated by ChatInput:\n *     // - Only images, PDFs, and text files\n *     // - Max 10MB per file\n *     // - Base64 encoded in attachment.data\n *     processMessage(message, attachments);\n *   };\n *\n *   return <ChatInput onSendMessage={handleSend} />;\n * }\n */\n\nimport React, { useState, useRef } from 'react';\nimport type { ChatAttachment } from '../services/chat-api';\nimport { fileToBase64 } from '../services/chat-api';\nimport { Button } from './ui/Button';\nimport { PaperclipIcon, XCircleIcon, SendIcon } from './ui/Icons';\n\n/**\n * Props for the ChatInput component\n */\ninterface ChatInputProps {\n  /**\n   * Callback function invoked when a message is sent.\n   *\n   * Called when:\n   * - User presses Enter (without Shift)\n   * - User clicks the Send button\n   *\n   * Only called if message text is non-empty (after trimming) OR attachments array is non-empty.\n   *\n   * @param message - The message text from the textarea (may be empty if only attachments)\n   * @param attachments - Array of file attachments with base64-encoded data\n   *\n   * @example\n   * const handleSend = (msg: string, files: ChatAttachment[]) => {\n   *   console.log('Text:', msg);\n   *   console.log('Files:', files.map(f => f.name));\n   * };\n   */\n  onSendMessage: (message: string, attachments: ChatAttachment[]) => void;\n}\n\nconst ChatInput: React.FC<ChatInputProps> = ({ onSendMessage }) => {\n  const [message, setMessage] = useState('');\n  const [attachments, setAttachments] = useState<ChatAttachment[]>([]);\n  const [uploading, setUploading] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\n\n  /**\n   * Handles file selection from the file input.\n   *\n   * Workflow:\n   * 1. Sets uploading state to true (disables attach button)\n   * 2. Iterates through selected files\n   * 3. Validates each file type (images, PDFs, text files only)\n   * 4. Validates each file size (max 10MB)\n   * 5. Converts valid files to base64 using fileToBase64 helper\n   * 6. Creates ChatAttachment objects with name, mimeType, and base64 data\n   * 7. Appends new attachments to existing array\n   * 8. Resets file input value to allow re-selecting same file\n   * 9. Sets uploading state to false\n   *\n   * Invalid files are skipped with an alert message. If all files are invalid,\n   * the attachments array remains unchanged.\n   *\n   * @param e - File input change event\n   * @internal\n   */\n  const handleFileSelect = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = e.target.files;\n    if (!files || files.length === 0) return;\n\n    setUploading(true);\n\n    try {\n      const newAttachments: ChatAttachment[] = [];\n\n      for (let i = 0; i < files.length; i++) {\n        const file = files[i];\n\n        // Validate file type\n        const isImage = file.type.startsWith('image/');\n        const isPDF = file.type === 'application/pdf';\n        const isText = file.type.startsWith('text/');\n\n        if (!isImage && !isPDF && !isText) {\n          alert(`File type not supported: ${file.type}`);\n          continue;\n        }\n\n        // Validate file size (max 10MB)\n        if (file.size > 10 * 1024 * 1024) {\n          alert(`File too large: ${file.name} (max 10MB)`);\n          continue;\n        }\n\n        // Convert to base64\n        const base64 = await fileToBase64(file);\n\n        newAttachments.push({\n          name: file.name,\n          mimeType: file.type,\n          data: base64,\n        });\n      }\n\n      setAttachments(prev => [...prev, ...newAttachments]);\n    } catch (error) {\n      console.error('Failed to process files:', error);\n      alert('Failed to upload files');\n    } finally {\n      setUploading(false);\n      // Reset file input\n      if (fileInputRef.current) {\n        fileInputRef.current.value = '';\n      }\n    }\n  };\n\n  /**\n   * Removes an attachment from the attachments array by index.\n   *\n   * Creates a new array with the attachment at the specified index filtered out.\n   * Does not mutate the original attachments array.\n   *\n   * @param index - Zero-based index of the attachment to remove\n   * @internal\n   */\n  const handleRemoveAttachment = (index: number) => {\n    setAttachments(prev => prev.filter((_, i) => i !== index));\n  };\n\n  /**\n   * Sends the message and attachments via the onSendMessage callback.\n   *\n   * Validation:\n   * - Returns early if message is empty (after trimming) AND no attachments exist\n   *\n   * Actions on successful send:\n   * 1. Invokes onSendMessage callback with message text and attachments array\n   * 2. Clears message state (empty string)\n   * 3. Clears attachments array (empty array)\n   * 4. Resets textarea height to 'auto' (collapses to minimum height)\n   *\n   * Called by:\n   * - handleKeyDown when Enter is pressed (without Shift)\n   * - Send button onClick event\n   *\n   * @internal\n   */\n  const handleSend = () => {\n    if (!message.trim() && attachments.length === 0) return;\n\n    onSendMessage(message, attachments);\n\n    // Reset form\n    setMessage('');\n    setAttachments([]);\n\n    // Reset textarea height\n    if (textareaRef.current) {\n      textareaRef.current.style.height = 'auto';\n    }\n  };\n\n  /**\n   * Handles keyboard events in the textarea for keyboard shortcuts.\n   *\n   * Keyboard shortcuts:\n   * - **Enter** (without Shift): Sends the message\n   *   - Prevents default behavior (newline insertion)\n   *   - Calls handleSend to submit message\n   * - **Shift+Enter**: Inserts newline (default browser behavior, not prevented)\n   *\n   * @param e - Keyboard event from textarea\n   * @internal\n   */\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLTextAreaElement>) => {\n    // Send on Enter (without Shift)\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSend();\n    }\n  };\n\n  /**\n   * Handles textarea value changes and auto-resizing.\n   *\n   * Actions:\n   * 1. Updates message state with new textarea value\n   * 2. Resets textarea height to 'auto' to calculate new scrollHeight\n   * 3. Sets textarea height to scrollHeight (content height) capped at 200px max\n   *\n   * Auto-resize behavior:\n   * - Min height: 48px (enforced via inline style in JSX)\n   * - Max height: 200px (enforced by Math.min)\n   * - Grows smoothly as user types\n   * - Shrinks when content is deleted\n   * - Scrolls vertically when content exceeds 200px\n   *\n   * @param e - Textarea change event\n   * @internal\n   */\n  const handleTextareaChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    setMessage(e.target.value);\n\n    // Auto-resize textarea\n    e.target.style.height = 'auto';\n    e.target.style.height = `${Math.min(e.target.scrollHeight, 200)}px`;\n  };\n\n  return (\n    <div className=\"p-4\">\n      {/* Attachments Preview */}\n      {attachments.length > 0 && (\n        <div className=\"mb-3 flex flex-wrap gap-2\">\n          {attachments.map((attachment, index) => (\n            <div\n              key={index}\n              className=\"relative group bg-gray-100 rounded-lg p-2 flex items-center gap-2 max-w-xs\"\n            >\n              {/* File Icon */}\n              <div className=\"flex-shrink-0\">\n                {attachment.mimeType.startsWith('image/') ? (\n                  <div className=\"w-10 h-10 rounded bg-blue-100 flex items-center justify-center text-blue-600\">\n                    <svg className=\"w-6 h-6\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                      <path fillRule=\"evenodd\" d=\"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z\" clipRule=\"evenodd\" />\n                    </svg>\n                  </div>\n                ) : attachment.mimeType === 'application/pdf' ? (\n                  <div className=\"w-10 h-10 rounded bg-red-100 flex items-center justify-center text-red-600\">\n                    <svg className=\"w-6 h-6\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                      <path d=\"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z\" />\n                    </svg>\n                  </div>\n                ) : (\n                  <div className=\"w-10 h-10 rounded bg-gray-200 flex items-center justify-center text-gray-600\">\n                    <svg className=\"w-6 h-6\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                      <path fillRule=\"evenodd\" d=\"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z\" clipRule=\"evenodd\" />\n                    </svg>\n                  </div>\n                )}\n              </div>\n\n              {/* File Info */}\n              <div className=\"flex-1 min-w-0\">\n                <p className=\"text-sm font-medium text-gray-900 truncate\">\n                  {attachment.name}\n                </p>\n                <p className=\"text-xs text-gray-500\">\n                  {attachment.mimeType}\n                </p>\n              </div>\n\n              {/* Remove Button */}\n              <button\n                onClick={() => handleRemoveAttachment(index)}\n                className=\"flex-shrink-0 p-1 text-gray-400 hover:text-red-600 transition-colors\"\n                title=\"Remove\"\n              >\n                <XCircleIcon className=\"w-5 h-5\" />\n              </button>\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* Input Area */}\n      <div className=\"flex items-end gap-2\">\n        {/* File Upload Button */}\n        <div className=\"flex-shrink-0\">\n          <input\n            ref={fileInputRef}\n            type=\"file\"\n            multiple\n            accept=\"image/*,application/pdf,text/*\"\n            onChange={handleFileSelect}\n            className=\"hidden\"\n          />\n          <Button\n            onClick={() => fileInputRef.current?.click()}\n            variant=\"secondary\"\n            size=\"md\"\n            disabled={uploading}\n            title=\"Attach files (images, PDFs, text)\"\n          >\n            <PaperclipIcon className=\"w-5 h-5\" />\n          </Button>\n        </div>\n\n        {/* Textarea */}\n        <div className=\"flex-1\">\n          <textarea\n            ref={textareaRef}\n            value={message}\n            onChange={handleTextareaChange}\n            onKeyDown={handleKeyDown}\n            placeholder=\"Type a message... (Shift+Enter for new line)\"\n            className=\"w-full px-4 py-3 border border-gray-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n            rows={1}\n            style={{ minHeight: '48px', maxHeight: '200px' }}\n          />\n        </div>\n\n        {/* Send Button */}\n        <div className=\"flex-shrink-0\">\n          <Button\n            onClick={handleSend}\n            variant=\"primary\"\n            size=\"md\"\n            disabled={!message.trim() && attachments.length === 0}\n            title=\"Send message (Enter)\"\n          >\n            <SendIcon className=\"w-5 h-5\" />\n          </Button>\n        </div>\n      </div>\n\n      {/* Hint */}\n      <div className=\"mt-2 text-xs text-gray-500\">\n        Press <kbd className=\"px-1 py-0.5 bg-gray-100 border border-gray-300 rounded\">Enter</kbd> to send,\n        <kbd className=\"ml-1 px-1 py-0.5 bg-gray-100 border border-gray-300 rounded\">Shift+Enter</kbd> for new line\n      </div>\n    </div>\n  );\n};\n\nChatInput.displayName = 'ChatInput';\n\nexport default ChatInput;\n",
        "last_modified": "2026-01-02T14:22:15.551484"
      },
      "task_intent": {
        "title": "Document Frontend React Components and Hooks",
        "description": "Add comprehensive JSDoc documentation to all React components and custom hooks in the frontend, including prop types, usage examples, component purposes, state management, and side effects.",
        "from_plan": true
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2026-01-02T14:01:10.956673",
  "last_updated": "2026-01-02T14:22:14.611027"
}
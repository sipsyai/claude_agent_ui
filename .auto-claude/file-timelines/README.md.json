{
  "file_path": "README.md",
  "main_branch_history": [],
  "task_views": {
    "003-create-architecture-documentation-with-system-diag": {
      "task_id": "003-create-architecture-documentation-with-system-diag",
      "branch_point": {
        "commit_hash": "34a3f60da53773d90bd6579cb1cfd8417a1dd0b9",
        "content": "# Claude Agent UI\n\nA comprehensive web-based management interface for Claude agents, skills, slash commands, and MCP (Model Context Protocol) servers. Built with React, Express, and the Claude Agent SDK.\n\n## Features\n\n### \ud83e\udd16 Agent Management\n- **Create & Edit Agents**: Visual interface for creating and configuring Claude agents\n- **AI-Powered Agent Creator**: Chat-based agent creation using Claude\n- **Execute Agents**: Run agents with real-time streaming output\n- **Tool Configuration**: Select and configure tools for each agent\n- **MCP Integration**: Connect agents to MCP servers\n\n### \ud83c\udfaf Skills Management\n- **Create Skills**: Build reusable skills with YAML frontmatter\n- **Skill References**: Track which agents use specific skills\n- **Usage Analytics**: View skill usage across your agent ecosystem\n- **Tool Allowlisting**: Configure allowed tools per skill\n\n### \u26a1 Slash Commands\n- **Browse Commands**: View all available slash commands\n- **Command Details**: See command descriptions and usage\n- **Quick Access**: Easily reference command syntax\n\n### \ud83d\udd0c MCP Server Management\n- **Server Configuration**: Add, edit, and delete MCP servers\n- **Multiple Transport Types**: Support for stdio, SDK, SSE, and HTTP\n- **Server Testing**: Validate server connectivity\n- **Tool Discovery**: Browse available tools from each server\n- **Import/Export**: Backup and restore MCP configurations\n- **Bulk Operations**: Manage multiple servers efficiently\n\n### \ud83d\udccb Task Management\n- **Task Execution**: Run and monitor tasks\n- **Task History**: View past task executions\n- **Status Tracking**: Monitor task progress and completion\n\n## Prerequisites\n\n- Node.js >= 20.19.0\n- npm or yarn\n- Anthropic API key (for agent execution)\n- Claude CLI installed and configured (for project analysis)\n- Docker and Docker Compose (for PostgreSQL database)\n\n## Infrastructure Setup (PostgreSQL Migration)\n\nThis project is being migrated from SQLite to a production-ready PostgreSQL + Strapi + Express architecture. The infrastructure setup includes:\n\n### Quick Start with Docker\n\n1. **Generate secure secrets**:\n```bash\n./scripts/generate-secrets.sh\n```\n\n2. **Start PostgreSQL**:\n```bash\ndocker-compose up -d postgres\n```\n\n3. **Verify setup**:\n```bash\n# Check container status\ndocker-compose ps\n\n# Check health\ndocker inspect --format='{{.State.Health.Status}}' claude-postgres\n```\n\n### PostgreSQL Connection Details\n\n- **Host**: localhost\n- **Port**: 5432\n- **Database**: claude_agent_ui\n- **User**: postgres\n- **Password**: (generated in .env)\n\n### Docker Services\n\n- **PostgreSQL 16 (Alpine)**: Primary database container\n  - Persistent volume: `claude-postgres-data`\n  - Health checks configured\n  - Automated backups to `./database/backups/`\n\n### Environment Variables\n\nAll database credentials and secrets are managed through the `.env` file. Required variables:\n- `POSTGRES_DB` - Database name\n- `POSTGRES_USER` - Database user\n- `POSTGRES_PASSWORD` - Database password (generated)\n- `STRAPI_*` - Strapi secrets (for future tasks)\n\nSee `.env.example` for the complete list.\n\n### Migration Status\n\nThe project is currently undergoing a phased migration:\n\n\u2705 **Task 01: Infrastructure Setup** (Complete)\n- Docker Compose with PostgreSQL\n- Environment configuration\n- Secrets generation utility\n- Network and volume setup\n\n\ud83d\udd04 **Upcoming Tasks**:\n- Task 02: PostgreSQL Schema Creation\n- Task 03: Strapi CMS Initialization\n- Task 04: Content Types Creation\n- ... (see `.claude/Project/README.md` for full roadmap)\n\n### Troubleshooting Docker Setup\n\n**Container won't start:**\n```bash\n# View logs\ndocker-compose logs postgres\n\n# Restart container\ndocker-compose restart postgres\n```\n\n**Connection refused:**\n```bash\n# Verify PostgreSQL is healthy\ndocker-compose exec postgres pg_isready -U postgres\n\n# Test connection\ndocker-compose exec postgres psql -U postgres -d claude_agent_ui\n```\n\n**Reset database:**\n```bash\n# Stop and remove containers\ndocker-compose down\n\n# Remove volumes (CAUTION: deletes all data)\ndocker volume rm claude-postgres-data\n\n# Start fresh\ndocker-compose up -d postgres\n```\n\n## Installation\n\n1. Clone or download this repository:\n```bash\ncd C:\\Users\\Ali\\Documents\\Projects\\claude_agent_ui\n```\n\n2. Install dependencies:\n```bash\nnpm install\n```\n\n3. Configure environment variables:\n```bash\ncp .env.example .env\n```\n\nEdit `.env` and add your Anthropic API key:\n```env\nANTHROPIC_API_KEY=your_api_key_here\n```\n\n4. Set up your project structure:\n\nCreate the following directories in your working project:\n```\n.claude/\n\u251c\u2500\u2500 agents/      # Agent markdown files\n\u251c\u2500\u2500 skills/      # Skill directories with SKILL.md\n\u2514\u2500\u2500 commands/    # Slash command files\n```\n\n## Development\n\nStart the development server (frontend + backend):\n```bash\nnpm run dev\n```\n\nOr run them separately:\n```bash\n# Backend only\nnpm run dev:server\n\n# Frontend only (in another terminal)\nnpm run dev:frontend\n```\n\nThe application will be available at:\n- **Manager UI**: http://localhost:3001/manager\n- **API**: http://localhost:3001/api/manager\n- **Health Check**: http://localhost:3001/health\n\n## Production Build\n\n1. Build the application:\n```bash\nnpm run build\n```\n\n2. Start the production server:\n```bash\nnpm start\n```\n\n## Project Structure\n\n```\nclaude_agent_ui/\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 server.ts                    # Express server entry point\n\u2502   \u251c\u2500\u2500 routes/\n\u2502   \u2502   \u2514\u2500\u2500 manager.routes.ts        # Manager API routes\n\u2502   \u251c\u2500\u2500 services/\n\u2502   \u2502   \u251c\u2500\u2500 claude-structure-parser.ts  # Parse .claude directory\n\u2502   \u2502   \u251c\u2500\u2500 claude-sdk-service.ts       # Claude SDK integration\n\u2502   \u2502   \u251c\u2500\u2500 skill-service.ts            # Skill management\n\u2502   \u2502   \u251c\u2500\u2500 mcp-service.ts              # MCP server management\n\u2502   \u2502   \u251c\u2500\u2500 task-storage-service.ts     # Task persistence\n\u2502   \u2502   \u251c\u2500\u2500 file-system-service.ts      # File operations\n\u2502   \u2502   \u251c\u2500\u2500 logger.ts                   # Logging service\n\u2502   \u2502   \u2514\u2500\u2500 prompts/\n\u2502   \u2502       \u2514\u2500\u2500 agent-creator-prompt.ts # AI agent creator prompt\n\u2502   \u251c\u2500\u2500 types/\n\u2502   \u2502   \u251c\u2500\u2500 index.ts                 # Core type definitions\n\u2502   \u2502   \u251c\u2500\u2500 mcp-types.ts             # MCP-related types\n\u2502   \u2502   \u251c\u2500\u2500 task-types.ts            # Task types\n\u2502   \u2502   \u2514\u2500\u2500 sdk-types.ts             # SDK types\n\u2502   \u251c\u2500\u2500 utils/\n\u2502   \u2502   \u2514\u2500\u2500 env-substitution.ts      # Environment variable helpers\n\u2502   \u2514\u2500\u2500 web/\n\u2502       \u251c\u2500\u2500 index.html               # HTML entry point\n\u2502       \u251c\u2500\u2500 main.tsx                 # React entry point\n\u2502       \u2514\u2500\u2500 manager/                 # Manager UI components\n\u2502           \u251c\u2500\u2500 ManagerApp.tsx       # Main app component\n\u2502           \u251c\u2500\u2500 components/          # UI components\n\u2502           \u251c\u2500\u2500 hooks/               # React hooks\n\u2502           \u251c\u2500\u2500 services/            # Frontend API client\n\u2502           \u251c\u2500\u2500 types.ts             # Frontend types\n\u2502           \u2514\u2500\u2500 constants.ts         # Configuration constants\n\u251c\u2500\u2500 public/                          # Static assets\n\u251c\u2500\u2500 dist/                            # Build output\n\u251c\u2500\u2500 .mcp.json                        # MCP server configuration\n\u251c\u2500\u2500 package.json\n\u251c\u2500\u2500 tsconfig.json\n\u251c\u2500\u2500 vite.config.ts\n\u2514\u2500\u2500 tailwind.config.js\n```\n\n## API Endpoints\n\n### Validation\n- `POST /api/manager/validate` - Validate Claude setup\n\n### Agents\n- `GET /api/manager/agents` - List all agents\n- `GET /api/manager/agents/:id` - Get agent details\n- `POST /api/manager/agents` - Create agent\n- `PUT /api/manager/agents/:id` - Update agent\n- `POST /api/manager/agents/:id/execute` - Execute agent (SSE)\n- `POST /api/manager/agents/create-with-claude/message` - AI-guided agent creation\n\n### Skills\n- `GET /api/manager/skills` - List all skills\n- `GET /api/manager/skills/:id` - Get skill details\n- `POST /api/manager/skills` - Create skill\n- `PUT /api/manager/skills/:id` - Update skill\n- `GET /api/manager/skills-usage` - Get skill usage statistics\n\n### Commands\n- `GET /api/manager/commands` - List slash commands\n- `GET /api/manager/commands/:id` - Get command details\n\n### MCP Servers\n- `GET /api/manager/mcp-servers` - List MCP servers\n- `GET /api/manager/mcp-servers/:id` - Get server details\n- `POST /api/manager/mcp-servers` - Create server\n- `PUT /api/manager/mcp-servers/:id` - Update server\n- `DELETE /api/manager/mcp-servers/:id` - Delete server\n- `POST /api/manager/mcp-servers/:id/test` - Test server\n- `POST /api/manager/mcp-servers/:id/toggle` - Enable/disable server\n- `GET /api/manager/mcp-servers/:id/tools` - List server tools\n- `GET /api/manager/mcp-servers/export` - Export configuration\n- `POST /api/manager/mcp-servers/import` - Import configuration\n- `POST /api/manager/mcp-servers/bulk-delete` - Bulk delete servers\n\n### Project Analysis\n- `GET /api/manager/analyze` - Full project analysis\n- `GET /api/manager/tools` - List available tools\n- `GET /api/manager/history-path` - Get Claude history path\n\n## Configuration\n\n### Environment Variables\n\n| Variable | Description | Default |\n|----------|-------------|---------|\n| `NODE_ENV` | Environment mode | `development` |\n| `PORT` | Server port | `3001` |\n| `HOST` | Server host | `0.0.0.0` |\n| `LOG_LEVEL` | Logging verbosity | `info` |\n| `ANTHROPIC_API_KEY` | Claude API key | (required) |\n| `PROJECT_DIR` | Project directory | current directory |\n\n### MCP Configuration\n\nMCP servers are configured in `.mcp.json` at the project root:\n\n```json\n{\n  \"mcpServers\": {\n    \"filesystem\": {\n      \"command\": \"npx\",\n      \"args\": [\"-y\", \"@modelcontextprotocol/server-filesystem\", \"/path/to/allowed/dir\"],\n      \"disabled\": false\n    },\n    \"my-server\": {\n      \"command\": \"node\",\n      \"args\": [\"path/to/server.js\"],\n      \"env\": {\n        \"API_KEY\": \"your-key\"\n      }\n    }\n  }\n}\n```\n\n## Technology Stack\n\n- **Frontend**: React 18, React Router, Tailwind CSS, Radix UI\n- **Backend**: Express, Node.js\n- **AI/SDK**: Claude Agent SDK, Anthropic SDK, MCP SDK\n- **Build Tools**: Vite, TypeScript\n- **Utilities**: js-yaml, zod, uuid\n\n## Development Tips\n\n### Type Safety\nThe project uses TypeScript throughout. Run type checking with:\n```bash\nnpm run typecheck\n```\n\n### Hot Reload\nBoth frontend and backend support hot reload in development mode. Changes will automatically reload.\n\n### Logging\nAdjust log level in `.env`:\n- `silent` - No logs\n- `error` - Errors only\n- `warn` - Warnings and errors\n- `info` - Info, warnings, and errors (default)\n- `debug` - All logs including debug info\n\n### Custom MCP Servers\nTo add a custom MCP server:\n1. Go to the MCP Servers page in the UI\n2. Click \"Add Server\"\n3. Fill in server details (name, command, args)\n4. Test the connection\n5. Save and enable\n\n## Troubleshooting\n\n### Port Already in Use\nChange the port in `.env`:\n```env\nPORT=3002\n```\n\n### Agent Execution Fails\n1. Check your `ANTHROPIC_API_KEY` is valid\n2. Ensure `.mcp.json` is properly configured\n3. Check logs for detailed error messages\n\n### MCP Server Not Working\n1. Test the server using the \"Test\" button in the UI\n2. Check server logs in the console\n3. Verify the command and args are correct\n4. Ensure any required environment variables are set\n\n### Build Errors\n1. Clear build cache: `npm run clean`\n2. Reinstall dependencies: `rm -rf node_modules && npm install`\n3. Run type check: `npm run typecheck`\n\n## Contributing\n\nThis is a standalone project forked from the CUI project. Feel free to customize it for your needs.\n\n## License\n\nMIT\n\n## Credits\n\nBased on the [CUI project](https://github.com/bmpixel/cui) by Wenbo Pan.\n",
        "timestamp": "2026-01-02T10:53:08.483278"
      },
      "worktree_state": {
        "content": "# Claude Agent UI\n\nA comprehensive web-based management interface for Claude agents, skills, slash commands, and MCP (Model Context Protocol) servers. Built with React, Express, and the Claude Agent SDK.\n\n## Features\n\n### \ud83e\udd16 Agent Management\n- **Create & Edit Agents**: Visual interface for creating and configuring Claude agents\n- **AI-Powered Agent Creator**: Chat-based agent creation using Claude\n- **Execute Agents**: Run agents with real-time streaming output\n- **Tool Configuration**: Select and configure tools for each agent\n- **MCP Integration**: Connect agents to MCP servers\n\n### \ud83c\udfaf Skills Management\n- **Create Skills**: Build reusable skills with YAML frontmatter\n- **Skill References**: Track which agents use specific skills\n- **Usage Analytics**: View skill usage across your agent ecosystem\n- **Tool Allowlisting**: Configure allowed tools per skill\n\n### \u26a1 Slash Commands\n- **Browse Commands**: View all available slash commands\n- **Command Details**: See command descriptions and usage\n- **Quick Access**: Easily reference command syntax\n\n### \ud83d\udd0c MCP Server Management\n- **Server Configuration**: Add, edit, and delete MCP servers\n- **Multiple Transport Types**: Support for stdio, SDK, SSE, and HTTP\n- **Server Testing**: Validate server connectivity\n- **Tool Discovery**: Browse available tools from each server\n- **Import/Export**: Backup and restore MCP configurations\n- **Bulk Operations**: Manage multiple servers efficiently\n\n### \ud83d\udccb Task Management\n- **Task Execution**: Run and monitor tasks\n- **Task History**: View past task executions\n- **Status Tracking**: Monitor task progress and completion\n\n## Architecture\n\nThe Claude Agent UI is a hybrid full-stack application combining multiple services in a containerized environment to deliver real-time AI agent execution, persistent data storage, and extensible tool integration.\n\n### System Overview\n\n```mermaid\ngraph TB\n    subgraph \"Client Layer\"\n        Browser[Web Browser]\n    end\n\n    subgraph \"Docker Network: frontend\"\n        subgraph \"Frontend Container\"\n            React[React SPA<br/>Vite + Tailwind + Radix UI]\n            Nginx[Nginx<br/>Reverse Proxy]\n            React --> Nginx\n        end\n\n        subgraph \"Express Container\"\n            Express[Express Server<br/>Port 3001]\n            ClaudeSDK[Claude SDK Service<br/>Agent Execution]\n            MCPService[MCP Service<br/>Tool Integration]\n            StrapiClient[Strapi Client<br/>Data Access Layer]\n            SSE[SSE Streaming<br/>Real-time Events]\n\n            Express --> ClaudeSDK\n            Express --> MCPService\n            Express --> StrapiClient\n            Express --> SSE\n        end\n\n        subgraph \"Strapi Container\"\n            Strapi[Strapi CMS<br/>REST API<br/>Port 1337]\n        end\n    end\n\n    subgraph \"Docker Network: backend\"\n        subgraph \"PostgreSQL Container\"\n            Postgres[(PostgreSQL 16<br/>Database<br/>Port 5432)]\n        end\n    end\n\n    subgraph \"External Services\"\n        AnthropicAPI[Anthropic API<br/>Claude Models]\n        MCPServers[MCP Servers<br/>stdio/sse/http]\n    end\n\n    %% Client connections\n    Browser -->|HTTP/HTTPS| Nginx\n\n    %% Nginx routing\n    Nginx -->|/api/*| Express\n    Nginx -->|/strapi/*| Strapi\n\n    %% Express to Strapi\n    StrapiClient -->|REST API| Strapi\n\n    %% Strapi to Database\n    Strapi -->|SQL Queries| Postgres\n\n    %% Claude SDK connections\n    ClaudeSDK -->|HTTPS Streaming| AnthropicAPI\n\n    %% MCP connections\n    MCPService -->|JSON-RPC| MCPServers\n\n    %% SSE streaming to client\n    SSE -.->|Server-Sent Events| Nginx\n    Nginx -.->|SSE| Browser\n\n    %% Styling\n    classDef frontend fill:#e1f5ff,stroke:#01579b,stroke-width:2px\n    classDef backend fill:#f3e5f5,stroke:#4a148c,stroke-width:2px\n    classDef data fill:#fff3e0,stroke:#e65100,stroke-width:2px\n    classDef external fill:#e8f5e9,stroke:#1b5e20,stroke-width:2px\n\n    class React,Nginx frontend\n    class Express,ClaudeSDK,MCPService,StrapiClient,SSE,Strapi backend\n    class Postgres data\n    class AnthropicAPI,MCPServers external\n```\n\n### Key Components\n\n- **React Frontend** - Modern SPA with Vite, Tailwind CSS, and Radix UI for component library\n- **Nginx** - Reverse proxy handling routing and SSE connections\n- **Express Server** - Business logic, SSE streaming, and service orchestration\n- **Strapi CMS** - Headless CMS providing REST API for data persistence\n- **PostgreSQL** - Primary database for all application data\n- **Claude SDK** - Integration with Anthropic's Claude API for agent execution\n- **MCP Servers** - External tool integration via Model Context Protocol\n\n### Architecture Documentation\n\nFor detailed architecture information, see:\n\n- **[Architecture Overview](./docs/architecture/README.md)** - Start here for a guided tour (15 min read)\n- **[System Overview](./docs/architecture/01-system-overview.md)** - Detailed component breakdown and interactions\n- **[Data Flow](./docs/architecture/02-data-flow.md)** - Agent execution, CRUD operations, MCP integration, and chat flows\n- **[Deployment](./docs/architecture/03-deployment.md)** - Docker containers, networks, volumes, and operational procedures\n- **[Components](./docs/architecture/04-components.md)** - Service layer, frontend hierarchy, and data model\n- **[Sequence Diagrams](./docs/architecture/05-sequences.md)** - Detailed flows for key operations\n- **[Technology Stack](./docs/architecture/06-tech-stack.md)** - Complete tech stack with version requirements and rationale\n\n## Prerequisites\n\n- Node.js >= 20.19.0\n- npm or yarn\n- Anthropic API key (for agent execution)\n- Claude CLI installed and configured (for project analysis)\n- Docker and Docker Compose (for PostgreSQL database)\n\n## Infrastructure Setup (PostgreSQL Migration)\n\nThis project is being migrated from SQLite to a production-ready PostgreSQL + Strapi + Express architecture. The infrastructure setup includes:\n\n### Quick Start with Docker\n\n1. **Generate secure secrets**:\n```bash\n./scripts/generate-secrets.sh\n```\n\n2. **Start PostgreSQL**:\n```bash\ndocker-compose up -d postgres\n```\n\n3. **Verify setup**:\n```bash\n# Check container status\ndocker-compose ps\n\n# Check health\ndocker inspect --format='{{.State.Health.Status}}' claude-postgres\n```\n\n### PostgreSQL Connection Details\n\n- **Host**: localhost\n- **Port**: 5432\n- **Database**: claude_agent_ui\n- **User**: postgres\n- **Password**: (generated in .env)\n\n### Docker Services\n\n- **PostgreSQL 16 (Alpine)**: Primary database container\n  - Persistent volume: `claude-postgres-data`\n  - Health checks configured\n  - Automated backups to `./database/backups/`\n\n### Environment Variables\n\nAll database credentials and secrets are managed through the `.env` file. Required variables:\n- `POSTGRES_DB` - Database name\n- `POSTGRES_USER` - Database user\n- `POSTGRES_PASSWORD` - Database password (generated)\n- `STRAPI_*` - Strapi secrets (for future tasks)\n\nSee `.env.example` for the complete list.\n\n### Migration Status\n\nThe project is currently undergoing a phased migration:\n\n\u2705 **Task 01: Infrastructure Setup** (Complete)\n- Docker Compose with PostgreSQL\n- Environment configuration\n- Secrets generation utility\n- Network and volume setup\n\n\ud83d\udd04 **Upcoming Tasks**:\n- Task 02: PostgreSQL Schema Creation\n- Task 03: Strapi CMS Initialization\n- Task 04: Content Types Creation\n- ... (see `.claude/Project/README.md` for full roadmap)\n\n### Troubleshooting Docker Setup\n\n**Container won't start:**\n```bash\n# View logs\ndocker-compose logs postgres\n\n# Restart container\ndocker-compose restart postgres\n```\n\n**Connection refused:**\n```bash\n# Verify PostgreSQL is healthy\ndocker-compose exec postgres pg_isready -U postgres\n\n# Test connection\ndocker-compose exec postgres psql -U postgres -d claude_agent_ui\n```\n\n**Reset database:**\n```bash\n# Stop and remove containers\ndocker-compose down\n\n# Remove volumes (CAUTION: deletes all data)\ndocker volume rm claude-postgres-data\n\n# Start fresh\ndocker-compose up -d postgres\n```\n\n## Installation\n\n1. Clone or download this repository:\n```bash\ncd C:\\Users\\Ali\\Documents\\Projects\\claude_agent_ui\n```\n\n2. Install dependencies:\n```bash\nnpm install\n```\n\n3. Configure environment variables:\n```bash\ncp .env.example .env\n```\n\nEdit `.env` and add your Anthropic API key:\n```env\nANTHROPIC_API_KEY=your_api_key_here\n```\n\n4. Set up your project structure:\n\nCreate the following directories in your working project:\n```\n.claude/\n\u251c\u2500\u2500 agents/      # Agent markdown files\n\u251c\u2500\u2500 skills/      # Skill directories with SKILL.md\n\u2514\u2500\u2500 commands/    # Slash command files\n```\n\n## Development\n\nStart the development server (frontend + backend):\n```bash\nnpm run dev\n```\n\nOr run them separately:\n```bash\n# Backend only\nnpm run dev:server\n\n# Frontend only (in another terminal)\nnpm run dev:frontend\n```\n\nThe application will be available at:\n- **Manager UI**: http://localhost:3001/manager\n- **API**: http://localhost:3001/api/manager\n- **Health Check**: http://localhost:3001/health\n\n## Production Build\n\n1. Build the application:\n```bash\nnpm run build\n```\n\n2. Start the production server:\n```bash\nnpm start\n```\n\n## Project Structure\n\n```\nclaude_agent_ui/\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 server.ts                    # Express server entry point\n\u2502   \u251c\u2500\u2500 routes/\n\u2502   \u2502   \u2514\u2500\u2500 manager.routes.ts        # Manager API routes\n\u2502   \u251c\u2500\u2500 services/\n\u2502   \u2502   \u251c\u2500\u2500 claude-structure-parser.ts  # Parse .claude directory\n\u2502   \u2502   \u251c\u2500\u2500 claude-sdk-service.ts       # Claude SDK integration\n\u2502   \u2502   \u251c\u2500\u2500 skill-service.ts            # Skill management\n\u2502   \u2502   \u251c\u2500\u2500 mcp-service.ts              # MCP server management\n\u2502   \u2502   \u251c\u2500\u2500 task-storage-service.ts     # Task persistence\n\u2502   \u2502   \u251c\u2500\u2500 file-system-service.ts      # File operations\n\u2502   \u2502   \u251c\u2500\u2500 logger.ts                   # Logging service\n\u2502   \u2502   \u2514\u2500\u2500 prompts/\n\u2502   \u2502       \u2514\u2500\u2500 agent-creator-prompt.ts # AI agent creator prompt\n\u2502   \u251c\u2500\u2500 types/\n\u2502   \u2502   \u251c\u2500\u2500 index.ts                 # Core type definitions\n\u2502   \u2502   \u251c\u2500\u2500 mcp-types.ts             # MCP-related types\n\u2502   \u2502   \u251c\u2500\u2500 task-types.ts            # Task types\n\u2502   \u2502   \u2514\u2500\u2500 sdk-types.ts             # SDK types\n\u2502   \u251c\u2500\u2500 utils/\n\u2502   \u2502   \u2514\u2500\u2500 env-substitution.ts      # Environment variable helpers\n\u2502   \u2514\u2500\u2500 web/\n\u2502       \u251c\u2500\u2500 index.html               # HTML entry point\n\u2502       \u251c\u2500\u2500 main.tsx                 # React entry point\n\u2502       \u2514\u2500\u2500 manager/                 # Manager UI components\n\u2502           \u251c\u2500\u2500 ManagerApp.tsx       # Main app component\n\u2502           \u251c\u2500\u2500 components/          # UI components\n\u2502           \u251c\u2500\u2500 hooks/               # React hooks\n\u2502           \u251c\u2500\u2500 services/            # Frontend API client\n\u2502           \u251c\u2500\u2500 types.ts             # Frontend types\n\u2502           \u2514\u2500\u2500 constants.ts         # Configuration constants\n\u251c\u2500\u2500 public/                          # Static assets\n\u251c\u2500\u2500 dist/                            # Build output\n\u251c\u2500\u2500 .mcp.json                        # MCP server configuration\n\u251c\u2500\u2500 package.json\n\u251c\u2500\u2500 tsconfig.json\n\u251c\u2500\u2500 vite.config.ts\n\u2514\u2500\u2500 tailwind.config.js\n```\n\n## API Endpoints\n\n### Validation\n- `POST /api/manager/validate` - Validate Claude setup\n\n### Agents\n- `GET /api/manager/agents` - List all agents\n- `GET /api/manager/agents/:id` - Get agent details\n- `POST /api/manager/agents` - Create agent\n- `PUT /api/manager/agents/:id` - Update agent\n- `POST /api/manager/agents/:id/execute` - Execute agent (SSE)\n- `POST /api/manager/agents/create-with-claude/message` - AI-guided agent creation\n\n### Skills\n- `GET /api/manager/skills` - List all skills\n- `GET /api/manager/skills/:id` - Get skill details\n- `POST /api/manager/skills` - Create skill\n- `PUT /api/manager/skills/:id` - Update skill\n- `GET /api/manager/skills-usage` - Get skill usage statistics\n\n### Commands\n- `GET /api/manager/commands` - List slash commands\n- `GET /api/manager/commands/:id` - Get command details\n\n### MCP Servers\n- `GET /api/manager/mcp-servers` - List MCP servers\n- `GET /api/manager/mcp-servers/:id` - Get server details\n- `POST /api/manager/mcp-servers` - Create server\n- `PUT /api/manager/mcp-servers/:id` - Update server\n- `DELETE /api/manager/mcp-servers/:id` - Delete server\n- `POST /api/manager/mcp-servers/:id/test` - Test server\n- `POST /api/manager/mcp-servers/:id/toggle` - Enable/disable server\n- `GET /api/manager/mcp-servers/:id/tools` - List server tools\n- `GET /api/manager/mcp-servers/export` - Export configuration\n- `POST /api/manager/mcp-servers/import` - Import configuration\n- `POST /api/manager/mcp-servers/bulk-delete` - Bulk delete servers\n\n### Project Analysis\n- `GET /api/manager/analyze` - Full project analysis\n- `GET /api/manager/tools` - List available tools\n- `GET /api/manager/history-path` - Get Claude history path\n\n## Configuration\n\n### Environment Variables\n\n| Variable | Description | Default |\n|----------|-------------|---------|\n| `NODE_ENV` | Environment mode | `development` |\n| `PORT` | Server port | `3001` |\n| `HOST` | Server host | `0.0.0.0` |\n| `LOG_LEVEL` | Logging verbosity | `info` |\n| `ANTHROPIC_API_KEY` | Claude API key | (required) |\n| `PROJECT_DIR` | Project directory | current directory |\n\n### MCP Configuration\n\nMCP servers are configured in `.mcp.json` at the project root:\n\n```json\n{\n  \"mcpServers\": {\n    \"filesystem\": {\n      \"command\": \"npx\",\n      \"args\": [\"-y\", \"@modelcontextprotocol/server-filesystem\", \"/path/to/allowed/dir\"],\n      \"disabled\": false\n    },\n    \"my-server\": {\n      \"command\": \"node\",\n      \"args\": [\"path/to/server.js\"],\n      \"env\": {\n        \"API_KEY\": \"your-key\"\n      }\n    }\n  }\n}\n```\n\n## Technology Stack\n\n- **Frontend**: React 18, React Router, Tailwind CSS, Radix UI\n- **Backend**: Express, Node.js\n- **AI/SDK**: Claude Agent SDK, Anthropic SDK, MCP SDK\n- **Build Tools**: Vite, TypeScript\n- **Utilities**: js-yaml, zod, uuid\n\n## Development Tips\n\n### Type Safety\nThe project uses TypeScript throughout. Run type checking with:\n```bash\nnpm run typecheck\n```\n\n### Hot Reload\nBoth frontend and backend support hot reload in development mode. Changes will automatically reload.\n\n### Logging\nAdjust log level in `.env`:\n- `silent` - No logs\n- `error` - Errors only\n- `warn` - Warnings and errors\n- `info` - Info, warnings, and errors (default)\n- `debug` - All logs including debug info\n\n### Custom MCP Servers\nTo add a custom MCP server:\n1. Go to the MCP Servers page in the UI\n2. Click \"Add Server\"\n3. Fill in server details (name, command, args)\n4. Test the connection\n5. Save and enable\n\n## Troubleshooting\n\n### Port Already in Use\nChange the port in `.env`:\n```env\nPORT=3002\n```\n\n### Agent Execution Fails\n1. Check your `ANTHROPIC_API_KEY` is valid\n2. Ensure `.mcp.json` is properly configured\n3. Check logs for detailed error messages\n\n### MCP Server Not Working\n1. Test the server using the \"Test\" button in the UI\n2. Check server logs in the console\n3. Verify the command and args are correct\n4. Ensure any required environment variables are set\n\n### Build Errors\n1. Clear build cache: `npm run clean`\n2. Reinstall dependencies: `rm -rf node_modules && npm install`\n3. Run type check: `npm run typecheck`\n\n## Contributing\n\nThis is a standalone project forked from the CUI project. Feel free to customize it for your needs.\n\n## License\n\nMIT\n\n## Credits\n\nBased on the [CUI project](https://github.com/bmpixel/cui) by Wenbo Pan.\n",
        "last_modified": "2026-01-02T15:11:22.001520"
      },
      "task_intent": {
        "title": "003-create-architecture-documentation-with-system-diag",
        "description": "Create comprehensive visual documentation showing how the hybrid architecture components (React + Express + Strapi + PostgreSQL + Claude SDK + MCP) interact, including data flow, service communication, and deployment topology.",
        "from_plan": true
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2026-01-02T10:53:08.836526",
  "last_updated": "2026-01-02T10:53:08.848806"
}
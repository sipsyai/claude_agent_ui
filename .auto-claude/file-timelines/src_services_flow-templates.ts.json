{
  "file_path": "src/services/flow-templates.ts",
  "main_branch_history": [],
  "task_views": {
    "007-uygulaman-n-genel-yap-s-n-d-zenleyece-iz-yani-uygu": {
      "task_id": "007-uygulaman-n-genel-yap-s-n-d-zenleyece-iz-yani-uygu",
      "branch_point": {
        "commit_hash": "9355e1f79162ecd7611ae3213457e87085b7fe4d",
        "content": "",
        "timestamp": "2026-01-02T15:21:46.864601"
      },
      "worktree_state": {
        "content": "/**\n * Flow Templates Service\n *\n * Pre-built flow templates for quick start when creating new flows.\n * These templates provide common workflow patterns that users can\n * customize for their specific use cases.\n */\n\nimport type {\n  Flow,\n  FlowNode,\n  FlowCategory,\n  FlowStatus,\n  InputNode,\n  AgentNode,\n  OutputNode,\n  FlowInputField,\n  FlowInputSchema,\n  FlowOutputSchema,\n} from '../types/flow-types';\n\n// =============================================================================\n// TEMPLATE TYPES\n// =============================================================================\n\n/**\n * Flow template definition (without id and timestamps)\n */\nexport interface FlowTemplate {\n  /** Unique template identifier */\n  templateId: string;\n\n  /** Template display name */\n  name: string;\n\n  /** Template description */\n  description: string;\n\n  /** Template category */\n  category: FlowCategory;\n\n  /** Emoji icon for display */\n  icon: string;\n\n  /** Tags for filtering */\n  tags: string[];\n\n  /** Default flow data to use when creating from template */\n  flowData: Omit<Flow, 'id' | 'createdAt' | 'updatedAt'>;\n}\n\n// =============================================================================\n// HELPER FUNCTIONS\n// =============================================================================\n\n/**\n * Generate a unique node ID\n */\nconst generateNodeId = (prefix: string): string =>\n  `${prefix}-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n\n/**\n * Create default input node\n */\nconst createInputNode = (fields: FlowInputField[]): InputNode => ({\n  nodeId: generateNodeId('input'),\n  type: 'input',\n  name: 'Input',\n  description: 'Flow input configuration',\n  position: { x: 0, y: 0 },\n  inputFields: fields,\n  validationRules: {},\n});\n\n/**\n * Create default agent node\n */\nconst createAgentNode = (\n  name: string,\n  promptTemplate: string,\n  skills: string[] = [],\n  timeout: number = 120000\n): AgentNode => ({\n  nodeId: generateNodeId('agent'),\n  type: 'agent',\n  name,\n  description: `${name} agent node`,\n  position: { x: 0, y: 100 },\n  agentId: '', // User needs to select an agent\n  promptTemplate,\n  skills,\n  modelOverride: 'default',\n  timeout,\n  retryOnError: true,\n  maxRetries: 3,\n});\n\n/**\n * Create default output node\n */\nconst createOutputNode = (\n  format: 'json' | 'markdown' | 'text' | 'html' | 'csv' = 'markdown',\n  outputType: 'response' | 'file' | 'webhook' = 'response'\n): OutputNode => ({\n  nodeId: generateNodeId('output'),\n  type: 'output',\n  name: 'Output',\n  description: 'Flow output configuration',\n  position: { x: 0, y: 200 },\n  outputType,\n  format,\n  saveToFile: false,\n  includeMetadata: true,\n  includeTimestamp: true,\n});\n\n/**\n * Link nodes together by setting nextNodeId\n */\nconst linkNodes = (nodes: FlowNode[]): FlowNode[] => {\n  return nodes.map((node, index) => ({\n    ...node,\n    nextNodeId: index < nodes.length - 1 ? nodes[index + 1].nodeId : null,\n  }));\n};\n\n/**\n * Generate input schema from input fields\n */\nconst generateInputSchema = (fields: FlowInputField[]): FlowInputSchema => ({\n  properties: fields.reduce((acc, field) => {\n    acc[field.name] = {\n      type: field.type === 'number' ? 'number' : 'string',\n      description: field.description,\n      default: field.defaultValue,\n    };\n    return acc;\n  }, {} as Record<string, { type: string; description?: string; default?: any }>),\n  required: fields.filter((f) => f.required).map((f) => f.name),\n});\n\n/**\n * Generate default output schema\n */\nconst generateOutputSchema = (description: string = 'Flow execution result'): FlowOutputSchema => ({\n  properties: {\n    result: { type: 'string', description },\n  },\n});\n\n// =============================================================================\n// FLOW TEMPLATES\n// =============================================================================\n\n/**\n * Web Scraper Template\n * Scrapes content from a given URL and returns structured data\n */\nconst webScraperTemplate: FlowTemplate = {\n  templateId: 'web-scraper',\n  name: 'Web Scraper',\n  description:\n    'Scrape content from websites and extract structured data. Perfect for gathering information from web pages.',\n  category: 'web-scraping',\n  icon: '\ud83c\udf10',\n  tags: ['web', 'scraping', 'extraction', 'content'],\n  flowData: (() => {\n    const inputFields: FlowInputField[] = [\n      {\n        name: 'url',\n        type: 'url',\n        label: 'Website URL',\n        required: true,\n        placeholder: 'https://example.com',\n        description: 'The URL of the website to scrape',\n      },\n      {\n        name: 'extractionInstructions',\n        type: 'textarea',\n        label: 'Extraction Instructions',\n        required: false,\n        placeholder: 'Extract the main article content, headings, and any relevant links...',\n        description: 'Specific instructions for what content to extract from the page',\n      },\n      {\n        name: 'outputFormat',\n        type: 'select',\n        label: 'Output Format',\n        required: false,\n        options: ['markdown', 'json', 'plain-text'],\n        defaultValue: 'markdown',\n        description: 'The format for the extracted content',\n      },\n    ];\n\n    const inputNode = createInputNode(inputFields);\n    const agentNode = createAgentNode(\n      'Web Scraper Agent',\n      `You are a web scraping assistant. Your task is to analyze and extract content from the following URL.\n\nURL: {{url}}\n\n{{#if extractionInstructions}}\nExtraction Instructions: {{extractionInstructions}}\n{{else}}\nPlease extract the main content, headings, key information, and any relevant links from the page.\n{{/if}}\n\nFormat the output as {{outputFormat}}.\n\nBe thorough and accurate in your extraction. Preserve the structure and hierarchy of the content where applicable.`,\n      [], // User will select appropriate skills (e.g., browser, fetch)\n      180000 // 3 minute timeout for web operations\n    );\n    const outputNode = createOutputNode('markdown', 'response');\n\n    const nodes = linkNodes([inputNode, agentNode, outputNode]);\n\n    return {\n      name: 'Web Scraper',\n      slug: 'web-scraper',\n      description: 'Scrape and extract content from websites',\n      nodes,\n      status: 'draft' as FlowStatus,\n      inputSchema: generateInputSchema(inputFields),\n      outputSchema: generateOutputSchema('Extracted web content'),\n      isActive: false,\n      version: '1.0.0',\n      category: 'web-scraping' as FlowCategory,\n      metadata: { templateId: 'web-scraper' },\n      webhookEnabled: false,\n    };\n  })(),\n};\n\n/**\n * Data Processor Template\n * Process and transform data using AI\n */\nconst dataProcessorTemplate: FlowTemplate = {\n  templateId: 'data-processor',\n  name: 'Data Processor',\n  description:\n    'Process, transform, and analyze data using AI. Great for data cleaning, summarization, and format conversion.',\n  category: 'data-processing',\n  icon: '\ud83d\udcca',\n  tags: ['data', 'processing', 'transform', 'analyze'],\n  flowData: (() => {\n    const inputFields: FlowInputField[] = [\n      {\n        name: 'inputData',\n        type: 'textarea',\n        label: 'Input Data',\n        required: true,\n        placeholder: 'Paste your data here (JSON, CSV, or plain text)...',\n        description: 'The data to process',\n      },\n      {\n        name: 'processingTask',\n        type: 'select',\n        label: 'Processing Task',\n        required: true,\n        options: [\n          'summarize',\n          'clean-and-format',\n          'extract-entities',\n          'convert-format',\n          'analyze-patterns',\n          'custom',\n        ],\n        defaultValue: 'summarize',\n        description: 'What to do with the data',\n      },\n      {\n        name: 'customInstructions',\n        type: 'textarea',\n        label: 'Custom Instructions',\n        required: false,\n        placeholder: 'Additional instructions for processing...',\n        description: 'Specific instructions for custom processing tasks',\n      },\n      {\n        name: 'outputFormat',\n        type: 'select',\n        label: 'Output Format',\n        required: false,\n        options: ['json', 'csv', 'markdown', 'plain-text'],\n        defaultValue: 'json',\n        description: 'Desired output format',\n      },\n    ];\n\n    const inputNode = createInputNode(inputFields);\n    const agentNode = createAgentNode(\n      'Data Processor Agent',\n      `You are a data processing assistant. Process the following data according to the specified task.\n\nPROCESSING TASK: {{processingTask}}\n\nINPUT DATA:\n{{inputData}}\n\n{{#if customInstructions}}\nADDITIONAL INSTRUCTIONS:\n{{customInstructions}}\n{{/if}}\n\nPlease process the data and format the output as {{outputFormat}}.\n\nGuidelines:\n- For 'summarize': Provide a concise summary of the key information\n- For 'clean-and-format': Clean up formatting, fix inconsistencies, remove duplicates\n- For 'extract-entities': Identify and extract named entities (people, places, dates, etc.)\n- For 'convert-format': Convert between data formats while preserving information\n- For 'analyze-patterns': Identify patterns, trends, and anomalies in the data\n- For 'custom': Follow the provided custom instructions\n\nEnsure your output is accurate and well-structured.`,\n      [],\n      120000\n    );\n    const outputNode = createOutputNode('json', 'response');\n\n    const nodes = linkNodes([inputNode, agentNode, outputNode]);\n\n    return {\n      name: 'Data Processor',\n      slug: 'data-processor',\n      description: 'Process and transform data using AI',\n      nodes,\n      status: 'draft' as FlowStatus,\n      inputSchema: generateInputSchema(inputFields),\n      outputSchema: generateOutputSchema('Processed data output'),\n      isActive: false,\n      version: '1.0.0',\n      category: 'data-processing' as FlowCategory,\n      metadata: { templateId: 'data-processor' },\n      webhookEnabled: false,\n    };\n  })(),\n};\n\n/**\n * API Integration Template\n * Connect to external APIs and process responses\n */\nconst apiIntegrationTemplate: FlowTemplate = {\n  templateId: 'api-integration',\n  name: 'API Integration',\n  description:\n    'Connect to external APIs, fetch data, and process responses. Ideal for integrating with third-party services.',\n  category: 'api-integration',\n  icon: '\ud83d\udd0c',\n  tags: ['api', 'integration', 'rest', 'fetch'],\n  flowData: (() => {\n    const inputFields: FlowInputField[] = [\n      {\n        name: 'apiEndpoint',\n        type: 'url',\n        label: 'API Endpoint',\n        required: true,\n        placeholder: 'https://api.example.com/data',\n        description: 'The API endpoint URL to call',\n      },\n      {\n        name: 'httpMethod',\n        type: 'select',\n        label: 'HTTP Method',\n        required: true,\n        options: ['GET', 'POST', 'PUT', 'PATCH', 'DELETE'],\n        defaultValue: 'GET',\n        description: 'The HTTP method to use',\n      },\n      {\n        name: 'requestBody',\n        type: 'textarea',\n        label: 'Request Body (JSON)',\n        required: false,\n        placeholder: '{\\n  \"key\": \"value\"\\n}',\n        description: 'JSON body for POST/PUT/PATCH requests',\n      },\n      {\n        name: 'headers',\n        type: 'textarea',\n        label: 'Headers (JSON)',\n        required: false,\n        placeholder: '{\\n  \"Authorization\": \"Bearer token\"\\n}',\n        description: 'Custom headers as JSON object',\n      },\n      {\n        name: 'processingInstructions',\n        type: 'textarea',\n        label: 'Response Processing Instructions',\n        required: false,\n        placeholder: 'Extract the user names and emails from the response...',\n        description: 'How to process and transform the API response',\n      },\n    ];\n\n    const inputNode = createInputNode(inputFields);\n    const agentNode = createAgentNode(\n      'API Integration Agent',\n      `You are an API integration assistant. Make an API call and process the response.\n\nAPI ENDPOINT: {{apiEndpoint}}\nHTTP METHOD: {{httpMethod}}\n\n{{#if requestBody}}\nREQUEST BODY:\n{{requestBody}}\n{{/if}}\n\n{{#if headers}}\nHEADERS:\n{{headers}}\n{{/if}}\n\nMake the API request and then process the response.\n\n{{#if processingInstructions}}\nPROCESSING INSTRUCTIONS:\n{{processingInstructions}}\n{{else}}\nSummarize the key information from the API response and format it in a readable way.\n{{/if}}\n\nHandle any errors gracefully and report them clearly.`,\n      [], // User will select appropriate skills (e.g., fetch, http-client)\n      60000\n    );\n    const outputNode = createOutputNode('json', 'response');\n\n    const nodes = linkNodes([inputNode, agentNode, outputNode]);\n\n    return {\n      name: 'API Integration',\n      slug: 'api-integration',\n      description: 'Connect to external APIs and process responses',\n      nodes,\n      status: 'draft' as FlowStatus,\n      inputSchema: generateInputSchema(inputFields),\n      outputSchema: generateOutputSchema('Processed API response'),\n      isActive: false,\n      version: '1.0.0',\n      category: 'api-integration' as FlowCategory,\n      metadata: { templateId: 'api-integration' },\n      webhookEnabled: false,\n    };\n  })(),\n};\n\n/**\n * Content Writer Template\n * Generate various types of content using AI\n */\nconst contentWriterTemplate: FlowTemplate = {\n  templateId: 'content-writer',\n  name: 'Content Writer',\n  description:\n    'Generate blog posts, articles, social media content, and more. Perfect for content creation workflows.',\n  category: 'automation',\n  icon: '\u270d\ufe0f',\n  tags: ['content', 'writing', 'blog', 'social-media'],\n  flowData: (() => {\n    const inputFields: FlowInputField[] = [\n      {\n        name: 'contentType',\n        type: 'select',\n        label: 'Content Type',\n        required: true,\n        options: ['blog-post', 'article', 'social-media', 'email', 'product-description', 'other'],\n        defaultValue: 'blog-post',\n        description: 'Type of content to generate',\n      },\n      {\n        name: 'topic',\n        type: 'text',\n        label: 'Topic',\n        required: true,\n        placeholder: 'The future of AI in healthcare',\n        description: 'Main topic or subject for the content',\n      },\n      {\n        name: 'keywords',\n        type: 'text',\n        label: 'Keywords',\n        required: false,\n        placeholder: 'AI, healthcare, machine learning, diagnosis',\n        description: 'Keywords to include (comma-separated)',\n      },\n      {\n        name: 'tone',\n        type: 'select',\n        label: 'Tone',\n        required: false,\n        options: ['professional', 'casual', 'friendly', 'formal', 'humorous', 'informative'],\n        defaultValue: 'professional',\n        description: 'Writing tone and style',\n      },\n      {\n        name: 'length',\n        type: 'select',\n        label: 'Content Length',\n        required: false,\n        options: ['short', 'medium', 'long'],\n        defaultValue: 'medium',\n        description: 'Approximate length of the content',\n      },\n      {\n        name: 'additionalInstructions',\n        type: 'textarea',\n        label: 'Additional Instructions',\n        required: false,\n        placeholder: 'Include a call-to-action at the end...',\n        description: 'Any specific requirements or guidelines',\n      },\n    ];\n\n    const inputNode = createInputNode(inputFields);\n    const agentNode = createAgentNode(\n      'Content Writer Agent',\n      `You are a professional content writer. Create high-quality content based on the following specifications:\n\nCONTENT TYPE: {{contentType}}\nTOPIC: {{topic}}\nTONE: {{tone}}\nLENGTH: {{length}}\n\n{{#if keywords}}\nKEYWORDS TO INCLUDE: {{keywords}}\n{{/if}}\n\n{{#if additionalInstructions}}\nADDITIONAL INSTRUCTIONS:\n{{additionalInstructions}}\n{{/if}}\n\nGuidelines:\n- Write engaging, original content that matches the specified tone\n- For blog posts: Include an introduction, main points with subheadings, and a conclusion\n- For social media: Keep it concise and engaging with appropriate hashtags\n- For emails: Include a compelling subject line and clear call-to-action\n- Naturally incorporate the provided keywords\n- Adjust length based on the specification:\n  - Short: 200-400 words\n  - Medium: 500-800 words\n  - Long: 1000+ words\n\nDeliver polished, publication-ready content.`,\n      [],\n      180000\n    );\n    const outputNode = createOutputNode('markdown', 'response');\n\n    const nodes = linkNodes([inputNode, agentNode, outputNode]);\n\n    return {\n      name: 'Content Writer',\n      slug: 'content-writer',\n      description: 'Generate blog posts, articles, and other content',\n      nodes,\n      status: 'draft' as FlowStatus,\n      inputSchema: generateInputSchema(inputFields),\n      outputSchema: generateOutputSchema('Generated content'),\n      isActive: false,\n      version: '1.0.0',\n      category: 'automation' as FlowCategory,\n      metadata: { templateId: 'content-writer' },\n      webhookEnabled: false,\n    };\n  })(),\n};\n\n/**\n * Document Analyzer Template\n * Analyze documents and extract key information\n */\nconst documentAnalyzerTemplate: FlowTemplate = {\n  templateId: 'document-analyzer',\n  name: 'Document Analyzer',\n  description:\n    'Analyze documents, extract key information, summarize content, and answer questions about the document.',\n  category: 'data-processing',\n  icon: '\ud83d\udcc4',\n  tags: ['document', 'analysis', 'extraction', 'summary'],\n  flowData: (() => {\n    const inputFields: FlowInputField[] = [\n      {\n        name: 'documentContent',\n        type: 'textarea',\n        label: 'Document Content',\n        required: true,\n        placeholder: 'Paste the document content here...',\n        description: 'The document text to analyze',\n      },\n      {\n        name: 'analysisType',\n        type: 'select',\n        label: 'Analysis Type',\n        required: true,\n        options: ['summary', 'key-points', 'entities', 'sentiment', 'questions', 'full-analysis'],\n        defaultValue: 'summary',\n        description: 'Type of analysis to perform',\n      },\n      {\n        name: 'questions',\n        type: 'textarea',\n        label: 'Questions (optional)',\n        required: false,\n        placeholder: 'What is the main argument?\\nWho are the key stakeholders?',\n        description: 'Specific questions to answer about the document (one per line)',\n      },\n      {\n        name: 'focusAreas',\n        type: 'text',\n        label: 'Focus Areas',\n        required: false,\n        placeholder: 'financial data, recommendations, risks',\n        description: 'Specific areas to focus on (comma-separated)',\n      },\n    ];\n\n    const inputNode = createInputNode(inputFields);\n    const agentNode = createAgentNode(\n      'Document Analyzer Agent',\n      `You are a document analysis expert. Analyze the following document and provide insights.\n\nDOCUMENT:\n{{documentContent}}\n\nANALYSIS TYPE: {{analysisType}}\n\n{{#if focusAreas}}\nFOCUS AREAS: {{focusAreas}}\n{{/if}}\n\n{{#if questions}}\nSPECIFIC QUESTIONS TO ANSWER:\n{{questions}}\n{{/if}}\n\nBased on the analysis type, provide:\n- Summary: A concise summary of the document (2-3 paragraphs)\n- Key Points: Bullet points of the most important information\n- Entities: List of people, organizations, dates, and locations mentioned\n- Sentiment: Overall tone and sentiment analysis\n- Questions: Direct answers to the provided questions\n- Full Analysis: Comprehensive analysis including all of the above\n\nBe accurate, thorough, and cite specific parts of the document when relevant.`,\n      [],\n      120000\n    );\n    const outputNode = createOutputNode('markdown', 'response');\n\n    const nodes = linkNodes([inputNode, agentNode, outputNode]);\n\n    return {\n      name: 'Document Analyzer',\n      slug: 'document-analyzer',\n      description: 'Analyze documents and extract key information',\n      nodes,\n      status: 'draft' as FlowStatus,\n      inputSchema: generateInputSchema(inputFields),\n      outputSchema: generateOutputSchema('Document analysis results'),\n      isActive: false,\n      version: '1.0.0',\n      category: 'data-processing' as FlowCategory,\n      metadata: { templateId: 'document-analyzer' },\n      webhookEnabled: false,\n    };\n  })(),\n};\n\n/**\n * Code Assistant Template\n * Help with coding tasks, reviews, and explanations\n */\nconst codeAssistantTemplate: FlowTemplate = {\n  templateId: 'code-assistant',\n  name: 'Code Assistant',\n  description:\n    'Get help with coding tasks - write, review, explain, or debug code in any programming language.',\n  category: 'automation',\n  icon: '\ud83d\udcbb',\n  tags: ['code', 'programming', 'development', 'debug'],\n  flowData: (() => {\n    const inputFields: FlowInputField[] = [\n      {\n        name: 'task',\n        type: 'select',\n        label: 'Task Type',\n        required: true,\n        options: ['write-code', 'review-code', 'explain-code', 'debug-code', 'refactor-code', 'convert-code'],\n        defaultValue: 'write-code',\n        description: 'What coding task to perform',\n      },\n      {\n        name: 'language',\n        type: 'select',\n        label: 'Programming Language',\n        required: true,\n        options: [\n          'javascript',\n          'typescript',\n          'python',\n          'java',\n          'csharp',\n          'go',\n          'rust',\n          'php',\n          'ruby',\n          'swift',\n          'kotlin',\n          'other',\n        ],\n        defaultValue: 'typescript',\n        description: 'Programming language to use',\n      },\n      {\n        name: 'codeInput',\n        type: 'textarea',\n        label: 'Code / Description',\n        required: true,\n        placeholder:\n          'For write-code: Describe what you need\\nFor other tasks: Paste your code here...',\n        description: 'Code to analyze or description of what to write',\n      },\n      {\n        name: 'targetLanguage',\n        type: 'text',\n        label: 'Target Language (for conversion)',\n        required: false,\n        placeholder: 'python',\n        description: 'Target language when converting code',\n      },\n      {\n        name: 'additionalContext',\n        type: 'textarea',\n        label: 'Additional Context',\n        required: false,\n        placeholder: 'Any additional context, requirements, or constraints...',\n        description: 'Extra information to help with the task',\n      },\n    ];\n\n    const inputNode = createInputNode(inputFields);\n    const agentNode = createAgentNode(\n      'Code Assistant Agent',\n      `You are an expert software developer. Help with the following coding task.\n\nTASK: {{task}}\nLANGUAGE: {{language}}\n\nCODE/DESCRIPTION:\n\\`\\`\\`\n{{codeInput}}\n\\`\\`\\`\n\n{{#if targetLanguage}}\nTARGET LANGUAGE: {{targetLanguage}}\n{{/if}}\n\n{{#if additionalContext}}\nADDITIONAL CONTEXT:\n{{additionalContext}}\n{{/if}}\n\nBased on the task type:\n- write-code: Write clean, well-documented code that follows best practices\n- review-code: Provide a thorough code review with suggestions for improvement\n- explain-code: Explain what the code does step by step\n- debug-code: Identify bugs and provide fixes\n- refactor-code: Refactor for better readability, performance, or maintainability\n- convert-code: Convert to the target language while preserving functionality\n\nAlways include:\n1. Clear comments explaining the code\n2. Error handling where appropriate\n3. Best practices for the language\n4. Any relevant warnings or considerations`,\n      [],\n      180000\n    );\n    const outputNode = createOutputNode('markdown', 'response');\n\n    const nodes = linkNodes([inputNode, agentNode, outputNode]);\n\n    return {\n      name: 'Code Assistant',\n      slug: 'code-assistant',\n      description: 'Help with coding tasks - write, review, explain, or debug code',\n      nodes,\n      status: 'draft' as FlowStatus,\n      inputSchema: generateInputSchema(inputFields),\n      outputSchema: generateOutputSchema('Code assistance result'),\n      isActive: false,\n      version: '1.0.0',\n      category: 'automation' as FlowCategory,\n      metadata: { templateId: 'code-assistant' },\n      webhookEnabled: false,\n    };\n  })(),\n};\n\n/**\n * Email Responder Template\n * Draft professional email responses\n */\nconst emailResponderTemplate: FlowTemplate = {\n  templateId: 'email-responder',\n  name: 'Email Responder',\n  description:\n    'Draft professional email responses with the right tone and content. Perfect for customer support and business communication.',\n  category: 'automation',\n  icon: '\ud83d\udce7',\n  tags: ['email', 'response', 'communication', 'support'],\n  flowData: (() => {\n    const inputFields: FlowInputField[] = [\n      {\n        name: 'originalEmail',\n        type: 'textarea',\n        label: 'Original Email',\n        required: true,\n        placeholder: 'Paste the email you want to respond to...',\n        description: 'The email that needs a response',\n      },\n      {\n        name: 'responseIntent',\n        type: 'select',\n        label: 'Response Intent',\n        required: true,\n        options: [\n          'acknowledge',\n          'provide-info',\n          'resolve-issue',\n          'follow-up',\n          'decline-politely',\n          'escalate',\n          'custom',\n        ],\n        defaultValue: 'provide-info',\n        description: 'The purpose of your response',\n      },\n      {\n        name: 'tone',\n        type: 'select',\n        label: 'Tone',\n        required: false,\n        options: ['formal', 'friendly', 'professional', 'empathetic', 'apologetic'],\n        defaultValue: 'professional',\n        description: 'Tone for the response',\n      },\n      {\n        name: 'keyPoints',\n        type: 'textarea',\n        label: 'Key Points to Include',\n        required: false,\n        placeholder: '- Confirm the order was shipped\\n- Provide tracking number\\n- Offer assistance...',\n        description: 'Main points you want to address in the response',\n      },\n      {\n        name: 'signature',\n        type: 'text',\n        label: 'Signature Name',\n        required: false,\n        placeholder: 'John Smith',\n        description: 'Name for the email signature',\n      },\n    ];\n\n    const inputNode = createInputNode(inputFields);\n    const agentNode = createAgentNode(\n      'Email Responder Agent',\n      `You are a professional email communication expert. Draft a response to the following email.\n\nORIGINAL EMAIL:\n{{originalEmail}}\n\nRESPONSE INTENT: {{responseIntent}}\nTONE: {{tone}}\n\n{{#if keyPoints}}\nKEY POINTS TO ADDRESS:\n{{keyPoints}}\n{{/if}}\n\n{{#if signature}}\nSIGN OFF AS: {{signature}}\n{{/if}}\n\nGuidelines:\n- Start with an appropriate greeting\n- Address all points from the original email\n- Be clear, concise, and professional\n- Include a proper sign-off\n- Match the specified tone throughout\n- For 'decline-politely': Be respectful and offer alternatives if possible\n- For 'resolve-issue': Show empathy and provide a clear resolution\n- For 'escalate': Explain the escalation and set expectations\n\nProvide a complete, ready-to-send email response.`,\n      [],\n      60000\n    );\n    const outputNode = createOutputNode('text', 'response');\n\n    const nodes = linkNodes([inputNode, agentNode, outputNode]);\n\n    return {\n      name: 'Email Responder',\n      slug: 'email-responder',\n      description: 'Draft professional email responses',\n      nodes,\n      status: 'draft' as FlowStatus,\n      inputSchema: generateInputSchema(inputFields),\n      outputSchema: generateOutputSchema('Email response draft'),\n      isActive: false,\n      version: '1.0.0',\n      category: 'automation' as FlowCategory,\n      metadata: { templateId: 'email-responder' },\n      webhookEnabled: false,\n    };\n  })(),\n};\n\n/**\n * File Processor Template\n * Process and manipulate files\n */\nconst fileProcessorTemplate: FlowTemplate = {\n  templateId: 'file-processor',\n  name: 'File Processor',\n  description:\n    'Process files - convert formats, extract data, merge documents, or generate reports from file content.',\n  category: 'file-manipulation',\n  icon: '\ud83d\udcc1',\n  tags: ['file', 'processing', 'conversion', 'extract'],\n  flowData: (() => {\n    const inputFields: FlowInputField[] = [\n      {\n        name: 'fileContent',\n        type: 'textarea',\n        label: 'File Content',\n        required: true,\n        placeholder: 'Paste the file content here...',\n        description: 'Content of the file to process',\n      },\n      {\n        name: 'sourceFormat',\n        type: 'select',\n        label: 'Source Format',\n        required: true,\n        options: ['json', 'csv', 'xml', 'yaml', 'markdown', 'plain-text', 'html'],\n        defaultValue: 'json',\n        description: 'Format of the input file',\n      },\n      {\n        name: 'operation',\n        type: 'select',\n        label: 'Operation',\n        required: true,\n        options: ['convert', 'extract', 'summarize', 'validate', 'transform', 'merge'],\n        defaultValue: 'convert',\n        description: 'What operation to perform',\n      },\n      {\n        name: 'targetFormat',\n        type: 'select',\n        label: 'Target Format',\n        required: false,\n        options: ['json', 'csv', 'xml', 'yaml', 'markdown', 'plain-text', 'html'],\n        defaultValue: 'csv',\n        description: 'Desired output format (for conversion)',\n      },\n      {\n        name: 'transformRules',\n        type: 'textarea',\n        label: 'Transformation Rules',\n        required: false,\n        placeholder: 'e.g., Extract only email fields, rename \"firstName\" to \"first_name\"...',\n        description: 'Specific rules for transformation',\n      },\n    ];\n\n    const inputNode = createInputNode(inputFields);\n    const agentNode = createAgentNode(\n      'File Processor Agent',\n      `You are a file processing expert. Process the following file content.\n\nSOURCE FORMAT: {{sourceFormat}}\nOPERATION: {{operation}}\n\nFILE CONTENT:\n{{fileContent}}\n\n{{#if targetFormat}}\nTARGET FORMAT: {{targetFormat}}\n{{/if}}\n\n{{#if transformRules}}\nTRANSFORMATION RULES:\n{{transformRules}}\n{{/if}}\n\nBased on the operation:\n- convert: Convert to the target format while preserving all data\n- extract: Extract specific data based on the transformation rules\n- summarize: Provide a summary of the file contents\n- validate: Check for errors and inconsistencies\n- transform: Apply the specified transformation rules\n- merge: Combine with any additional provided data\n\nEnsure the output is valid and properly formatted.`,\n      [], // User will select appropriate skills (e.g., filesystem)\n      120000\n    );\n    const outputNode = createOutputNode('text', 'response');\n\n    const nodes = linkNodes([inputNode, agentNode, outputNode]);\n\n    return {\n      name: 'File Processor',\n      slug: 'file-processor',\n      description: 'Process and manipulate file content',\n      nodes,\n      status: 'draft' as FlowStatus,\n      inputSchema: generateInputSchema(inputFields),\n      outputSchema: generateOutputSchema('Processed file content'),\n      isActive: false,\n      version: '1.0.0',\n      category: 'file-manipulation' as FlowCategory,\n      metadata: { templateId: 'file-processor' },\n      webhookEnabled: false,\n    };\n  })(),\n};\n\n// =============================================================================\n// TEMPLATE REGISTRY\n// =============================================================================\n\n/**\n * All available flow templates\n */\nexport const flowTemplates: FlowTemplate[] = [\n  webScraperTemplate,\n  dataProcessorTemplate,\n  apiIntegrationTemplate,\n  contentWriterTemplate,\n  documentAnalyzerTemplate,\n  codeAssistantTemplate,\n  emailResponderTemplate,\n  fileProcessorTemplate,\n];\n\n/**\n * Get all templates\n */\nexport function getAllTemplates(): FlowTemplate[] {\n  return flowTemplates;\n}\n\n/**\n * Get template by ID\n */\nexport function getTemplateById(templateId: string): FlowTemplate | undefined {\n  return flowTemplates.find((t) => t.templateId === templateId);\n}\n\n/**\n * Get templates by category\n */\nexport function getTemplatesByCategory(category: FlowCategory): FlowTemplate[] {\n  return flowTemplates.filter((t) => t.category === category);\n}\n\n/**\n * Search templates by name, description, or tags\n */\nexport function searchTemplates(query: string): FlowTemplate[] {\n  const lowerQuery = query.toLowerCase();\n  return flowTemplates.filter(\n    (t) =>\n      t.name.toLowerCase().includes(lowerQuery) ||\n      t.description.toLowerCase().includes(lowerQuery) ||\n      t.tags.some((tag) => tag.toLowerCase().includes(lowerQuery))\n  );\n}\n\n/**\n * Create a new flow from a template\n * Returns flow data ready to be saved (regenerates node IDs for uniqueness)\n */\nexport function createFlowFromTemplate(\n  templateId: string\n): Omit<Flow, 'id' | 'createdAt' | 'updatedAt'> | null {\n  const template = getTemplateById(templateId);\n  if (!template) return null;\n\n  // Deep clone the flow data\n  const flowData = JSON.parse(JSON.stringify(template.flowData));\n\n  // Regenerate node IDs for uniqueness\n  const idMap = new Map<string, string>();\n  flowData.nodes = flowData.nodes.map((node: FlowNode) => {\n    const newId = generateNodeId(node.type);\n    idMap.set(node.nodeId, newId);\n    return { ...node, nodeId: newId };\n  });\n\n  // Update nextNodeId references\n  flowData.nodes = flowData.nodes.map((node: FlowNode) => {\n    if (node.nextNodeId && idMap.has(node.nextNodeId)) {\n      return { ...node, nextNodeId: idMap.get(node.nextNodeId) };\n    }\n    return node;\n  });\n\n  // Generate a unique slug\n  flowData.slug = `${flowData.slug}-${Date.now()}`;\n\n  return flowData;\n}\n\nexport default {\n  getAllTemplates,\n  getTemplateById,\n  getTemplatesByCategory,\n  searchTemplates,\n  createFlowFromTemplate,\n};\n",
        "last_modified": "2026-01-02T17:55:06.520593"
      },
      "task_intent": {
        "title": "007-uygulaman-n-genel-yap-s-n-d-zenleyece-iz-yani-uygu",
        "description": "Implement a workflow/flow system for organizing agents and skills into reusable, schedulable processes with input/output handling. This transforms the application from a simple agent manager to a process automation tool where users can define workflows like 'Web Scraper' that take input, run agents with skills, and produce structured outputs.",
        "from_plan": true
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2026-01-02T15:21:47.241727",
  "last_updated": "2026-01-02T15:21:47.251968"
}
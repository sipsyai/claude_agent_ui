{
  "file_path": "src/web/manager/components/TasksPage.tsx",
  "main_branch_history": [],
  "task_views": {
    "004-document-frontend-react-components-and-hooks": {
      "task_id": "004-document-frontend-react-components-and-hooks",
      "branch_point": {
        "commit_hash": "34a3f60da53773d90bd6579cb1cfd8417a1dd0b9",
        "content": "import React, { useState, useEffect, useMemo } from 'react';\nimport * as api from '../services/api';\nimport { Button } from './ui/Button';\nimport { PlayCircleIcon, XCircleIcon, ClockIcon, CopyIcon } from './ui/Icons';\nimport TaskExecutionModal from './TaskExecutionModal';\n\nconst TasksPage: React.FC = () => {\n  const [allTasks, setAllTasks] = useState<api.Task[]>([]);\n  const [filter, setFilter] = useState<api.TaskStatus | 'all'>('all');\n  const [loading, setLoading] = useState(true);\n  const [showCreateModal, setShowCreateModal] = useState(false);\n  const [selectedTask, setSelectedTask] = useState<api.Task | null>(null);\n  const [executingTask, setExecutingTask] = useState<api.Task | null>(null);\n\n  useEffect(() => {\n    loadTasks();\n  }, []);\n\n  const loadTasks = async () => {\n    try {\n      setLoading(true);\n      // Always fetch all tasks and filter on frontend\n      const data = await api.getTasks({});\n      setAllTasks(data);\n    } catch (error) {\n      console.error('Failed to load tasks:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Calculate stats from tasks\n  const stats = useMemo(() => {\n    return {\n      total: allTasks.length,\n      pending: allTasks.filter(t => t.status === 'pending').length,\n      running: allTasks.filter(t => t.status === 'running').length,\n      completed: allTasks.filter(t => t.status === 'completed').length,\n      failed: allTasks.filter(t => t.status === 'failed').length,\n    };\n  }, [allTasks]);\n\n  // Filter tasks based on selected filter\n  const tasks = useMemo(() => {\n    if (filter === 'all') return allTasks;\n    return allTasks.filter(t => t.status === filter);\n  }, [allTasks, filter]);\n\n  const handleDeleteTask = async (taskId: string) => {\n    if (!confirm('Are you sure you want to delete this task?')) return;\n    try {\n      await api.deleteTask(taskId);\n      loadTasks();\n    } catch (error) {\n      alert('Failed to delete task');\n    }\n  };\n\n  const handleCloneTask = async (task: api.Task) => {\n    try {\n      await api.createTask({\n        name: task.name,\n        description: task.description,\n        agentId: task.agentId,\n        taskType: task.taskType,\n        userPrompt: task.userPrompt,\n        inputValues: task.inputValues,\n        permissionMode: task.permissionMode,\n        directory: task.directory,\n      });\n      loadTasks();\n    } catch (error) {\n      alert('Failed to clone task');\n    }\n  };\n\n  const handleExecuteTask = (task: api.Task) => {\n    setExecutingTask(task);\n  };\n\n  const getStatusColor = (status: api.TaskStatus) => {\n    switch (status) {\n      case 'pending': return 'text-yellow-600 bg-yellow-100';\n      case 'running': return 'text-blue-600 bg-blue-100';\n      case 'completed': return 'text-green-600 bg-green-100';\n      case 'failed': return 'text-red-600 bg-red-100';\n    }\n  };\n\n  const getStatusIcon = (status: api.TaskStatus) => {\n    switch (status) {\n      case 'pending': return '\ud83d\udfe1';\n      case 'running': return '\ud83d\udd35';\n      case 'completed': return '\ud83d\udfe2';\n      case 'failed': return '\ud83d\udd34';\n    }\n  };\n\n  const formatTimeAgo = (timestamp: string) => {\n    const diff = Date.now() - new Date(timestamp).getTime();\n    const minutes = Math.floor(diff / 60000);\n    const hours = Math.floor(diff / 3600000);\n    const days = Math.floor(diff / 86400000);\n\n    if (minutes < 1) return 'just now';\n    if (minutes < 60) return `${minutes}m ago`;\n    if (hours < 24) return `${hours}h ago`;\n    return `${days}d ago`;\n  };\n\n  return (\n    <div className=\"animate-fade-in\">\n      <div className=\"flex justify-between items-center mb-6\">\n        <div>\n          <h1 className=\"text-3xl font-bold\">Tasks</h1>\n          <p className=\"text-muted-foreground\">Manage and execute agent tasks</p>\n        </div>\n        <Button onClick={() => setShowCreateModal(true)}>+ Create Task</Button>\n      </div>\n\n      {/* Stats */}\n      {stats && (\n        <div className=\"grid grid-cols-5 gap-4 mb-6\">\n          <div className=\"bg-card border border-border rounded-lg p-4\">\n            <div className=\"text-2xl font-bold\">{stats.total}</div>\n            <div className=\"text-sm text-muted-foreground\">Total</div>\n          </div>\n          <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-4\">\n            <div className=\"text-2xl font-bold text-yellow-700\">{stats.pending}</div>\n            <div className=\"text-sm text-yellow-600\">Pending</div>\n          </div>\n          <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n            <div className=\"text-2xl font-bold text-blue-700\">{stats.running}</div>\n            <div className=\"text-sm text-blue-600\">Running</div>\n          </div>\n          <div className=\"bg-green-50 border border-green-200 rounded-lg p-4\">\n            <div className=\"text-2xl font-bold text-green-700\">{stats.completed}</div>\n            <div className=\"text-sm text-green-600\">Completed</div>\n          </div>\n          <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n            <div className=\"text-2xl font-bold text-red-700\">{stats.failed}</div>\n            <div className=\"text-sm text-red-600\">Failed</div>\n          </div>\n        </div>\n      )}\n\n      {/* Filters */}\n      <div className=\"flex gap-2 mb-4\">\n        {['all', 'pending', 'running', 'completed', 'failed'].map((f) => (\n          <button\n            key={f}\n            onClick={() => setFilter(f as any)}\n            className={`px-4 py-2 rounded-lg font-medium transition ${\n              filter === f\n                ? 'bg-primary text-white'\n                : 'bg-card border border-border hover:bg-accent'\n            }`}\n          >\n            {f.charAt(0).toUpperCase() + f.slice(1)}\n          </button>\n        ))}\n      </div>\n\n      {/* Task List */}\n      {loading ? (\n        <div className=\"text-center py-8 text-muted-foreground\">Loading tasks...</div>\n      ) : tasks.length === 0 ? (\n        <div className=\"text-center py-8 text-muted-foreground\">\n          No tasks found. Create your first task!\n        </div>\n      ) : (\n        <div className=\"space-y-3\">\n          {tasks.map((task) => (\n            <div key={task.id} className=\"bg-card border border-border rounded-lg p-4\">\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center gap-2 mb-1\">\n                    <span className=\"text-xl\">{getStatusIcon(task.status)}</span>\n                    <h3 className=\"text-lg font-semibold\">{task.name}</h3>\n                    <span className={`px-2 py-1 rounded text-xs font-medium ${getStatusColor(task.status)}`}>\n                      {task.status}\n                    </span>\n                  </div>\n                  <div className=\"text-sm text-muted-foreground mb-2\">\n                    {task.agentName} \u2022 {formatTimeAgo(task.createdAt)}\n                  </div>\n                  {task.description && (\n                    <p className=\"text-sm text-muted-foreground mb-2\">{task.description}</p>\n                  )}\n                  {task.duration && (\n                    <div className=\"flex items-center gap-1 text-xs text-muted-foreground\">\n                      <ClockIcon className=\"h-3 w-3\" />\n                      {(task.duration / 1000).toFixed(1)}s\n                    </div>\n                  )}\n                </div>\n                <div className=\"flex gap-2\">\n                  <Button\n                    size=\"sm\"\n                    variant=\"secondary\"\n                    onClick={() => setSelectedTask(task)}\n                  >\n                    View\n                  </Button>\n                  <Button\n                    size=\"sm\"\n                    variant=\"secondary\"\n                    onClick={() => handleCloneTask(task)}\n                    title=\"Clone task\"\n                  >\n                    <CopyIcon className=\"h-4 w-4\" />\n                  </Button>\n                  {(task.status === 'pending' || task.status === 'failed') && (\n                    <Button\n                      size=\"sm\"\n                      onClick={() => handleExecuteTask(task)}\n                    >\n                      <PlayCircleIcon className=\"h-4 w-4\" />\n                    </Button>\n                  )}\n                  <Button\n                    size=\"sm\"\n                    variant=\"secondary\"\n                    onClick={() => handleDeleteTask(task.id)}\n                  >\n                    <XCircleIcon className=\"h-4 w-4\" />\n                  </Button>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* Modals */}\n      {showCreateModal && (\n        <CreateTaskModal\n          onClose={() => setShowCreateModal(false)}\n          onSuccess={() => {\n            setShowCreateModal(false);\n            loadTasks();\n          }}\n        />\n      )}\n      {selectedTask && (\n        <TaskDetailModal\n          task={selectedTask}\n          onClose={() => setSelectedTask(null)}\n        />\n      )}\n      {executingTask && (\n        <TaskExecutionModal\n          task={executingTask}\n          onClose={() => {\n            setExecutingTask(null);\n            loadTasks();\n          }}\n          onComplete={() => {\n            // Don't close modal automatically - let user see results\n            // Just reload tasks to update the list\n            loadTasks();\n          }}\n        />\n      )}\n    </div>\n  );\n};\n\n// Create Task Modal\nconst CreateTaskModal: React.FC<{ onClose: () => void; onSuccess: () => void }> = ({ onClose, onSuccess }) => {\n  const [taskType, setTaskType] = React.useState<'agent' | 'skill'>('agent');\n  const [agents, setAgents] = React.useState<api.Agent[]>([]);\n  const [skills, setSkills] = React.useState<api.Skill[]>([]);\n  const [selectedAgentId, setSelectedAgentId] = React.useState<string>('');\n  const [selectedSkillId, setSelectedSkillId] = React.useState<string>('');\n  const [taskName, setTaskName] = React.useState('');\n  const [taskDescription, setTaskDescription] = React.useState('');\n  const [inputValues, setInputValues] = React.useState<Record<string, any>>({});\n  const [permissionMode, setPermissionMode] = React.useState<'default' | 'acceptEdits' | 'bypass' | 'plan'>('bypass');\n  const [creating, setCreating] = React.useState(false);\n\n  const selectedAgent = agents.find(a => a.id === selectedAgentId);\n  const selectedSkill = skills.find(s => s.id === selectedSkillId);\n  const selectedEntity = taskType === 'agent' ? selectedAgent : selectedSkill;\n  const hasInputFields = taskType === 'skill' && selectedSkill && selectedSkill.inputFields && selectedSkill.inputFields.length > 0;\n\n  React.useEffect(() => {\n    // Load agents and skills\n    const dir = localStorage.getItem('cui-manager-directory') || undefined;\n\n    api.getAgents(dir).then(data => {\n      setAgents(data);\n      if (data.length > 0 && taskType === 'agent') setSelectedAgentId(data[0].id);\n    }).catch(console.error);\n\n    api.getSkills(dir).then(data => {\n      setSkills(data);\n      if (data.length > 0 && taskType === 'skill') setSelectedSkillId(data[0].id);\n    }).catch(console.error);\n  }, []);\n\n  // Update selected ID when task type changes\n  React.useEffect(() => {\n    if (taskType === 'agent' && agents.length > 0 && !selectedAgentId) {\n      setSelectedAgentId(agents[0].id);\n    } else if (taskType === 'skill' && skills.length > 0 && !selectedSkillId) {\n      setSelectedSkillId(skills[0].id);\n    }\n    setInputValues({});\n  }, [taskType, agents, skills]);\n\n  const handleCreate = async () => {\n    const entityId = taskType === 'agent' ? selectedAgentId : selectedSkillId;\n\n    if (!taskName.trim() || !entityId) {\n      alert('Please fill in required fields');\n      return;\n    }\n\n    // Build prompt from input values if fields exist\n    let userPrompt = '';\n    if (hasInputFields) {\n      const requiredFields = selectedSkill!.inputFields!.filter((f: any) => f.required);\n      const missingFields = requiredFields.filter((f: any) => !inputValues[f.name]);\n\n      if (missingFields.length > 0) {\n        alert(`Please fill in required fields: ${missingFields.map((f: any) => f.label).join(', ')}`);\n        return;\n      }\n\n      const inputParts = selectedSkill!.inputFields!.map((field: any) => {\n        const value = inputValues[field.name];\n        if (value !== undefined && value !== '') {\n          return `${field.label}: ${value}`;\n        }\n        return null;\n      }).filter(Boolean);\n\n      userPrompt = inputParts.join('\\n');\n    } else {\n      userPrompt = inputValues['prompt'] || '';\n    }\n\n    if (!userPrompt.trim()) {\n      alert('Please provide a prompt or fill in the input fields');\n      return;\n    }\n\n    setCreating(true);\n    try {\n      const dir = localStorage.getItem('cui-manager-directory') || undefined;\n      await api.createTask({\n        name: taskName,\n        description: taskDescription || undefined,\n        agentId: entityId,\n        taskType: taskType,\n        userPrompt,\n        inputValues: hasInputFields ? inputValues : undefined,\n        permissionMode,\n        directory: dir,\n      });\n      onSuccess();\n    } catch (error: any) {\n      alert(error.message || 'Failed to create task');\n    } finally {\n      setCreating(false);\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-card rounded-lg p-6 max-w-2xl w-full max-h-[90vh] overflow-auto\">\n        <div className=\"flex justify-between items-center mb-4\">\n          <h2 className=\"text-xl font-bold\">Create Task</h2>\n          <button onClick={onClose} className=\"text-muted-foreground hover:text-foreground\">\n            <XCircleIcon className=\"h-6 w-6\" />\n          </button>\n        </div>\n\n        <div className=\"space-y-4\">\n          {/* Task Name */}\n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Task Name *</label>\n            <input\n              type=\"text\"\n              value={taskName}\n              onChange={(e) => setTaskName(e.target.value)}\n              placeholder=\"e.g., Analyze company website\"\n              className=\"w-full px-3 py-2 border border-border rounded-md bg-background\"\n              disabled={creating}\n            />\n          </div>\n\n          {/* Task Description */}\n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Description (Optional)</label>\n            <textarea\n              value={taskDescription}\n              onChange={(e) => setTaskDescription(e.target.value)}\n              placeholder=\"Additional details about this task\"\n              rows={2}\n              className=\"w-full px-3 py-2 border border-border rounded-md bg-background\"\n              disabled={creating}\n            />\n          </div>\n\n          {/* Task Type Selection */}\n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Task Type *</label>\n            <div className=\"flex gap-2\">\n              <button\n                type=\"button\"\n                onClick={() => setTaskType('agent')}\n                className={`flex-1 px-4 py-2 rounded-md font-medium transition ${\n                  taskType === 'agent'\n                    ? 'bg-primary text-white'\n                    : 'bg-card border border-border hover:bg-accent'\n                }`}\n                disabled={creating}\n              >\n                Agent\n              </button>\n              <button\n                type=\"button\"\n                onClick={() => setTaskType('skill')}\n                className={`flex-1 px-4 py-2 rounded-md font-medium transition ${\n                  taskType === 'skill'\n                    ? 'bg-primary text-white'\n                    : 'bg-card border border-border hover:bg-accent'\n                }`}\n                disabled={creating}\n              >\n                Skill\n              </button>\n            </div>\n          </div>\n\n          {/* Agent or Skill Selection */}\n          <div>\n            <label className=\"block text-sm font-medium mb-1\">\n              {taskType === 'agent' ? 'Agent' : 'Skill'} *\n            </label>\n            {taskType === 'agent' ? (\n              <>\n                <select\n                  value={selectedAgentId}\n                  onChange={(e) => {\n                    setSelectedAgentId(e.target.value);\n                    setInputValues({});\n                  }}\n                  className=\"w-full px-3 py-2 border border-border rounded-md bg-background\"\n                  disabled={creating}\n                >\n                  {agents.map(agent => (\n                    <option key={agent.id} value={agent.id}>{agent.name}</option>\n                  ))}\n                </select>\n                {selectedAgent && (\n                  <p className=\"text-xs text-muted-foreground mt-1\">{selectedAgent.description}</p>\n                )}\n              </>\n            ) : (\n              <>\n                <select\n                  value={selectedSkillId}\n                  onChange={(e) => {\n                    setSelectedSkillId(e.target.value);\n                    setInputValues({});\n                  }}\n                  className=\"w-full px-3 py-2 border border-border rounded-md bg-background\"\n                  disabled={creating}\n                >\n                  {skills.map(skill => (\n                    <option key={skill.id} value={skill.id}>{skill.name}</option>\n                  ))}\n                </select>\n                {selectedSkill && (\n                  <p className=\"text-xs text-muted-foreground mt-1\">{selectedSkill.description}</p>\n                )}\n              </>\n            )}\n          </div>\n\n          {/* Input Fields or Prompt */}\n          {selectedEntity && (\n            <div>\n              {hasInputFields ? (\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">\n                    Skill Inputs:\n                  </label>\n                  {selectedSkill!.inputFields!.map((field: any) => (\n                    <div key={field.name} className=\"mb-3\">\n                      <label className=\"block text-sm mb-1\">\n                        {field.label} {field.required && <span className=\"text-red-500\">*</span>}\n                      </label>\n                      {field.description && (\n                        <p className=\"text-xs text-muted-foreground mb-1\">{field.description}</p>\n                      )}\n                      {field.type === 'text' && (\n                        <input\n                          type=\"text\"\n                          value={inputValues[field.name] || ''}\n                          onChange={(e) => setInputValues({ ...inputValues, [field.name]: e.target.value })}\n                          placeholder={field.placeholder}\n                          className=\"w-full px-3 py-2 border border-border rounded-md bg-background text-sm\"\n                          disabled={creating}\n                        />\n                      )}\n                      {field.type === 'textarea' && (\n                        <textarea\n                          value={inputValues[field.name] || ''}\n                          onChange={(e) => setInputValues({ ...inputValues, [field.name]: e.target.value })}\n                          placeholder={field.placeholder}\n                          rows={3}\n                          className=\"w-full px-3 py-2 border border-border rounded-md bg-background text-sm\"\n                          disabled={creating}\n                        />\n                      )}\n                      {field.type === 'dropdown' && (\n                        <select\n                          value={inputValues[field.name] || ''}\n                          onChange={(e) => setInputValues({ ...inputValues, [field.name]: e.target.value })}\n                          className=\"w-full px-3 py-2 border border-border rounded-md bg-background text-sm\"\n                          disabled={creating}\n                        >\n                          <option value=\"\">Select an option</option>\n                          {field.options?.map((opt: string) => (\n                            <option key={opt} value={opt}>{opt}</option>\n                          ))}\n                        </select>\n                      )}\n                      {field.type === 'number' && (\n                        <input\n                          type=\"number\"\n                          value={inputValues[field.name] || ''}\n                          onChange={(e) => setInputValues({ ...inputValues, [field.name]: e.target.value })}\n                          placeholder={field.placeholder}\n                          className=\"w-full px-3 py-2 border border-border rounded-md bg-background text-sm\"\n                          disabled={creating}\n                        />\n                      )}\n                      {field.type === 'checkbox' && (\n                        <input\n                          type=\"checkbox\"\n                          checked={inputValues[field.name] || false}\n                          onChange={(e) => setInputValues({ ...inputValues, [field.name]: e.target.checked })}\n                          className=\"w-4 h-4\"\n                          disabled={creating}\n                        />\n                      )}\n                      {field.type === 'multiselect' && (\n                        <select\n                          multiple\n                          value={inputValues[field.name] || []}\n                          onChange={(e) => {\n                            const selected = Array.from(e.target.selectedOptions, option => option.value);\n                            setInputValues({ ...inputValues, [field.name]: selected });\n                          }}\n                          className=\"w-full px-3 py-2 border border-border rounded-md bg-background text-sm\"\n                          disabled={creating}\n                          size={Math.min(field.options?.length || 5, 5)}\n                        >\n                          {field.options?.map((opt: string) => (\n                            <option key={opt} value={opt}>{opt}</option>\n                          ))}\n                        </select>\n                      )}\n                      {field.type === 'filepath' && (\n                        <input\n                          type=\"text\"\n                          value={inputValues[field.name] || ''}\n                          onChange={(e) => setInputValues({ ...inputValues, [field.name]: e.target.value })}\n                          placeholder={field.placeholder || '/path/to/file'}\n                          className=\"w-full px-3 py-2 border border-border rounded-md bg-background text-sm font-mono\"\n                          disabled={creating}\n                        />\n                      )}\n                    </div>\n                  ))}\n                </div>\n              ) : (\n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Prompt *</label>\n                  <textarea\n                    value={inputValues['prompt'] || ''}\n                    onChange={(e) => setInputValues({ ...inputValues, prompt: e.target.value })}\n                    placeholder={`What should the ${taskType === 'agent' ? 'agent' : 'skill'} do?`}\n                    rows={4}\n                    className=\"w-full px-3 py-2 border border-border rounded-md bg-background\"\n                    disabled={creating}\n                  />\n                </div>\n              )}\n            </div>\n          )}\n\n          {/* Permission Mode */}\n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Permission Mode</label>\n            <select\n              value={permissionMode}\n              onChange={(e) => setPermissionMode(e.target.value as any)}\n              className=\"w-full px-3 py-2 border border-border rounded-md bg-background\"\n              disabled={creating}\n            >\n              <option value=\"default\">Default (ask for permissions)</option>\n              <option value=\"acceptEdits\">Accept Edits</option>\n              <option value=\"bypass\">Bypass (no permissions)</option>\n              <option value=\"plan\">Plan Mode</option>\n            </select>\n          </div>\n        </div>\n\n        <div className=\"flex gap-2 mt-6\">\n          <Button onClick={handleCreate} disabled={creating} className=\"flex-1\">\n            {creating ? 'Creating...' : 'Create Task'}\n          </Button>\n          <Button onClick={onClose} variant=\"secondary\" disabled={creating}>\n            Cancel\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst TaskDetailModal: React.FC<{ task: api.Task; onClose: () => void }> = ({ task, onClose }) => {\n  // Parse execution log to display messages\n  interface ParsedMessage {\n    id: string;\n    type: 'status' | 'assistant' | 'tool_use' | 'error' | 'debug';\n    content: string;\n    timestamp: Date;\n    toolName?: string;\n    toolInput?: any;\n    toolResult?: any;\n    toolUseId?: string;\n  }\n\n  const parseExecutionLog = (): ParsedMessage[] => {\n    if (!task.executionLog || task.executionLog.length === 0) return [];\n\n    const messages: ParsedMessage[] = [];\n    const toolUseMap = new Map<string, ParsedMessage>();\n\n    task.executionLog.forEach((event: any, index: number) => {\n      // Handle message events\n      if (event.type === 'message' && event.content) {\n        const eventContent = event.content;\n\n        // Handle assistant messages\n        if (eventContent.type === 'assistant' && eventContent.message) {\n          const message = eventContent.message;\n          if (message.content && Array.isArray(message.content)) {\n            const blocks = message.content;\n\n            // Process text blocks\n            const textContent = blocks\n              .filter((block: any) => block.type === 'text')\n              .map((block: any) => block.text)\n              .join('\\n');\n\n            if (textContent) {\n              messages.push({\n                id: `msg-${index}-text`,\n                type: 'assistant',\n                content: textContent,\n                timestamp: new Date(),\n              });\n            }\n\n            // Process tool_use blocks\n            const toolUseBlocks = blocks.filter((block: any) => block.type === 'tool_use');\n            toolUseBlocks.forEach((toolBlock: any) => {\n              const toolMsg: ParsedMessage = {\n                id: `tool-use-${toolBlock.id}`,\n                type: 'tool_use',\n                content: '',\n                timestamp: new Date(),\n                toolName: toolBlock.name,\n                toolInput: toolBlock.input,\n                toolUseId: toolBlock.id,\n              };\n              messages.push(toolMsg);\n              toolUseMap.set(toolBlock.id, toolMsg);\n            });\n          }\n        }\n\n        // Handle user messages (tool results)\n        if (eventContent.type === 'user' && eventContent.message) {\n          const message = eventContent.message;\n          if (message.content && Array.isArray(message.content)) {\n            const toolResultBlocks = message.content.filter((block: any) => block.type === 'tool_result');\n            toolResultBlocks.forEach((resultBlock: any) => {\n              const toolUseId = resultBlock.tool_use_id;\n              const toolResult = resultBlock.content;\n\n              // Find corresponding tool_use message and update it\n              const toolMsg = toolUseMap.get(toolUseId);\n              if (toolMsg) {\n                toolMsg.toolResult = toolResult;\n              }\n            });\n          }\n        }\n\n        // Handle result\n        if (eventContent.type === 'result') {\n          const resultText = eventContent.is_error\n            ? `\u274c Task failed: ${eventContent.result}`\n            : `\u2705 Task completed successfully`;\n\n          messages.push({\n            id: `result-${index}`,\n            type: 'status',\n            content: resultText,\n            timestamp: new Date(),\n          });\n\n          if (!eventContent.is_error && eventContent.result) {\n            messages.push({\n              id: `result-content-${index}`,\n              type: 'assistant',\n              content: typeof eventContent.result === 'string' ? eventContent.result : JSON.stringify(eventContent.result, null, 2),\n              timestamp: new Date(),\n            });\n          }\n        }\n      }\n      // Handle status events\n      else if (event.type === 'status') {\n        messages.push({\n          id: `status-${index}`,\n          type: 'status',\n          content: event.message || event.status,\n          timestamp: new Date(),\n        });\n      }\n      // Handle debug events\n      else if (event.type === 'debug') {\n        messages.push({\n          id: `debug-${index}`,\n          type: 'debug',\n          content: event.message || JSON.stringify(event),\n          timestamp: new Date(),\n        });\n      }\n      // Handle error events\n      else if (event.type === 'error') {\n        messages.push({\n          id: `error-${index}`,\n          type: 'error',\n          content: `\u274c Error: ${event.error || event.message || JSON.stringify(event)}`,\n          timestamp: new Date(),\n        });\n      }\n      // Handle complete events\n      else if (event.type === 'complete') {\n        messages.push({\n          id: `complete-${index}`,\n          type: 'status',\n          content: '\u2705 Agent execution completed',\n          timestamp: new Date(),\n        });\n      }\n    });\n\n    return messages;\n  };\n\n  const messages = parseExecutionLog();\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-card rounded-lg shadow-xl w-full max-w-5xl h-[85vh] flex flex-col\">\n        {/* Header */}\n        <div className=\"border-b border-border p-4 flex justify-between items-center\">\n          <div>\n            <h2 className=\"text-xl font-bold\">{task.name}</h2>\n            <div className=\"flex items-center gap-2 mt-1\">\n              <span className=\"text-sm text-muted-foreground\">{task.agentName}</span>\n              <span className={`text-xs px-2 py-0.5 rounded ${\n                task.status === 'completed' ? 'bg-green-100 text-green-700' :\n                task.status === 'failed' ? 'bg-red-100 text-red-700' :\n                task.status === 'running' ? 'bg-blue-100 text-blue-700' :\n                'bg-yellow-100 text-yellow-700'\n              }`}>\n                {task.status}\n              </span>\n            </div>\n            {task.description && (\n              <p className=\"text-sm text-muted-foreground mt-1\">{task.description}</p>\n            )}\n          </div>\n          <button\n            onClick={onClose}\n            className=\"text-muted-foreground hover:text-foreground transition\"\n          >\n            <XCircleIcon className=\"h-6 w-6\" />\n          </button>\n        </div>\n\n        {/* Task Info */}\n        <div className=\"border-b border-border p-4 text-sm space-y-1\">\n          <div><span className=\"font-medium\">Created:</span> {new Date(task.createdAt).toLocaleString()}</div>\n          {task.startedAt && <div><span className=\"font-medium\">Started:</span> {new Date(task.startedAt).toLocaleString()}</div>}\n          {task.completedAt && <div><span className=\"font-medium\">Completed:</span> {new Date(task.completedAt).toLocaleString()}</div>}\n          {task.duration && <div><span className=\"font-medium\">Duration:</span> {(task.duration / 1000).toFixed(1)}s</div>}\n          <div><span className=\"font-medium\">Permission Mode:</span> {task.permissionMode}</div>\n        </div>\n\n        {/* Execution Log */}\n        <div className=\"flex-1 overflow-y-auto p-4 space-y-3\">\n          {messages.length === 0 ? (\n            <div className=\"text-center text-muted-foreground py-8\">\n              No execution log available\n            </div>\n          ) : (\n            messages.map((message) => (\n              <div\n                key={message.id}\n                className={`p-3 rounded-lg ${\n                  message.type === 'error'\n                    ? 'bg-red-500/10 border border-red-500/20'\n                    : message.type === 'debug'\n                    ? 'bg-yellow-500/10 border border-yellow-500/20'\n                    : message.type === 'status'\n                    ? 'bg-blue-500/10 border border-blue-500/20'\n                    : message.type === 'tool_use'\n                    ? 'bg-purple-500/10 border border-purple-500/20'\n                    : message.type === 'assistant'\n                    ? 'bg-primary/10 border border-primary/20'\n                    : 'bg-secondary'\n                }`}\n              >\n                <div className=\"flex items-start justify-between mb-1\">\n                  <span className=\"text-xs font-semibold uppercase tracking-wide\">\n                    {message.type === 'tool_use'\n                      ? `\ud83d\udd27 ${message.toolName}`\n                      : message.type}\n                  </span>\n                </div>\n\n                {message.type === 'tool_use' ? (\n                  <div className=\"text-sm space-y-2\">\n                    <div className=\"font-medium text-purple-400\">Tool: {message.toolName}</div>\n\n                    {/* Input Parameters */}\n                    {message.toolInput && (\n                      <details className=\"cursor-pointer\">\n                        <summary className=\"text-xs text-muted-foreground hover:text-foreground\">\n                          \ud83d\udce5 Input Parameters\n                        </summary>\n                        <pre className=\"mt-2 text-xs bg-black/20 p-2 rounded overflow-x-auto\">\n                          {JSON.stringify(message.toolInput, null, 2)}\n                        </pre>\n                      </details>\n                    )}\n\n                    {/* Output Result */}\n                    {message.toolResult && (\n                      <details\n                        className=\"cursor-pointer\"\n                        open={typeof message.toolResult === 'string' && message.toolResult.length < 200}\n                      >\n                        <summary className=\"text-xs text-muted-foreground hover:text-foreground\">\n                          \ud83d\udce4 Output Result\n                        </summary>\n                        <div className=\"mt-2 text-xs bg-black/20 p-2 rounded overflow-x-auto\">\n                          {typeof message.toolResult === 'string' ? (\n                            <pre className=\"whitespace-pre-wrap\">{message.toolResult}</pre>\n                          ) : (\n                            <pre>{JSON.stringify(message.toolResult, null, 2)}</pre>\n                          )}\n                        </div>\n                      </details>\n                    )}\n                  </div>\n                ) : (\n                  <div className=\"text-sm whitespace-pre-wrap break-words\">\n                    {message.content}\n                  </div>\n                )}\n              </div>\n            ))\n          )}\n        </div>\n\n        {/* Footer */}\n        <div className=\"border-t border-border p-4 flex justify-end gap-2\">\n          <Button onClick={onClose} variant=\"secondary\">\n            Close\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default TasksPage;\n",
        "timestamp": "2026-01-02T14:22:14.293924"
      },
      "worktree_state": {
        "content": "import React, { useState, useEffect, useMemo } from 'react';\nimport * as api from '../services/api';\nimport { Button } from './ui/Button';\nimport { PlayCircleIcon, XCircleIcon, ClockIcon, CopyIcon } from './ui/Icons';\nimport TaskExecutionModal from './TaskExecutionModal';\n\n/**\n * TasksPage - Comprehensive task management interface\n *\n * Page-level component for managing agent and skill execution tasks with listing,\n * creation, execution, monitoring, and history tracking. Displays task statistics,\n * status filtering, and detailed execution logs.\n *\n * ## Features\n *\n * - Task listing with status filtering (all, pending, running, completed, failed)\n * - Statistics dashboard with real-time task counts by status\n * - Task creation with agent/skill selection and dynamic input forms\n * - Task execution with SSE streaming via TaskExecutionModal\n * - Task detail viewing with parsed execution logs\n * - Clone and delete operations\n * - Time-ago formatting for relative timestamps\n *\n * ## Task Listing\n *\n * Tasks are displayed in a vertical list with rich information cards showing:\n *\n * - **Status Indicator**: Color-coded emoji icon (\ud83d\udfe1 pending, \ud83d\udd35 running, \ud83d\udfe2 completed, \ud83d\udd34 failed)\n * - **Task Name**: Large semibold heading with inline status badge\n * - **Status Badge**: Color-coded pill with status text (yellow/blue/green/red backgrounds)\n * - **Metadata**: Agent name and creation time with relative timestamp (e.g., \"5m ago\", \"2h ago\")\n * - **Description**: Optional task description in muted text\n * - **Duration**: Execution duration in seconds with ClockIcon (displayed after completion)\n * - **Action Buttons**:\n *   - View: Opens TaskDetailModal with execution log\n *   - Clone: Creates duplicate task with same configuration\n *   - Execute: Runs pending/failed tasks via TaskExecutionModal (PlayCircleIcon)\n *   - Delete: Removes task with confirmation dialog (XCircleIcon)\n *\n * ## Statistics Dashboard\n *\n * Real-time task statistics displayed in a 5-column grid:\n *\n * - **Total**: All tasks count (gray card with border)\n * - **Pending**: Tasks waiting to run (yellow card, yellow-50 background)\n * - **Running**: Currently executing tasks (blue card, blue-50 background)\n * - **Completed**: Successfully finished tasks (green card, green-50 background)\n * - **Failed**: Tasks that encountered errors (red card, red-50 background)\n *\n * Statistics are computed using useMemo hook, filtering allTasks array by status.\n *\n * ## Task Creation\n *\n * \"Create Task\" button opens CreateTaskModal with comprehensive form:\n *\n * ### Form Fields:\n * 1. **Task Name** (required): Descriptive name for the task\n * 2. **Description** (optional): Additional details about task purpose\n * 3. **Task Type** (required): Toggle between \"Agent\" and \"Skill\"\n * 4. **Entity Selection** (required): Dropdown to select agent or skill\n *    - Shows entity description below dropdown\n *    - Resets input values when selection changes\n * 5. **Input Configuration**:\n *    - **Skills with input fields**: Dynamic form based on skill.inputFields schema\n *      - Supports 7 field types: text, textarea, dropdown, number, checkbox, multiselect, filepath\n *      - Required field validation with red asterisk indicator\n *      - Field descriptions displayed below labels\n *      - Builds userPrompt from field values (e.g., \"Label: value\")\n *    - **Skills without input fields / Agents**: Single \"Prompt\" textarea\n *      - Multi-line text input for task instructions\n *      - Becomes userPrompt directly\n * 6. **Permission Mode**: Dropdown with 4 options\n *    - default: Ask for permissions during execution\n *    - acceptEdits: Automatically accept edit operations\n *    - bypass: No permission prompts (fully automated)\n *    - plan: Plan mode for review before execution\n *\n * ### Creation Workflow:\n * 1. User clicks \"+ Create Task\" button\n * 2. CreateTaskModal opens with form\n * 3. User selects task type (agent/skill)\n * 4. Agents and skills loaded from API with directory context\n * 5. User selects entity from dropdown (auto-selects first item)\n * 6. Form fields rendered based on entity type and input schema\n * 7. User fills in required fields (validated on submit)\n * 8. User clicks \"Create Task\" button\n * 9. API call to createTask endpoint\n * 10. Success: Modal closes, task list refreshes\n * 11. Error: Alert with error message, modal remains open\n *\n * ## Task Execution\n *\n * Tasks can be executed directly from the task list:\n *\n * - **Execute Button**: Displayed for pending and failed tasks (PlayCircleIcon)\n * - **Execution Modal**: TaskExecutionModal opens on click\n *   - Automatic execution on mount\n *   - SSE streaming for real-time progress updates\n *   - Message display (assistant, user, tool use, status, error)\n *   - Auto-scroll to latest messages\n *   - Completion callback refreshes task list\n * - **Status Updates**: Task status changes from pending \u2192 running \u2192 completed/failed\n * - **Execution Log**: All events stored in task.executionLog array\n *\n * ## Task Detail Viewing\n *\n * \"View\" button opens TaskDetailModal with detailed information:\n *\n * ### Header Section:\n * - Task name (bold heading)\n * - Agent name and status badge\n * - Task description (if provided)\n * - Close button (XCircleIcon)\n *\n * ### Task Info Section:\n * - Created: Timestamp when task was created\n * - Started: Timestamp when execution began (if started)\n * - Completed: Timestamp when execution finished (if completed)\n * - Duration: Total execution time in seconds\n * - Permission Mode: The permission mode used for execution\n *\n * ### Execution Log Section:\n * Parsed execution log with color-coded message types:\n *\n * - **Assistant Messages** (bg-primary/10): Text content from Claude\n * - **Tool Use Messages** (bg-purple-500/10): Tool execution details\n *   - Tool name with \ud83d\udd27 icon\n *   - Collapsible input parameters (\ud83d\udce5 Input Parameters)\n *   - Collapsible output result (\ud83d\udce4 Output Result)\n *   - Auto-expand for short results (< 200 chars)\n * - **Status Messages** (bg-blue-500/10): Progress updates and completion\n * - **Error Messages** (bg-red-500/10): Error details and stack traces\n * - **Debug Messages** (bg-yellow-500/10): Debug information\n *\n * Empty state: \"No execution log available\" displayed for tasks without logs.\n *\n * ## Status Filtering\n *\n * Filter buttons above task list:\n *\n * - **all**: Show all tasks (default filter)\n * - **pending**: Tasks waiting to run\n * - **running**: Currently executing tasks\n * - **completed**: Successfully finished tasks\n * - **failed**: Tasks that encountered errors\n *\n * Active filter has bg-primary background with white text.\n * Inactive filters have bg-card background with border, hover:bg-accent on hover.\n *\n * Tasks filtered using useMemo hook for optimal performance.\n *\n * ## Clone Operation\n *\n * Clone button (CopyIcon) creates duplicate task:\n *\n * 1. User clicks clone button on task card\n * 2. API call to createTask with copied task properties:\n *    - name, description, agentId, taskType, userPrompt, inputValues, permissionMode, directory\n * 3. Success: Task list refreshes to show new task\n * 4. Error: Alert with \"Failed to clone task\" message\n *\n * Cloned task inherits all configuration but gets new ID and timestamps.\n *\n * ## Delete Operation\n *\n * Delete button (XCircleIcon) removes task:\n *\n * 1. User clicks delete button on task card\n * 2. Confirmation dialog: \"Are you sure you want to delete this task?\"\n * 3. User confirms deletion\n * 4. API call to deleteTask endpoint\n * 5. Success: Task list refreshes to remove deleted task\n * 6. Error: Alert with \"Failed to delete task\" message\n * 7. User cancels: No action taken, dialog closes\n *\n * ## Directory Integration\n *\n * Tasks are loaded globally (no directory filtering on API level):\n *\n * - **API Integration**: getTasks({}) fetches all tasks\n * - **Directory Context**: Directory from localStorage used for create operations\n * - **Scoped Creation**: New tasks created with directory context for proper isolation\n *\n * ## Styling Behavior\n *\n * Tailwind CSS classes and responsive design:\n *\n * - **Animation**: animate-fade-in on page mount for smooth entry\n * - **Header**: Flex layout with title on left, \"Create Task\" button on right\n * - **Stats Grid**: 5 equal columns with color-coded cards (grid-cols-5)\n * - **Filter Buttons**: Flex gap-2 with rounded-lg buttons, active state with bg-primary\n * - **Task Cards**: Vertical spacing (space-y-3) with bg-card, border, rounded-lg\n * - **Status Colors**:\n *   - pending: text-yellow-600 bg-yellow-100\n *   - running: text-blue-600 bg-blue-100\n *   - completed: text-green-600 bg-green-100\n *   - failed: text-red-600 bg-red-100\n * - **Empty State**: Centered text with py-8 padding, text-muted-foreground\n * - **Loading State**: Centered \"Loading tasks...\" with muted text\n *\n * @example\n * // Basic usage in ManagerApp dashboard phase\n * import TasksPage from './components/TasksPage';\n *\n * function ManagerApp() {\n *   const [activeView, setActiveView] = useState('dashboard');\n *\n *   return (\n *     <Layout>\n *       {activeView === 'tasks' && <TasksPage />}\n *     </Layout>\n *   );\n * }\n *\n * @example\n * // Understanding task creation workflow (agent-based)\n * // 1. User clicks \"+ Create Task\" button\n * // 2. CreateTaskModal opens\n * // 3. User selects \"Agent\" task type\n * // 4. User selects agent from dropdown (e.g., \"Code Reviewer\")\n * // 5. User enters task name: \"Review authentication code\"\n * // 6. User enters prompt: \"Review the authentication implementation for security issues\"\n * // 7. User selects permission mode: \"default\"\n * // 8. User clicks \"Create Task\"\n * // 9. Task created with status \"pending\"\n * // 10. Task appears in task list with yellow pending indicator\n *\n * @example\n * // Understanding task creation workflow (skill-based with input fields)\n * // 1. User clicks \"+ Create Task\" button\n * // 2. CreateTaskModal opens\n * // 3. User selects \"Skill\" task type\n * // 4. User selects skill from dropdown (e.g., \"API Integration\")\n * // 5. Skill has input fields: endpoint (text), method (dropdown), payload (textarea)\n * // 6. User enters task name: \"Create user endpoint\"\n * // 7. User fills input fields:\n * //    - endpoint: \"/api/users\"\n * //    - method: \"POST\"\n * //    - payload: '{\"name\": \"John\", \"email\": \"john@example.com\"}'\n * // 8. User selects permission mode: \"bypass\"\n * // 9. User clicks \"Create Task\"\n * // 10. userPrompt built from fields: \"Endpoint: /api/users\\nMethod: POST\\nPayload: {...}\"\n * // 11. Task created and appears in list\n *\n * @example\n * // Understanding task execution and detail viewing\n * // 1. User finds pending task in list: \"Review authentication code\"\n * // 2. User clicks Play button (PlayCircleIcon)\n * // 3. TaskExecutionModal opens and starts execution automatically\n * // 4. SSE stream shows real-time progress:\n * //    - Status: \"Starting agent execution...\"\n * //    - Assistant: \"I'll review your authentication code...\"\n * //    - Tool use: Read file \"auth.ts\"\n * //    - Tool result: File contents displayed\n * //    - Assistant: \"I found these security issues...\"\n * // 5. Execution completes, task status changes to \"completed\"\n * // 6. User closes execution modal\n * // 7. Task list refreshes, task now shows green completed indicator\n * // 8. User clicks \"View\" button on completed task\n * // 9. TaskDetailModal opens with full execution log\n * // 10. User reviews all messages, tool uses, and results\n * // 11. User closes detail modal\n */\nconst TasksPage: React.FC = () => {\n  const [allTasks, setAllTasks] = useState<api.Task[]>([]);\n  const [filter, setFilter] = useState<api.TaskStatus | 'all'>('all');\n  const [loading, setLoading] = useState(true);\n  const [showCreateModal, setShowCreateModal] = useState(false);\n  const [selectedTask, setSelectedTask] = useState<api.Task | null>(null);\n  const [executingTask, setExecutingTask] = useState<api.Task | null>(null);\n\n  useEffect(() => {\n    loadTasks();\n  }, []);\n\n  /**\n   * Load all tasks from API\n   *\n   * Fetches all tasks without directory filtering (global task list).\n   * Updates allTasks state with fetched data and manages loading state.\n   *\n   * @internal\n   */\n  const loadTasks = async () => {\n    try {\n      setLoading(true);\n      // Always fetch all tasks and filter on frontend\n      const data = await api.getTasks({});\n      setAllTasks(data);\n    } catch (error) {\n      console.error('Failed to load tasks:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  /**\n   * Calculate task statistics by status\n   *\n   * Computes real-time statistics from allTasks array:\n   * - total: Total number of tasks\n   * - pending: Count of tasks with status 'pending'\n   * - running: Count of tasks with status 'running'\n   * - completed: Count of tasks with status 'completed'\n   * - failed: Count of tasks with status 'failed'\n   *\n   * Uses useMemo hook for optimal performance, recalculating only when allTasks changes.\n   *\n   * @internal\n   */\n  const stats = useMemo(() => {\n    return {\n      total: allTasks.length,\n      pending: allTasks.filter(t => t.status === 'pending').length,\n      running: allTasks.filter(t => t.status === 'running').length,\n      completed: allTasks.filter(t => t.status === 'completed').length,\n      failed: allTasks.filter(t => t.status === 'failed').length,\n    };\n  }, [allTasks]);\n\n  /**\n   * Filter tasks based on selected filter\n   *\n   * Filters allTasks array by status:\n   * - 'all': Returns all tasks (no filtering)\n   * - 'pending'|'running'|'completed'|'failed': Returns tasks with matching status\n   *\n   * Uses useMemo hook for optimal performance, recalculating only when allTasks or filter changes.\n   *\n   * @internal\n   */\n  const tasks = useMemo(() => {\n    if (filter === 'all') return allTasks;\n    return allTasks.filter(t => t.status === filter);\n  }, [allTasks, filter]);\n\n  /**\n   * Delete a task with confirmation\n   *\n   * Workflow:\n   * 1. Show confirmation dialog\n   * 2. If confirmed, call DELETE /tasks/:taskId API endpoint\n   * 3. Success: Refresh task list\n   * 4. Error: Show alert with error message\n   * 5. If not confirmed: No action taken\n   *\n   * @param taskId - ID of the task to delete\n   * @internal\n   */\n  const handleDeleteTask = async (taskId: string) => {\n    if (!confirm('Are you sure you want to delete this task?')) return;\n    try {\n      await api.deleteTask(taskId);\n      loadTasks();\n    } catch (error) {\n      alert('Failed to delete task');\n    }\n  };\n\n  /**\n   * Clone a task with same configuration\n   *\n   * Creates a new task with copied properties from the original task:\n   * - name, description, agentId, taskType, userPrompt, inputValues, permissionMode, directory\n   * - New task gets new ID and timestamps\n   * - Status starts as 'pending'\n   *\n   * Workflow:\n   * 1. Call POST /tasks API endpoint with copied task properties\n   * 2. Success: Refresh task list to show new task\n   * 3. Error: Show alert with \"Failed to clone task\" message\n   *\n   * @param task - Task object to clone\n   * @internal\n   */\n  const handleCloneTask = async (task: api.Task) => {\n    try {\n      await api.createTask({\n        name: task.name,\n        description: task.description,\n        agentId: task.agentId,\n        taskType: task.taskType,\n        userPrompt: task.userPrompt,\n        inputValues: task.inputValues,\n        permissionMode: task.permissionMode,\n        directory: task.directory,\n      });\n      loadTasks();\n    } catch (error) {\n      alert('Failed to clone task');\n    }\n  };\n\n  /**\n   * Execute a task via TaskExecutionModal\n   *\n   * Opens TaskExecutionModal with selected task.\n   * Modal will automatically start execution on mount.\n   *\n   * @param task - Task object to execute\n   * @internal\n   */\n  const handleExecuteTask = (task: api.Task) => {\n    setExecutingTask(task);\n  };\n\n  /**\n   * Get color classes for task status badge\n   *\n   * Returns Tailwind CSS classes for status badge background and text color:\n   * - pending: Yellow (text-yellow-600 bg-yellow-100)\n   * - running: Blue (text-blue-600 bg-blue-100)\n   * - completed: Green (text-green-600 bg-green-100)\n   * - failed: Red (text-red-600 bg-red-100)\n   *\n   * @param status - Task status\n   * @returns CSS class string for status badge styling\n   * @internal\n   */\n  const getStatusColor = (status: api.TaskStatus) => {\n    switch (status) {\n      case 'pending': return 'text-yellow-600 bg-yellow-100';\n      case 'running': return 'text-blue-600 bg-blue-100';\n      case 'completed': return 'text-green-600 bg-green-100';\n      case 'failed': return 'text-red-600 bg-red-100';\n    }\n  };\n\n  /**\n   * Get emoji icon for task status\n   *\n   * Returns color-coded emoji icon:\n   * - pending: \ud83d\udfe1 (yellow circle)\n   * - running: \ud83d\udd35 (blue circle)\n   * - completed: \ud83d\udfe2 (green circle)\n   * - failed: \ud83d\udd34 (red circle)\n   *\n   * @param status - Task status\n   * @returns Emoji icon string\n   * @internal\n   */\n  const getStatusIcon = (status: api.TaskStatus) => {\n    switch (status) {\n      case 'pending': return '\ud83d\udfe1';\n      case 'running': return '\ud83d\udd35';\n      case 'completed': return '\ud83d\udfe2';\n      case 'failed': return '\ud83d\udd34';\n    }\n  };\n\n  /**\n   * Format timestamp as relative time ago\n   *\n   * Converts ISO timestamp to human-readable relative time:\n   * - < 1 minute: \"just now\"\n   * - < 1 hour: \"Nm ago\" (e.g., \"5m ago\")\n   * - < 24 hours: \"Nh ago\" (e.g., \"2h ago\")\n   * - >= 24 hours: \"Nd ago\" (e.g., \"3d ago\")\n   *\n   * @param timestamp - ISO timestamp string\n   * @returns Relative time string\n   * @internal\n   */\n  const formatTimeAgo = (timestamp: string) => {\n    const diff = Date.now() - new Date(timestamp).getTime();\n    const minutes = Math.floor(diff / 60000);\n    const hours = Math.floor(diff / 3600000);\n    const days = Math.floor(diff / 86400000);\n\n    if (minutes < 1) return 'just now';\n    if (minutes < 60) return `${minutes}m ago`;\n    if (hours < 24) return `${hours}h ago`;\n    return `${days}d ago`;\n  };\n\n  return (\n    <div className=\"animate-fade-in\">\n      <div className=\"flex justify-between items-center mb-6\">\n        <div>\n          <h1 className=\"text-3xl font-bold\">Tasks</h1>\n          <p className=\"text-muted-foreground\">Manage and execute agent tasks</p>\n        </div>\n        <Button onClick={() => setShowCreateModal(true)}>+ Create Task</Button>\n      </div>\n\n      {/* Stats */}\n      {stats && (\n        <div className=\"grid grid-cols-5 gap-4 mb-6\">\n          <div className=\"bg-card border border-border rounded-lg p-4\">\n            <div className=\"text-2xl font-bold\">{stats.total}</div>\n            <div className=\"text-sm text-muted-foreground\">Total</div>\n          </div>\n          <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-4\">\n            <div className=\"text-2xl font-bold text-yellow-700\">{stats.pending}</div>\n            <div className=\"text-sm text-yellow-600\">Pending</div>\n          </div>\n          <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n            <div className=\"text-2xl font-bold text-blue-700\">{stats.running}</div>\n            <div className=\"text-sm text-blue-600\">Running</div>\n          </div>\n          <div className=\"bg-green-50 border border-green-200 rounded-lg p-4\">\n            <div className=\"text-2xl font-bold text-green-700\">{stats.completed}</div>\n            <div className=\"text-sm text-green-600\">Completed</div>\n          </div>\n          <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n            <div className=\"text-2xl font-bold text-red-700\">{stats.failed}</div>\n            <div className=\"text-sm text-red-600\">Failed</div>\n          </div>\n        </div>\n      )}\n\n      {/* Filters */}\n      <div className=\"flex gap-2 mb-4\">\n        {['all', 'pending', 'running', 'completed', 'failed'].map((f) => (\n          <button\n            key={f}\n            onClick={() => setFilter(f as any)}\n            className={`px-4 py-2 rounded-lg font-medium transition ${\n              filter === f\n                ? 'bg-primary text-white'\n                : 'bg-card border border-border hover:bg-accent'\n            }`}\n          >\n            {f.charAt(0).toUpperCase() + f.slice(1)}\n          </button>\n        ))}\n      </div>\n\n      {/* Task List */}\n      {loading ? (\n        <div className=\"text-center py-8 text-muted-foreground\">Loading tasks...</div>\n      ) : tasks.length === 0 ? (\n        <div className=\"text-center py-8 text-muted-foreground\">\n          No tasks found. Create your first task!\n        </div>\n      ) : (\n        <div className=\"space-y-3\">\n          {tasks.map((task) => (\n            <div key={task.id} className=\"bg-card border border-border rounded-lg p-4\">\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center gap-2 mb-1\">\n                    <span className=\"text-xl\">{getStatusIcon(task.status)}</span>\n                    <h3 className=\"text-lg font-semibold\">{task.name}</h3>\n                    <span className={`px-2 py-1 rounded text-xs font-medium ${getStatusColor(task.status)}`}>\n                      {task.status}\n                    </span>\n                  </div>\n                  <div className=\"text-sm text-muted-foreground mb-2\">\n                    {task.agentName} \u2022 {formatTimeAgo(task.createdAt)}\n                  </div>\n                  {task.description && (\n                    <p className=\"text-sm text-muted-foreground mb-2\">{task.description}</p>\n                  )}\n                  {task.duration && (\n                    <div className=\"flex items-center gap-1 text-xs text-muted-foreground\">\n                      <ClockIcon className=\"h-3 w-3\" />\n                      {(task.duration / 1000).toFixed(1)}s\n                    </div>\n                  )}\n                </div>\n                <div className=\"flex gap-2\">\n                  <Button\n                    size=\"sm\"\n                    variant=\"secondary\"\n                    onClick={() => setSelectedTask(task)}\n                  >\n                    View\n                  </Button>\n                  <Button\n                    size=\"sm\"\n                    variant=\"secondary\"\n                    onClick={() => handleCloneTask(task)}\n                    title=\"Clone task\"\n                  >\n                    <CopyIcon className=\"h-4 w-4\" />\n                  </Button>\n                  {(task.status === 'pending' || task.status === 'failed') && (\n                    <Button\n                      size=\"sm\"\n                      onClick={() => handleExecuteTask(task)}\n                    >\n                      <PlayCircleIcon className=\"h-4 w-4\" />\n                    </Button>\n                  )}\n                  <Button\n                    size=\"sm\"\n                    variant=\"secondary\"\n                    onClick={() => handleDeleteTask(task.id)}\n                  >\n                    <XCircleIcon className=\"h-4 w-4\" />\n                  </Button>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* Modals */}\n      {showCreateModal && (\n        <CreateTaskModal\n          onClose={() => setShowCreateModal(false)}\n          onSuccess={() => {\n            setShowCreateModal(false);\n            loadTasks();\n          }}\n        />\n      )}\n      {selectedTask && (\n        <TaskDetailModal\n          task={selectedTask}\n          onClose={() => setSelectedTask(null)}\n        />\n      )}\n      {executingTask && (\n        <TaskExecutionModal\n          task={executingTask}\n          onClose={() => {\n            setExecutingTask(null);\n            loadTasks();\n          }}\n          onComplete={() => {\n            // Don't close modal automatically - let user see results\n            // Just reload tasks to update the list\n            loadTasks();\n          }}\n        />\n      )}\n    </div>\n  );\n};\n\nTasksPage.displayName = 'TasksPage';\n\n/**\n * CreateTaskModal - Task creation modal with dynamic form\n *\n * Modal component for creating new agent or skill execution tasks with comprehensive\n * form fields including task type selection, entity (agent/skill) selection, dynamic\n * input fields based on entity schema, and permission mode configuration.\n *\n * ## Features\n *\n * - Task type selection (Agent or Skill)\n * - Entity selection with dropdown (agents or skills)\n * - Dynamic input form based on entity configuration\n * - Skill input fields support (7 field types)\n * - Permission mode selection\n * - Form validation with required field checking\n * - Directory-aware entity loading\n * - Auto-selection of first entity\n * - Input value reset on entity change\n *\n * ## Form Sections\n *\n * ### 1. Task Name (Required)\n * - Text input for descriptive task name\n * - Placeholder: \"e.g., Analyze company website\"\n * - Validation: Required, must not be empty\n *\n * ### 2. Description (Optional)\n * - Textarea for additional task details\n * - Placeholder: \"Additional details about this task\"\n * - 2 rows height\n * - Optional field, can be left empty\n *\n * ### 3. Task Type (Required)\n * - Toggle buttons: \"Agent\" or \"Skill\"\n * - Default: \"Agent\"\n * - Active button: bg-primary with white text\n * - Inactive button: bg-card with border\n * - Resets inputValues when changed\n *\n * ### 4. Entity Selection (Required)\n * - **Agent Mode**: Dropdown of available agents with descriptions\n * - **Skill Mode**: Dropdown of available skills with descriptions\n * - Shows entity description below dropdown (muted text)\n * - Auto-selects first entity on load\n * - Resets inputValues when selection changes\n *\n * ### 5. Input Configuration (Dynamic)\n *\n * Two rendering modes based on entity configuration:\n *\n * #### A. Skills with Input Fields (skill.inputFields exists and length > 0)\n * Renders dynamic form based on skill.inputFields schema with support for 7 field types:\n *\n * - **text**: Single-line text input (type=\"text\")\n * - **textarea**: Multi-line text input (3 rows)\n * - **dropdown**: Single-selection dropdown with options\n * - **number**: Numeric input (type=\"number\")\n * - **checkbox**: Boolean checkbox (w-4 h-4)\n * - **multiselect**: Multiple-selection dropdown (HTML multiple select)\n * - **filepath**: File path input with monospace font (font-mono)\n *\n * Each field displays:\n * - Label with red asterisk (*) if required\n * - Description text below label (if field.description exists)\n * - Appropriate input control based on field.type\n * - Placeholder text (if field.placeholder exists)\n *\n * Validation:\n * - Required fields checked on submit\n * - Alert displays missing required field labels\n * - userPrompt built from field values: \"Label: value\\nLabel2: value2...\"\n *\n * #### B. Skills without Input Fields OR Agents\n * Renders single \"Prompt\" textarea:\n * - Label: \"Prompt *\" (required indicator)\n * - 4 rows height\n * - Placeholder: \"What should the {agent|skill} do?\"\n * - Validation: Required, must not be empty\n * - userPrompt set directly from textarea value\n *\n * ### 6. Permission Mode (Required)\n * - Dropdown with 4 options:\n *   - **default**: Ask for permissions during execution\n *   - **acceptEdits**: Automatically accept edit operations\n *   - **bypass**: No permission prompts (fully automated)\n *   - **plan**: Plan mode for review before execution\n * - Default: \"bypass\"\n * - Used during task execution to control permission handling\n *\n * ## Creation Workflow\n *\n * 1. Modal opens via onClose/onSuccess props\n * 2. Load agents and skills from API with directory context\n * 3. Auto-select first agent (if taskType === 'agent')\n * 4. User selects task type (agent or skill)\n * 5. User selects entity from dropdown\n * 6. Form fields rendered dynamically based on entity configuration\n * 7. User fills in required fields (task name, inputs/prompt, permission mode)\n * 8. User clicks \"Create Task\" button\n * 9. Validation:\n *    - Check task name is not empty\n *    - Check entity is selected\n *    - Check required skill input fields are filled\n *    - Check prompt/userPrompt is not empty\n * 10. API call to POST /tasks endpoint\n * 11. Success: onSuccess callback invoked, modal closes, task list refreshes\n * 12. Error: Alert with error message, modal remains open, creating state reset\n *\n * ## Directory Integration\n *\n * - Directory retrieved from localStorage ('cui-manager-directory')\n * - Used for loading agents and skills: api.getAgents(dir), api.getSkills(dir)\n * - Passed to createTask API call for proper task scoping\n *\n * ## Styling Behavior\n *\n * Tailwind CSS classes:\n * - **Modal Overlay**: fixed inset-0 bg-black bg-opacity-50 z-50 (centered flex)\n * - **Modal Container**: bg-card rounded-lg p-6 max-w-2xl max-h-[90vh] overflow-auto\n * - **Header**: Flex layout with title (text-xl font-bold) and close button\n * - **Form Fields**: space-y-4 with consistent spacing\n * - **Labels**: text-sm font-medium mb-1 with red asterisk for required fields\n * - **Inputs**: w-full px-3 py-2 border border-border rounded-md bg-background\n * - **Buttons**: Flex gap-2 with \"Create Task\" (flex-1) and \"Cancel\" (secondary)\n * - **Disabled State**: All inputs and buttons disabled when creating === true\n *\n * @example\n * // Basic usage with task creation\n * const [showCreateModal, setShowCreateModal] = useState(false);\n *\n * // Task list refresh function\n * const loadTasks = async () => {\n *   const data = await api.getTasks({});\n *   setAllTasks(data);\n * };\n *\n * return (\n *   <>\n *     <Button onClick={() => setShowCreateModal(true)}>+ Create Task</Button>\n *     {showCreateModal && (\n *       <CreateTaskModal\n *         onClose={() => setShowCreateModal(false)}\n *         onSuccess={() => {\n *           setShowCreateModal(false);\n *           loadTasks();\n *         }}\n *       />\n *     )}\n *   </>\n * );\n *\n * @example\n * // Understanding agent task creation workflow\n * // 1. User clicks \"+ Create Task\" button\n * // 2. CreateTaskModal opens with \"Agent\" task type selected\n * // 3. Agents loaded from API: [\"Code Reviewer\", \"Documentation Writer\", \"Bug Fixer\"]\n * // 4. First agent \"Code Reviewer\" auto-selected\n * // 5. User enters task name: \"Review authentication code\"\n * // 6. User enters description: \"Focus on security vulnerabilities\"\n * // 7. User enters prompt: \"Review auth.ts for security issues and best practices\"\n * // 8. User selects permission mode: \"default\"\n * // 9. User clicks \"Create Task\"\n * // 10. Validation passes (name, agent, prompt all filled)\n * // 11. API call: POST /tasks with { name, description, agentId, taskType: 'agent', userPrompt, permissionMode, directory }\n * // 12. Success: onSuccess called, modal closes, task appears in list\n *\n * @example\n * // Understanding skill task creation with input fields\n * // 1. User clicks \"+ Create Task\" button\n * // 2. CreateTaskModal opens\n * // 3. User clicks \"Skill\" task type button\n * // 4. Skills loaded from API: [\"API Integration\", \"Database Query\", \"File Parser\"]\n * // 5. User selects \"API Integration\" skill\n * // 6. Skill has input fields:\n * //    - endpoint (text, required): API endpoint URL\n * //    - method (dropdown, required): GET, POST, PUT, DELETE\n * //    - headers (textarea, optional): HTTP headers\n * //    - payload (textarea, optional): Request body\n * // 7. User enters task name: \"Create user endpoint\"\n * // 8. User fills input fields:\n * //    - endpoint: \"/api/users\"\n * //    - method: \"POST\"\n * //    - payload: '{\"name\": \"John\", \"email\": \"john@example.com\"}'\n * // 9. User selects permission mode: \"bypass\"\n * // 10. User clicks \"Create Task\"\n * // 11. Validation: Check required fields (endpoint, method)\n * // 12. Build userPrompt: \"Endpoint: /api/users\\nMethod: POST\\nPayload: {...}\"\n * // 13. API call: POST /tasks with inputValues and userPrompt\n * // 14. Success: Task created and appears in list\n */\nconst CreateTaskModal: React.FC<{ onClose: () => void; onSuccess: () => void }> = ({ onClose, onSuccess }) => {\n  const [taskType, setTaskType] = React.useState<'agent' | 'skill'>('agent');\n  const [agents, setAgents] = React.useState<api.Agent[]>([]);\n  const [skills, setSkills] = React.useState<api.Skill[]>([]);\n  const [selectedAgentId, setSelectedAgentId] = React.useState<string>('');\n  const [selectedSkillId, setSelectedSkillId] = React.useState<string>('');\n  const [taskName, setTaskName] = React.useState('');\n  const [taskDescription, setTaskDescription] = React.useState('');\n  const [inputValues, setInputValues] = React.useState<Record<string, any>>({});\n  const [permissionMode, setPermissionMode] = React.useState<'default' | 'acceptEdits' | 'bypass' | 'plan'>('bypass');\n  const [creating, setCreating] = React.useState(false);\n\n  const selectedAgent = agents.find(a => a.id === selectedAgentId);\n  const selectedSkill = skills.find(s => s.id === selectedSkillId);\n  const selectedEntity = taskType === 'agent' ? selectedAgent : selectedSkill;\n  const hasInputFields = taskType === 'skill' && selectedSkill && selectedSkill.inputFields && selectedSkill.inputFields.length > 0;\n\n  React.useEffect(() => {\n    // Load agents and skills\n    const dir = localStorage.getItem('cui-manager-directory') || undefined;\n\n    api.getAgents(dir).then(data => {\n      setAgents(data);\n      if (data.length > 0 && taskType === 'agent') setSelectedAgentId(data[0].id);\n    }).catch(console.error);\n\n    api.getSkills(dir).then(data => {\n      setSkills(data);\n      if (data.length > 0 && taskType === 'skill') setSelectedSkillId(data[0].id);\n    }).catch(console.error);\n  }, []);\n\n  // Update selected ID when task type changes\n  React.useEffect(() => {\n    if (taskType === 'agent' && agents.length > 0 && !selectedAgentId) {\n      setSelectedAgentId(agents[0].id);\n    } else if (taskType === 'skill' && skills.length > 0 && !selectedSkillId) {\n      setSelectedSkillId(skills[0].id);\n    }\n    setInputValues({});\n  }, [taskType, agents, skills]);\n\n  /**\n   * Handle task creation with validation\n   *\n   * Validates form fields and creates new task via API:\n   *\n   * ### Validation Steps:\n   * 1. Check task name is not empty\n   * 2. Check entity (agent or skill) is selected\n   * 3. For skills with input fields:\n   *    - Check all required fields are filled\n   *    - Alert with missing field labels if validation fails\n   *    - Build userPrompt from field values: \"Label: value\\nLabel2: value2...\"\n   * 4. For skills without input fields or agents:\n   *    - Check prompt is not empty\n   *    - Use prompt directly as userPrompt\n   * 5. Check userPrompt is not empty (final validation)\n   *\n   * ### Creation Workflow:\n   * 1. Set creating state to true (disables form)\n   * 2. Get directory from localStorage\n   * 3. Call POST /tasks API endpoint with:\n   *    - name, description, agentId, taskType, userPrompt, permissionMode, directory\n   *    - inputValues (only for skills with input fields)\n   * 4. Success: Call onSuccess callback (closes modal, refreshes list)\n   * 5. Error: Alert with error message, reset creating state\n   * 6. Finally: Reset creating state to false\n   *\n   * @internal\n   */\n  const handleCreate = async () => {\n    const entityId = taskType === 'agent' ? selectedAgentId : selectedSkillId;\n\n    if (!taskName.trim() || !entityId) {\n      alert('Please fill in required fields');\n      return;\n    }\n\n    // Build prompt from input values if fields exist\n    let userPrompt = '';\n    if (hasInputFields) {\n      const requiredFields = selectedSkill!.inputFields!.filter((f: any) => f.required);\n      const missingFields = requiredFields.filter((f: any) => !inputValues[f.name]);\n\n      if (missingFields.length > 0) {\n        alert(`Please fill in required fields: ${missingFields.map((f: any) => f.label).join(', ')}`);\n        return;\n      }\n\n      const inputParts = selectedSkill!.inputFields!.map((field: any) => {\n        const value = inputValues[field.name];\n        if (value !== undefined && value !== '') {\n          return `${field.label}: ${value}`;\n        }\n        return null;\n      }).filter(Boolean);\n\n      userPrompt = inputParts.join('\\n');\n    } else {\n      userPrompt = inputValues['prompt'] || '';\n    }\n\n    if (!userPrompt.trim()) {\n      alert('Please provide a prompt or fill in the input fields');\n      return;\n    }\n\n    setCreating(true);\n    try {\n      const dir = localStorage.getItem('cui-manager-directory') || undefined;\n      await api.createTask({\n        name: taskName,\n        description: taskDescription || undefined,\n        agentId: entityId,\n        taskType: taskType,\n        userPrompt,\n        inputValues: hasInputFields ? inputValues : undefined,\n        permissionMode,\n        directory: dir,\n      });\n      onSuccess();\n    } catch (error: any) {\n      alert(error.message || 'Failed to create task');\n    } finally {\n      setCreating(false);\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-card rounded-lg p-6 max-w-2xl w-full max-h-[90vh] overflow-auto\">\n        <div className=\"flex justify-between items-center mb-4\">\n          <h2 className=\"text-xl font-bold\">Create Task</h2>\n          <button onClick={onClose} className=\"text-muted-foreground hover:text-foreground\">\n            <XCircleIcon className=\"h-6 w-6\" />\n          </button>\n        </div>\n\n        <div className=\"space-y-4\">\n          {/* Task Name */}\n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Task Name *</label>\n            <input\n              type=\"text\"\n              value={taskName}\n              onChange={(e) => setTaskName(e.target.value)}\n              placeholder=\"e.g., Analyze company website\"\n              className=\"w-full px-3 py-2 border border-border rounded-md bg-background\"\n              disabled={creating}\n            />\n          </div>\n\n          {/* Task Description */}\n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Description (Optional)</label>\n            <textarea\n              value={taskDescription}\n              onChange={(e) => setTaskDescription(e.target.value)}\n              placeholder=\"Additional details about this task\"\n              rows={2}\n              className=\"w-full px-3 py-2 border border-border rounded-md bg-background\"\n              disabled={creating}\n            />\n          </div>\n\n          {/* Task Type Selection */}\n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Task Type *</label>\n            <div className=\"flex gap-2\">\n              <button\n                type=\"button\"\n                onClick={() => setTaskType('agent')}\n                className={`flex-1 px-4 py-2 rounded-md font-medium transition ${\n                  taskType === 'agent'\n                    ? 'bg-primary text-white'\n                    : 'bg-card border border-border hover:bg-accent'\n                }`}\n                disabled={creating}\n              >\n                Agent\n              </button>\n              <button\n                type=\"button\"\n                onClick={() => setTaskType('skill')}\n                className={`flex-1 px-4 py-2 rounded-md font-medium transition ${\n                  taskType === 'skill'\n                    ? 'bg-primary text-white'\n                    : 'bg-card border border-border hover:bg-accent'\n                }`}\n                disabled={creating}\n              >\n                Skill\n              </button>\n            </div>\n          </div>\n\n          {/* Agent or Skill Selection */}\n          <div>\n            <label className=\"block text-sm font-medium mb-1\">\n              {taskType === 'agent' ? 'Agent' : 'Skill'} *\n            </label>\n            {taskType === 'agent' ? (\n              <>\n                <select\n                  value={selectedAgentId}\n                  onChange={(e) => {\n                    setSelectedAgentId(e.target.value);\n                    setInputValues({});\n                  }}\n                  className=\"w-full px-3 py-2 border border-border rounded-md bg-background\"\n                  disabled={creating}\n                >\n                  {agents.map(agent => (\n                    <option key={agent.id} value={agent.id}>{agent.name}</option>\n                  ))}\n                </select>\n                {selectedAgent && (\n                  <p className=\"text-xs text-muted-foreground mt-1\">{selectedAgent.description}</p>\n                )}\n              </>\n            ) : (\n              <>\n                <select\n                  value={selectedSkillId}\n                  onChange={(e) => {\n                    setSelectedSkillId(e.target.value);\n                    setInputValues({});\n                  }}\n                  className=\"w-full px-3 py-2 border border-border rounded-md bg-background\"\n                  disabled={creating}\n                >\n                  {skills.map(skill => (\n                    <option key={skill.id} value={skill.id}>{skill.name}</option>\n                  ))}\n                </select>\n                {selectedSkill && (\n                  <p className=\"text-xs text-muted-foreground mt-1\">{selectedSkill.description}</p>\n                )}\n              </>\n            )}\n          </div>\n\n          {/* Input Fields or Prompt */}\n          {selectedEntity && (\n            <div>\n              {hasInputFields ? (\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">\n                    Skill Inputs:\n                  </label>\n                  {selectedSkill!.inputFields!.map((field: any) => (\n                    <div key={field.name} className=\"mb-3\">\n                      <label className=\"block text-sm mb-1\">\n                        {field.label} {field.required && <span className=\"text-red-500\">*</span>}\n                      </label>\n                      {field.description && (\n                        <p className=\"text-xs text-muted-foreground mb-1\">{field.description}</p>\n                      )}\n                      {field.type === 'text' && (\n                        <input\n                          type=\"text\"\n                          value={inputValues[field.name] || ''}\n                          onChange={(e) => setInputValues({ ...inputValues, [field.name]: e.target.value })}\n                          placeholder={field.placeholder}\n                          className=\"w-full px-3 py-2 border border-border rounded-md bg-background text-sm\"\n                          disabled={creating}\n                        />\n                      )}\n                      {field.type === 'textarea' && (\n                        <textarea\n                          value={inputValues[field.name] || ''}\n                          onChange={(e) => setInputValues({ ...inputValues, [field.name]: e.target.value })}\n                          placeholder={field.placeholder}\n                          rows={3}\n                          className=\"w-full px-3 py-2 border border-border rounded-md bg-background text-sm\"\n                          disabled={creating}\n                        />\n                      )}\n                      {field.type === 'dropdown' && (\n                        <select\n                          value={inputValues[field.name] || ''}\n                          onChange={(e) => setInputValues({ ...inputValues, [field.name]: e.target.value })}\n                          className=\"w-full px-3 py-2 border border-border rounded-md bg-background text-sm\"\n                          disabled={creating}\n                        >\n                          <option value=\"\">Select an option</option>\n                          {field.options?.map((opt: string) => (\n                            <option key={opt} value={opt}>{opt}</option>\n                          ))}\n                        </select>\n                      )}\n                      {field.type === 'number' && (\n                        <input\n                          type=\"number\"\n                          value={inputValues[field.name] || ''}\n                          onChange={(e) => setInputValues({ ...inputValues, [field.name]: e.target.value })}\n                          placeholder={field.placeholder}\n                          className=\"w-full px-3 py-2 border border-border rounded-md bg-background text-sm\"\n                          disabled={creating}\n                        />\n                      )}\n                      {field.type === 'checkbox' && (\n                        <input\n                          type=\"checkbox\"\n                          checked={inputValues[field.name] || false}\n                          onChange={(e) => setInputValues({ ...inputValues, [field.name]: e.target.checked })}\n                          className=\"w-4 h-4\"\n                          disabled={creating}\n                        />\n                      )}\n                      {field.type === 'multiselect' && (\n                        <select\n                          multiple\n                          value={inputValues[field.name] || []}\n                          onChange={(e) => {\n                            const selected = Array.from(e.target.selectedOptions, option => option.value);\n                            setInputValues({ ...inputValues, [field.name]: selected });\n                          }}\n                          className=\"w-full px-3 py-2 border border-border rounded-md bg-background text-sm\"\n                          disabled={creating}\n                          size={Math.min(field.options?.length || 5, 5)}\n                        >\n                          {field.options?.map((opt: string) => (\n                            <option key={opt} value={opt}>{opt}</option>\n                          ))}\n                        </select>\n                      )}\n                      {field.type === 'filepath' && (\n                        <input\n                          type=\"text\"\n                          value={inputValues[field.name] || ''}\n                          onChange={(e) => setInputValues({ ...inputValues, [field.name]: e.target.value })}\n                          placeholder={field.placeholder || '/path/to/file'}\n                          className=\"w-full px-3 py-2 border border-border rounded-md bg-background text-sm font-mono\"\n                          disabled={creating}\n                        />\n                      )}\n                    </div>\n                  ))}\n                </div>\n              ) : (\n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Prompt *</label>\n                  <textarea\n                    value={inputValues['prompt'] || ''}\n                    onChange={(e) => setInputValues({ ...inputValues, prompt: e.target.value })}\n                    placeholder={`What should the ${taskType === 'agent' ? 'agent' : 'skill'} do?`}\n                    rows={4}\n                    className=\"w-full px-3 py-2 border border-border rounded-md bg-background\"\n                    disabled={creating}\n                  />\n                </div>\n              )}\n            </div>\n          )}\n\n          {/* Permission Mode */}\n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Permission Mode</label>\n            <select\n              value={permissionMode}\n              onChange={(e) => setPermissionMode(e.target.value as any)}\n              className=\"w-full px-3 py-2 border border-border rounded-md bg-background\"\n              disabled={creating}\n            >\n              <option value=\"default\">Default (ask for permissions)</option>\n              <option value=\"acceptEdits\">Accept Edits</option>\n              <option value=\"bypass\">Bypass (no permissions)</option>\n              <option value=\"plan\">Plan Mode</option>\n            </select>\n          </div>\n        </div>\n\n        <div className=\"flex gap-2 mt-6\">\n          <Button onClick={handleCreate} disabled={creating} className=\"flex-1\">\n            {creating ? 'Creating...' : 'Create Task'}\n          </Button>\n          <Button onClick={onClose} variant=\"secondary\" disabled={creating}>\n            Cancel\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nCreateTaskModal.displayName = 'CreateTaskModal';\n\n/**\n * TaskDetailModal - Task execution history viewer\n *\n * Modal component for viewing detailed task information and execution logs with\n * parsed messages, tool use visualization, and color-coded message types. Displays\n * task metadata, execution timeline, and comprehensive execution log with collapsible\n * tool input/output sections.\n *\n * ## Features\n *\n * - Task metadata display (name, agent, status, timestamps, duration)\n * - Parsed execution log with 5 message types\n * - Tool use visualization with collapsible input/output\n * - Color-coded message backgrounds\n * - Auto-expand for short tool results (< 200 chars)\n * - Empty state for tasks without execution logs\n * - Full-width modal with scrollable content\n *\n * ## Modal Layout\n *\n * Three main sections in vertical layout:\n *\n * ### 1. Header Section\n * - Task name (text-xl font-bold)\n * - Agent name and status badge (inline, color-coded)\n * - Task description (if provided, text-sm muted)\n * - Close button (XCircleIcon, top-right)\n *\n * ### 2. Task Info Section\n * Displays task metadata in compact list format:\n * - **Created**: Timestamp when task was created (toLocaleString)\n * - **Started**: Timestamp when execution began (if task.startedAt exists)\n * - **Completed**: Timestamp when execution finished (if task.completedAt exists)\n * - **Duration**: Total execution time in seconds (if task.duration exists)\n * - **Permission Mode**: The permission mode used for execution\n *\n * ### 3. Execution Log Section\n * Scrollable area with parsed execution log messages:\n * - flex-1 overflow-y-auto for scrolling\n * - space-y-3 for vertical message spacing\n * - Empty state: \"No execution log available\" (centered, muted)\n *\n * ## Message Types\n *\n * Five color-coded message types with distinct styling:\n *\n * ### 1. Assistant Messages (bg-primary/10)\n * - Text content from Claude\n * - Displays message.content as plain text\n * - whitespace-pre-wrap for formatting\n * - Source: assistant messages with text blocks\n *\n * ### 2. Tool Use Messages (bg-purple-500/10)\n * - Tool execution details with \ud83d\udd27 icon\n * - Tool name displayed in header (text-purple-400)\n * - Collapsible sections:\n *   - **\ud83d\udce5 Input Parameters**: JSON formatted tool input\n *   - **\ud83d\udce4 Output Result**: Plain text or JSON formatted result\n * - Auto-expand behavior:\n *   - Short results (< 200 chars): Auto-expanded\n *   - Long results (>= 200 chars): Collapsed by default\n * - Source: assistant messages with tool_use blocks\n *\n * ### 3. Status Messages (bg-blue-500/10)\n * - Progress updates and completion messages\n * - Displays status text with checkmark/info icons\n * - Examples: \"\u2705 Agent execution completed\", \"\u2705 Task completed successfully\"\n * - Source: status events, complete events, result events (success)\n *\n * ### 4. Error Messages (bg-red-500/10)\n * - Error details and stack traces\n * - Displays error with \u274c prefix\n * - Examples: \"\u274c Error: ...\", \"\u274c Task failed: ...\"\n * - Source: error events, result events (is_error: true)\n *\n * ### 5. Debug Messages (bg-yellow-500/10)\n * - Debug information and internal events\n * - Displays debug content or stringified event\n * - Source: debug events\n *\n * ## Execution Log Parsing\n *\n * The parseExecutionLog function processes task.executionLog array:\n *\n * ### Parsing Logic:\n * 1. Initialize empty messages array and toolUseMap\n * 2. Iterate through execution log events\n * 3. For each event, determine event type and extract relevant data:\n *\n * #### Assistant Message Events (type: 'message', content.type: 'assistant')\n * - Extract text blocks: Filter content blocks where type === 'text', join text fields\n * - Extract tool_use blocks: Filter content blocks where type === 'tool_use'\n * - Create tool use messages with toolName, toolInput, toolUseId\n * - Store in toolUseMap for matching with results\n *\n * #### User Message Events (type: 'message', content.type: 'user')\n * - Extract tool_result blocks: Filter content blocks where type === 'tool_result'\n * - Match with tool_use messages via tool_use_id\n * - Update corresponding tool message with toolResult\n *\n * #### Result Events (content.type: 'result')\n * - is_error === true: Create error message with \"\u274c Task failed: {result}\"\n * - is_error === false: Create status message \"\u2705 Task completed successfully\"\n * - If result has content: Create additional assistant message with result data\n *\n * #### Status Events (type: 'status')\n * - Extract status message or status field\n * - Create status message\n *\n * #### Debug Events (type: 'debug')\n * - Extract debug message or stringify event\n * - Create debug message\n *\n * #### Error Events (type: 'error')\n * - Extract error or message field\n * - Create error message with \u274c prefix\n *\n * #### Complete Events (type: 'complete')\n * - Create status message: \"\u2705 Agent execution completed\"\n *\n * ## Tool Use Visualization\n *\n * Tool use messages have special collapsible rendering:\n *\n * ### Header:\n * - Tool name with \ud83d\udd27 icon (uppercase, font-semibold)\n * - Purple color theme (text-purple-400)\n *\n * ### Input Parameters Section:\n * - `<details>` element with cursor-pointer\n * - Summary: \"\ud83d\udce5 Input Parameters\" (text-xs, muted, hover:text-foreground)\n * - Content: JSON.stringify(toolInput, null, 2) in <pre> with monospace font\n * - Background: bg-black/20 with rounded corners and padding\n *\n * ### Output Result Section:\n * - `<details>` element with cursor-pointer\n * - Summary: \"\ud83d\udce4 Output Result\" (text-xs, muted, hover:text-foreground)\n * - Auto-expand logic: `open={typeof toolResult === 'string' && toolResult.length < 200}`\n * - Content rendering:\n *   - String results: Plain text with whitespace-pre-wrap\n *   - Object results: JSON.stringify(toolResult, null, 2)\n * - Background: bg-black/20 with rounded corners and padding\n *\n * ## Styling Behavior\n *\n * Tailwind CSS classes:\n * - **Modal Overlay**: fixed inset-0 bg-black bg-opacity-50 z-50 (centered flex)\n * - **Modal Container**: bg-card rounded-lg shadow-xl max-w-5xl h-[85vh] flex flex-col\n * - **Header**: border-b p-4 with title, status badge, close button\n * - **Task Info**: border-b p-4 with text-sm spacing\n * - **Execution Log**: flex-1 overflow-y-auto p-4 space-y-3\n * - **Message Cards**: p-3 rounded-lg with color-coded backgrounds and borders\n * - **Status Badge Colors**:\n *   - completed: bg-green-100 text-green-700\n *   - failed: bg-red-100 text-red-700\n *   - running: bg-blue-100 text-blue-700\n *   - pending: bg-yellow-100 text-yellow-700\n * - **Footer**: border-t p-4 with Close button (flex justify-end)\n *\n * @example\n * // Basic usage with task detail viewing\n * const [selectedTask, setSelectedTask] = useState<api.Task | null>(null);\n *\n * return (\n *   <>\n *     <Button onClick={() => setSelectedTask(task)}>View Details</Button>\n *     {selectedTask && (\n *       <TaskDetailModal\n *         task={selectedTask}\n *         onClose={() => setSelectedTask(null)}\n *       />\n *     )}\n *   </>\n * );\n *\n * @example\n * // Understanding execution log display\n * // Given a completed task with execution log:\n * // task.executionLog = [\n * //   { type: 'status', message: 'Starting agent execution...' },\n * //   { type: 'message', content: { type: 'assistant', message: { content: [\n * //     { type: 'text', text: \"I'll review your code...\" },\n * //     { type: 'tool_use', id: 'tool_1', name: 'read_file', input: { file_path: 'auth.ts' } }\n * //   ]}}},\n * //   { type: 'message', content: { type: 'user', message: { content: [\n * //     { type: 'tool_result', tool_use_id: 'tool_1', content: '// file contents...' }\n * //   ]}}},\n * //   { type: 'message', content: { type: 'assistant', message: { content: [\n * //     { type: 'text', text: \"I found these security issues...\" }\n * //   ]}}},\n * //   { type: 'complete' }\n * // ]\n * //\n * // Parsed messages will display:\n * // 1. Status message: \"Starting agent execution...\" (blue background)\n * // 2. Assistant message: \"I'll review your code...\" (primary background)\n * // 3. Tool use message: \"\ud83d\udd27 read_file\" (purple background)\n * //    - Collapsible input: { file_path: 'auth.ts' }\n * //    - Collapsible output: '// file contents...' (auto-expanded if < 200 chars)\n * // 4. Assistant message: \"I found these security issues...\" (primary background)\n * // 5. Status message: \"\u2705 Agent execution completed\" (blue background)\n *\n * @example\n * // Understanding task info display\n * // Given a task:\n * // task = {\n * //   name: 'Review authentication code',\n * //   agentName: 'Code Reviewer',\n * //   status: 'completed',\n * //   description: 'Focus on security vulnerabilities',\n * //   createdAt: '2024-01-15T10:30:00Z',\n * //   startedAt: '2024-01-15T10:31:00Z',\n * //   completedAt: '2024-01-15T10:33:30Z',\n * //   duration: 150000, // 150 seconds\n * //   permissionMode: 'default'\n * // }\n * //\n * // Task info section displays:\n * // Created: 1/15/2024, 10:30:00 AM\n * // Started: 1/15/2024, 10:31:00 AM\n * // Completed: 1/15/2024, 10:33:30 AM\n * // Duration: 150.0s\n * // Permission Mode: default\n */\nconst TaskDetailModal: React.FC<{ task: api.Task; onClose: () => void }> = ({ task, onClose }) => {\n  /**\n   * Parsed message structure for execution log display\n   *\n   * @internal\n   */\n  interface ParsedMessage {\n    id: string;\n    type: 'status' | 'assistant' | 'tool_use' | 'error' | 'debug';\n    content: string;\n    timestamp: Date;\n    toolName?: string;\n    toolInput?: any;\n    toolResult?: any;\n    toolUseId?: string;\n  }\n\n  /**\n   * Parse execution log into displayable messages\n   *\n   * Processes task.executionLog array and extracts messages for display:\n   * - Assistant messages (text blocks)\n   * - Tool use messages (tool_use blocks with input/output matching)\n   * - Status messages (progress updates, completion)\n   * - Error messages (execution errors, failed results)\n   * - Debug messages (debug events)\n   *\n   * Uses toolUseMap to match tool_use blocks with tool_result blocks via toolUseId.\n   *\n   * @returns Array of ParsedMessage objects for rendering\n   * @internal\n   */\n  const parseExecutionLog = (): ParsedMessage[] => {\n    if (!task.executionLog || task.executionLog.length === 0) return [];\n\n    const messages: ParsedMessage[] = [];\n    const toolUseMap = new Map<string, ParsedMessage>();\n\n    task.executionLog.forEach((event: any, index: number) => {\n      // Handle message events\n      if (event.type === 'message' && event.content) {\n        const eventContent = event.content;\n\n        // Handle assistant messages\n        if (eventContent.type === 'assistant' && eventContent.message) {\n          const message = eventContent.message;\n          if (message.content && Array.isArray(message.content)) {\n            const blocks = message.content;\n\n            // Process text blocks\n            const textContent = blocks\n              .filter((block: any) => block.type === 'text')\n              .map((block: any) => block.text)\n              .join('\\n');\n\n            if (textContent) {\n              messages.push({\n                id: `msg-${index}-text`,\n                type: 'assistant',\n                content: textContent,\n                timestamp: new Date(),\n              });\n            }\n\n            // Process tool_use blocks\n            const toolUseBlocks = blocks.filter((block: any) => block.type === 'tool_use');\n            toolUseBlocks.forEach((toolBlock: any) => {\n              const toolMsg: ParsedMessage = {\n                id: `tool-use-${toolBlock.id}`,\n                type: 'tool_use',\n                content: '',\n                timestamp: new Date(),\n                toolName: toolBlock.name,\n                toolInput: toolBlock.input,\n                toolUseId: toolBlock.id,\n              };\n              messages.push(toolMsg);\n              toolUseMap.set(toolBlock.id, toolMsg);\n            });\n          }\n        }\n\n        // Handle user messages (tool results)\n        if (eventContent.type === 'user' && eventContent.message) {\n          const message = eventContent.message;\n          if (message.content && Array.isArray(message.content)) {\n            const toolResultBlocks = message.content.filter((block: any) => block.type === 'tool_result');\n            toolResultBlocks.forEach((resultBlock: any) => {\n              const toolUseId = resultBlock.tool_use_id;\n              const toolResult = resultBlock.content;\n\n              // Find corresponding tool_use message and update it\n              const toolMsg = toolUseMap.get(toolUseId);\n              if (toolMsg) {\n                toolMsg.toolResult = toolResult;\n              }\n            });\n          }\n        }\n\n        // Handle result\n        if (eventContent.type === 'result') {\n          const resultText = eventContent.is_error\n            ? `\u274c Task failed: ${eventContent.result}`\n            : `\u2705 Task completed successfully`;\n\n          messages.push({\n            id: `result-${index}`,\n            type: 'status',\n            content: resultText,\n            timestamp: new Date(),\n          });\n\n          if (!eventContent.is_error && eventContent.result) {\n            messages.push({\n              id: `result-content-${index}`,\n              type: 'assistant',\n              content: typeof eventContent.result === 'string' ? eventContent.result : JSON.stringify(eventContent.result, null, 2),\n              timestamp: new Date(),\n            });\n          }\n        }\n      }\n      // Handle status events\n      else if (event.type === 'status') {\n        messages.push({\n          id: `status-${index}`,\n          type: 'status',\n          content: event.message || event.status,\n          timestamp: new Date(),\n        });\n      }\n      // Handle debug events\n      else if (event.type === 'debug') {\n        messages.push({\n          id: `debug-${index}`,\n          type: 'debug',\n          content: event.message || JSON.stringify(event),\n          timestamp: new Date(),\n        });\n      }\n      // Handle error events\n      else if (event.type === 'error') {\n        messages.push({\n          id: `error-${index}`,\n          type: 'error',\n          content: `\u274c Error: ${event.error || event.message || JSON.stringify(event)}`,\n          timestamp: new Date(),\n        });\n      }\n      // Handle complete events\n      else if (event.type === 'complete') {\n        messages.push({\n          id: `complete-${index}`,\n          type: 'status',\n          content: '\u2705 Agent execution completed',\n          timestamp: new Date(),\n        });\n      }\n    });\n\n    return messages;\n  };\n\n  const messages = parseExecutionLog();\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-card rounded-lg shadow-xl w-full max-w-5xl h-[85vh] flex flex-col\">\n        {/* Header */}\n        <div className=\"border-b border-border p-4 flex justify-between items-center\">\n          <div>\n            <h2 className=\"text-xl font-bold\">{task.name}</h2>\n            <div className=\"flex items-center gap-2 mt-1\">\n              <span className=\"text-sm text-muted-foreground\">{task.agentName}</span>\n              <span className={`text-xs px-2 py-0.5 rounded ${\n                task.status === 'completed' ? 'bg-green-100 text-green-700' :\n                task.status === 'failed' ? 'bg-red-100 text-red-700' :\n                task.status === 'running' ? 'bg-blue-100 text-blue-700' :\n                'bg-yellow-100 text-yellow-700'\n              }`}>\n                {task.status}\n              </span>\n            </div>\n            {task.description && (\n              <p className=\"text-sm text-muted-foreground mt-1\">{task.description}</p>\n            )}\n          </div>\n          <button\n            onClick={onClose}\n            className=\"text-muted-foreground hover:text-foreground transition\"\n          >\n            <XCircleIcon className=\"h-6 w-6\" />\n          </button>\n        </div>\n\n        {/* Task Info */}\n        <div className=\"border-b border-border p-4 text-sm space-y-1\">\n          <div><span className=\"font-medium\">Created:</span> {new Date(task.createdAt).toLocaleString()}</div>\n          {task.startedAt && <div><span className=\"font-medium\">Started:</span> {new Date(task.startedAt).toLocaleString()}</div>}\n          {task.completedAt && <div><span className=\"font-medium\">Completed:</span> {new Date(task.completedAt).toLocaleString()}</div>}\n          {task.duration && <div><span className=\"font-medium\">Duration:</span> {(task.duration / 1000).toFixed(1)}s</div>}\n          <div><span className=\"font-medium\">Permission Mode:</span> {task.permissionMode}</div>\n        </div>\n\n        {/* Execution Log */}\n        <div className=\"flex-1 overflow-y-auto p-4 space-y-3\">\n          {messages.length === 0 ? (\n            <div className=\"text-center text-muted-foreground py-8\">\n              No execution log available\n            </div>\n          ) : (\n            messages.map((message) => (\n              <div\n                key={message.id}\n                className={`p-3 rounded-lg ${\n                  message.type === 'error'\n                    ? 'bg-red-500/10 border border-red-500/20'\n                    : message.type === 'debug'\n                    ? 'bg-yellow-500/10 border border-yellow-500/20'\n                    : message.type === 'status'\n                    ? 'bg-blue-500/10 border border-blue-500/20'\n                    : message.type === 'tool_use'\n                    ? 'bg-purple-500/10 border border-purple-500/20'\n                    : message.type === 'assistant'\n                    ? 'bg-primary/10 border border-primary/20'\n                    : 'bg-secondary'\n                }`}\n              >\n                <div className=\"flex items-start justify-between mb-1\">\n                  <span className=\"text-xs font-semibold uppercase tracking-wide\">\n                    {message.type === 'tool_use'\n                      ? `\ud83d\udd27 ${message.toolName}`\n                      : message.type}\n                  </span>\n                </div>\n\n                {message.type === 'tool_use' ? (\n                  <div className=\"text-sm space-y-2\">\n                    <div className=\"font-medium text-purple-400\">Tool: {message.toolName}</div>\n\n                    {/* Input Parameters */}\n                    {message.toolInput && (\n                      <details className=\"cursor-pointer\">\n                        <summary className=\"text-xs text-muted-foreground hover:text-foreground\">\n                          \ud83d\udce5 Input Parameters\n                        </summary>\n                        <pre className=\"mt-2 text-xs bg-black/20 p-2 rounded overflow-x-auto\">\n                          {JSON.stringify(message.toolInput, null, 2)}\n                        </pre>\n                      </details>\n                    )}\n\n                    {/* Output Result */}\n                    {message.toolResult && (\n                      <details\n                        className=\"cursor-pointer\"\n                        open={typeof message.toolResult === 'string' && message.toolResult.length < 200}\n                      >\n                        <summary className=\"text-xs text-muted-foreground hover:text-foreground\">\n                          \ud83d\udce4 Output Result\n                        </summary>\n                        <div className=\"mt-2 text-xs bg-black/20 p-2 rounded overflow-x-auto\">\n                          {typeof message.toolResult === 'string' ? (\n                            <pre className=\"whitespace-pre-wrap\">{message.toolResult}</pre>\n                          ) : (\n                            <pre>{JSON.stringify(message.toolResult, null, 2)}</pre>\n                          )}\n                        </div>\n                      </details>\n                    )}\n                  </div>\n                ) : (\n                  <div className=\"text-sm whitespace-pre-wrap break-words\">\n                    {message.content}\n                  </div>\n                )}\n              </div>\n            ))\n          )}\n        </div>\n\n        {/* Footer */}\n        <div className=\"border-t border-border p-4 flex justify-end gap-2\">\n          <Button onClick={onClose} variant=\"secondary\">\n            Close\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nTaskDetailModal.displayName = 'TaskDetailModal';\n\nexport default TasksPage;\n",
        "last_modified": "2026-01-02T15:11:36.289385"
      },
      "task_intent": {
        "title": "Document Frontend React Components and Hooks",
        "description": "Add comprehensive JSDoc documentation to all React components and custom hooks in the frontend, including prop types, usage examples, component purposes, state management, and side effects.",
        "from_plan": true
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2026-01-02T14:01:11.574876",
  "last_updated": "2026-01-02T14:22:15.113373"
}
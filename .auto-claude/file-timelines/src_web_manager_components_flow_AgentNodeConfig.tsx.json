{
  "file_path": "src/web/manager/components/flow/AgentNodeConfig.tsx",
  "main_branch_history": [],
  "task_views": {
    "007-uygulaman-n-genel-yap-s-n-d-zenleyece-iz-yani-uygu": {
      "task_id": "007-uygulaman-n-genel-yap-s-n-d-zenleyece-iz-yani-uygu",
      "branch_point": {
        "commit_hash": "9355e1f79162ecd7611ae3213457e87085b7fe4d",
        "content": "",
        "timestamp": "2026-01-02T15:21:46.864601"
      },
      "worktree_state": {
        "content": "import React from 'react';\nimport type { AgentNode } from '../../types';\nimport type { Agent, Skill } from '../../../../types/agent.types';\nimport { Button } from '../ui/Button';\nimport { Input } from '../ui/Input';\nimport { Select } from '../ui/Select';\nimport { Textarea } from '../ui/Textarea';\nimport { CpuChipIcon, PuzzlePieceIcon, TrashIcon } from '../ui/Icons';\n\n// Model override options\nconst MODEL_OPTIONS: { value: string; label: string }[] = [\n  { value: 'default', label: 'Use Agent Default' },\n  { value: 'claude-sonnet-4-20250514', label: 'Claude Sonnet 4' },\n  { value: 'claude-opus-4-20250514', label: 'Claude Opus 4' },\n  { value: 'claude-3-5-sonnet-20241022', label: 'Claude 3.5 Sonnet' },\n  { value: 'claude-3-5-haiku-20241022', label: 'Claude 3.5 Haiku' },\n];\n\nexport interface AgentNodeConfigProps {\n  node: AgentNode;\n  index: number;\n  onChange: (updates: Partial<AgentNode>) => void;\n  onRemove?: () => void;\n  canRemove?: boolean;\n  availableAgents: Agent[];\n  availableSkills: Skill[];\n  className?: string;\n}\n\n/**\n * Configuration panel for Agent nodes in the flow editor.\n * Allows users to select an agent, configure prompt template, skills, and execution settings.\n */\nconst AgentNodeConfig: React.FC<AgentNodeConfigProps> = ({\n  node,\n  index,\n  onChange,\n  onRemove,\n  canRemove = true,\n  availableAgents,\n  availableSkills,\n  className = '',\n}) => {\n  // Get selected agent details\n  const selectedAgent = availableAgents.find((a) => a.id === node.agentId);\n\n  // Toggle skill selection\n  const toggleSkill = (skillId: string, checked: boolean) => {\n    const newSkills = checked\n      ? [...node.skills, skillId]\n      : node.skills.filter((s) => s !== skillId);\n    onChange({ skills: newSkills });\n  };\n\n  return (\n    <div className={`p-4 bg-secondary/30 rounded-lg space-y-4 ${className}`}>\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <h4 className=\"font-medium flex items-center gap-2\">\n          <CpuChipIcon className=\"h-4 w-4 text-purple-600\" />\n          {node.name || `Agent ${index + 1}`}\n        </h4>\n        {canRemove && onRemove && (\n          <Button\n            type=\"button\"\n            variant=\"destructive\"\n            size=\"sm\"\n            onClick={onRemove}\n          >\n            <TrashIcon className=\"h-4 w-4\" />\n          </Button>\n        )}\n      </div>\n\n      {/* Node Name and Agent Selection */}\n      <div className=\"grid grid-cols-2 gap-3\">\n        <div>\n          <label className=\"block text-xs font-medium mb-1\">Node Name</label>\n          <Input\n            value={node.name}\n            onChange={(e) => onChange({ name: e.target.value })}\n            placeholder=\"Agent\"\n          />\n        </div>\n        <div>\n          <label className=\"block text-xs font-medium mb-1\">Select Agent</label>\n          <Select\n            value={node.agentId}\n            onChange={(e) => onChange({ agentId: e.target.value })}\n          >\n            <option value=\"\">-- Select an Agent --</option>\n            {availableAgents.map((agent) => (\n              <option key={agent.id} value={agent.id}>\n                {agent.name}\n              </option>\n            ))}\n          </Select>\n        </div>\n      </div>\n\n      {/* Node Description */}\n      <div>\n        <label className=\"block text-xs font-medium mb-1\">Description</label>\n        <Input\n          value={node.description || ''}\n          onChange={(e) => onChange({ description: e.target.value })}\n          placeholder=\"What this agent step does\"\n        />\n      </div>\n\n      {/* Agent Info (if selected) */}\n      {selectedAgent && (\n        <div className=\"p-3 bg-purple-50 rounded-md text-sm\">\n          <p className=\"font-medium text-purple-900\">{selectedAgent.name}</p>\n          {selectedAgent.description && (\n            <p className=\"text-purple-700 mt-1\">{selectedAgent.description}</p>\n          )}\n        </div>\n      )}\n\n      {/* Prompt Template */}\n      <div>\n        <label className=\"block text-xs font-medium mb-1\">\n          Prompt Template\n          <span className=\"text-muted-foreground font-normal ml-1\">\n            - Use &#123;&#123;input&#125;&#125; for input data, &#123;&#123;previousResult&#125;&#125; for chained agents\n          </span>\n        </label>\n        <Textarea\n          value={node.promptTemplate}\n          onChange={(e) => onChange({ promptTemplate: e.target.value })}\n          placeholder=\"Process the following input:&#10;&#10;{{input}}\"\n          className=\"min-h-[120px] font-mono text-sm\"\n        />\n      </div>\n\n      {/* Model Override */}\n      <div>\n        <label className=\"block text-xs font-medium mb-1\">Model Override</label>\n        <Select\n          value={node.modelOverride}\n          onChange={(e) => onChange({ modelOverride: e.target.value })}\n        >\n          {MODEL_OPTIONS.map((opt) => (\n            <option key={opt.value} value={opt.value}>\n              {opt.label}\n            </option>\n          ))}\n        </Select>\n      </div>\n\n      {/* Skills Selection */}\n      <div>\n        <label className=\"block text-xs font-medium mb-1\">Skills to Use</label>\n        {availableSkills.length === 0 ? (\n          <div className=\"text-muted-foreground text-sm py-2\">\n            No skills available. Create skills in the Skills section.\n          </div>\n        ) : (\n          <div className=\"flex flex-wrap gap-2\">\n            {availableSkills.map((skill) => (\n              <label\n                key={skill.id}\n                className={`flex items-center gap-1 px-2 py-1 rounded-full text-xs cursor-pointer transition-colors ${\n                  node.skills.includes(skill.id)\n                    ? 'bg-purple-100 text-purple-700 border border-purple-300'\n                    : 'bg-secondary border border-border hover:bg-secondary/80'\n                }`}\n              >\n                <input\n                  type=\"checkbox\"\n                  checked={node.skills.includes(skill.id)}\n                  onChange={(e) => toggleSkill(skill.id, e.target.checked)}\n                  className=\"hidden\"\n                />\n                <PuzzlePieceIcon className=\"h-3 w-3\" />\n                {skill.displayName || skill.name}\n              </label>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Execution Settings */}\n      <div className=\"pt-3 border-t border-border/50\">\n        <h5 className=\"text-xs font-medium mb-3 text-muted-foreground uppercase tracking-wide\">\n          Execution Settings\n        </h5>\n        <div className=\"grid grid-cols-3 gap-3\">\n          <div>\n            <label className=\"block text-xs font-medium mb-1\">\n              Timeout (ms)\n            </label>\n            <Input\n              type=\"number\"\n              value={node.timeout}\n              onChange={(e) =>\n                onChange({ timeout: parseInt(e.target.value) || 60000 })\n              }\n              min={1000}\n              max={600000}\n            />\n          </div>\n          <div>\n            <label className=\"block text-xs font-medium mb-1\">\n              Max Retries\n            </label>\n            <Input\n              type=\"number\"\n              value={node.maxRetries}\n              onChange={(e) =>\n                onChange({ maxRetries: parseInt(e.target.value) || 0 })\n              }\n              min={0}\n              max={10}\n            />\n          </div>\n          <div className=\"flex items-end\">\n            <label className=\"flex items-center gap-2 text-sm pb-2 cursor-pointer\">\n              <input\n                type=\"checkbox\"\n                checked={node.retryOnError}\n                onChange={(e) => onChange({ retryOnError: e.target.checked })}\n                className=\"w-4 h-4 rounded\"\n              />\n              Retry on Error\n            </label>\n          </div>\n        </div>\n      </div>\n\n      {/* Max Tokens (optional) */}\n      <div className=\"grid grid-cols-2 gap-3\">\n        <div>\n          <label className=\"block text-xs font-medium mb-1\">\n            Max Tokens (optional)\n          </label>\n          <Input\n            type=\"number\"\n            value={node.maxTokens || ''}\n            onChange={(e) =>\n              onChange({\n                maxTokens: e.target.value ? parseInt(e.target.value) : undefined,\n              })\n            }\n            placeholder=\"Leave empty for default\"\n            min={1}\n            max={100000}\n          />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AgentNodeConfig;\n",
        "last_modified": "2026-01-02T17:55:06.530951"
      },
      "task_intent": {
        "title": "007-uygulaman-n-genel-yap-s-n-d-zenleyece-iz-yani-uygu",
        "description": "Implement a workflow/flow system for organizing agents and skills into reusable, schedulable processes with input/output handling. This transforms the application from a simple agent manager to a process automation tool where users can define workflows like 'Web Scraper' that take input, run agents with skills, and produce structured outputs.",
        "from_plan": true
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2026-01-02T15:21:47.066829",
  "last_updated": "2026-01-02T15:21:47.077420"
}
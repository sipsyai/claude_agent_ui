{
  "file_path": "src/web/manager/components/SettingsPage.tsx",
  "main_branch_history": [],
  "task_views": {
    "004-document-frontend-react-components-and-hooks": {
      "task_id": "004-document-frontend-react-components-and-hooks",
      "branch_point": {
        "commit_hash": "34a3f60da53773d90bd6579cb1cfd8417a1dd0b9",
        "content": "import React, { useState, useEffect } from 'react';\nimport { Card, CardHeader, CardTitle, CardDescription, CardContent } from './ui/Card';\nimport { Input } from './ui/Input';\nimport { Button } from './ui/Button';\n\ninterface SettingsPageProps {\n  directoryName?: string;\n  onDirectoryChange: (directory: string) => void;\n}\n\ninterface Agent {\n  id: string;\n  name: string;\n  description?: string;\n}\n\ninterface TrainingAgentConfig {\n  trainingAgentId: string | null;\n  fallbackToLocal: boolean;\n}\n\nconst SettingsPage: React.FC<SettingsPageProps> = ({ directoryName, onDirectoryChange }) => {\n  const [inputValue, setInputValue] = useState(directoryName || '');\n  const [agents, setAgents] = useState<Agent[]>([]);\n  const [selectedAgentId, setSelectedAgentId] = useState<string>('');\n  const [useLocalFallback, setUseLocalFallback] = useState(true);\n  const [loading, setLoading] = useState(false);\n  const [saving, setSaving] = useState(false);\n\n  const handleSave = () => {\n    onDirectoryChange(inputValue);\n  };\n\n  // Load training agent config and agents\n  useEffect(() => {\n    const loadData = async () => {\n      setLoading(true);\n      try {\n        // Fetch training agent config\n        const configRes = await fetch('/api/manager/training-agent-config');\n        if (configRes.ok) {\n          const config: TrainingAgentConfig = await configRes.json();\n          setSelectedAgentId(config.trainingAgentId || '');\n          setUseLocalFallback(config.fallbackToLocal);\n        }\n\n        // Fetch all agents from Strapi\n        const agentsRes = await fetch('/api/strapi/agents');\n        if (agentsRes.ok) {\n          const data = await agentsRes.json();\n          setAgents(data.data || []);\n        }\n      } catch (error) {\n        console.error('Failed to load training agent config:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadData();\n  }, []);\n\n  const handleTrainingAgentSave = async () => {\n    setSaving(true);\n    try {\n      const agentId = useLocalFallback ? null : (selectedAgentId || null);\n\n      const res = await fetch('/api/manager/training-agent-config', {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ agentId })\n      });\n\n      if (!res.ok) {\n        throw new Error('Failed to update training agent config');\n      }\n\n      alert('Training agent configuration saved successfully!');\n    } catch (error) {\n      console.error('Failed to save training agent config:', error);\n      alert('Failed to save training agent configuration');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  return (\n    <div className=\"animate-fade-in max-w-4xl mx-auto\">\n      <h1 className=\"text-3xl sm:text-4xl font-bold mb-2\">Settings</h1>\n      <p className=\"text-muted-foreground mb-8\">Configure your manager settings.</p>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Project Directory</CardTitle>\n          <CardDescription>\n            Specify the directory containing your .claude folder. Leave empty to use the current working directory.\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-4\">\n            <div>\n              <label className=\"block text-sm font-medium mb-2\">Directory Path</label>\n              <Input\n                type=\"text\"\n                value={inputValue}\n                onChange={(e) => setInputValue(e.target.value)}\n                placeholder=\"e.g., /path/to/your/project or leave empty for current directory\"\n                className=\"w-full\"\n              />\n              <p className=\"text-xs text-muted-foreground mt-2\">\n                Current: {directoryName || 'Current working directory'}\n              </p>\n            </div>\n            <Button onClick={handleSave}>\n              Save Changes\n            </Button>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Training Agent Configuration Card */}\n      <Card className=\"mt-6\">\n        <CardHeader>\n          <CardTitle>Training Agent Configuration</CardTitle>\n          <CardDescription>\n            Select which agent to use for skill training. This agent will be used when training skills to evaluate and improve them.\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          {loading ? (\n            <div className=\"text-center py-4 text-muted-foreground\">Loading...</div>\n          ) : (\n            <div className=\"space-y-4\">\n              <div className=\"flex items-center space-x-2\">\n                <input\n                  type=\"checkbox\"\n                  id=\"use-local-fallback\"\n                  checked={useLocalFallback}\n                  onChange={(e) => setUseLocalFallback(e.target.checked)}\n                  className=\"h-4 w-4 rounded border-gray-300\"\n                />\n                <label htmlFor=\"use-local-fallback\" className=\"text-sm font-medium cursor-pointer\">\n                  Use local training-agent.md (fallback)\n                </label>\n              </div>\n\n              {!useLocalFallback && (\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">Select Training Agent</label>\n                  <select\n                    value={selectedAgentId}\n                    onChange={(e) => setSelectedAgentId(e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                  >\n                    <option value=\"\">Select an agent...</option>\n                    {agents.map((agent) => (\n                      <option key={agent.id} value={agent.id}>\n                        {agent.name} {agent.description ? `- ${agent.description}` : ''}\n                      </option>\n                    ))}\n                  </select>\n                  <p className=\"text-xs text-muted-foreground mt-2\">\n                    {selectedAgentId\n                      ? `Selected: ${agents.find((a) => a.id === selectedAgentId)?.name || 'Unknown'}`\n                      : 'No agent selected. Will fallback to local training-agent.md'}\n                  </p>\n                </div>\n              )}\n\n              <div className=\"pt-2\">\n                <Button onClick={handleTrainingAgentSave} disabled={saving || (!useLocalFallback && !selectedAgentId)}>\n                  {saving ? 'Saving...' : 'Save Training Agent'}\n                </Button>\n              </div>\n\n              {useLocalFallback && (\n                <div className=\"bg-blue-50 border border-blue-200 rounded-md p-3 text-sm text-blue-800\">\n                  <p className=\"font-medium\">Using Local Fallback</p>\n                  <p className=\"mt-1\">\n                    Skills will be trained using the training-agent.md file from .claude/agents/ directory.\n                    To use a database agent, uncheck the fallback option and select an agent.\n                  </p>\n                </div>\n              )}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n};\n\nexport default SettingsPage;\n",
        "timestamp": "2026-01-02T14:22:14.293924"
      },
      "worktree_state": {
        "content": "/**\n * SettingsPage - Manager Settings Configuration\n *\n * A comprehensive settings page component for configuring Claude Manager preferences including\n * project directory and training agent selection. Provides form-based configuration with\n * real-time validation, API integration, and persistent state management.\n *\n * ## Features\n *\n * - **Project Directory Configuration**: Set or update the project directory path\n * - **Training Agent Selection**: Choose which agent to use for skill training\n * - **Local Fallback Mode**: Option to use local training-agent.md instead of database agent\n * - **Form Validation**: Real-time input validation with field-level error feedback\n * - **API Integration**: Automatic loading and saving of configuration via REST APIs\n * - **Loading States**: Loading indicators during data fetch and save operations\n * - **Success/Error Feedback**: User notifications via alert dialogs\n * - **Responsive Layout**: Mobile-friendly card-based layout with auto-resizing inputs\n *\n * ## Settings Form\n *\n * The page is organized into two main configuration sections using Card components:\n *\n * ### Project Directory Section\n * - **Input Field**: Text input for directory path (supports absolute paths or empty for CWD)\n * - **Current Directory Display**: Shows currently active directory below input\n * - **Placeholder**: Helpful example path format (e.g., /path/to/your/project)\n * - **Save Button**: Triggers `onDirectoryChange` callback with new directory path\n * - **Auto-population**: Pre-fills input with `directoryName` prop on mount\n *\n * ### Training Agent Configuration Section\n * - **Fallback Checkbox**: Toggle between local training-agent.md and database agent\n * - **Agent Dropdown**: Select from list of available agents (hidden when fallback enabled)\n * - **Agent List**: Loaded from Strapi via `/api/strapi/agents` on mount\n * - **Selection Preview**: Shows selected agent name or fallback message\n * - **Info Panel**: Blue info box explaining local fallback behavior when enabled\n * - **Save Button**: Saves training agent config via API (disabled during save or invalid state)\n *\n * ## Preference Handling\n *\n * Manages two types of preferences with different persistence mechanisms:\n *\n * ### Project Directory Preference\n * - **State**: Stored in `inputValue` state (synced with `directoryName` prop)\n * - **Change Handling**: Updates `inputValue` on every keystroke via `setInputValue`\n * - **Save Workflow**: Invokes `onDirectoryChange` callback \u2192 parent updates \u2192 prop change\n * - **Persistence**: Managed by parent component (typically localStorage in ManagerApp)\n * - **Validation**: Accepts any string value (empty string = current working directory)\n *\n * ### Training Agent Preference\n * - **State**: Stored in `selectedAgentId` and `useLocalFallback` states\n * - **Initial Load**: Fetched from `/api/manager/training-agent-config` via `loadData()`\n * - **Change Handling**: Updates local state immediately on user interaction\n * - **Save Workflow**: Sends PUT request to `/api/manager/training-agent-config` with agentId\n * - **Persistence**: Stored server-side (typically in JSON file or database)\n * - **Fallback Logic**: If `useLocalFallback` is true, agentId is set to null on save\n *\n * ## Save Behavior\n *\n * Two independent save operations with different workflows:\n *\n * ### Project Directory Save (handleSave)\n * 1. User clicks \"Save Changes\" button\n * 2. Invokes `onDirectoryChange(inputValue)` callback\n * 3. Parent component handles persistence (typically to localStorage)\n * 4. No loading state or API call (synchronous callback)\n * 5. No success/error feedback displayed\n *\n * ### Training Agent Save (handleTrainingAgentSave)\n * 1. User clicks \"Save Training Agent\" button (disabled if invalid state)\n * 2. Sets `saving` state to true (button shows \"Saving...\" text)\n * 3. Determines agentId: null if fallback enabled, selectedAgentId otherwise\n * 4. Sends PUT request to `/api/manager/training-agent-config` with JSON body\n * 5. On success: Shows alert \"Training agent configuration saved successfully!\"\n * 6. On error: Shows alert \"Failed to save training agent configuration\"\n * 7. Sets `saving` state to false (re-enables button)\n *\n * ### Save Button States\n * - **Project Directory**: Always enabled (no validation required)\n * - **Training Agent**: Disabled when `saving` or when `!useLocalFallback && !selectedAgentId`\n *\n * ## Form State Management\n *\n * Five key state variables manage form behavior:\n *\n * - **inputValue**: Directory path input value (string)\n * - **agents**: Array of available agents loaded from Strapi (Agent[])\n * - **selectedAgentId**: Currently selected agent ID (string)\n * - **useLocalFallback**: Whether to use local training-agent.md (boolean)\n * - **loading**: Loading state during initial data fetch (boolean)\n * - **saving**: Saving state during training agent save operation (boolean)\n *\n * State update triggers:\n * - `inputValue`: Updates on every keystroke in directory input\n * - `agents`: Loaded once on mount via useEffect\n * - `selectedAgentId`: Updates on dropdown selection change\n * - `useLocalFallback`: Updates on checkbox toggle\n * - `loading`: True during initial data fetch, false after completion\n * - `saving`: True during save API call, false after completion\n *\n * ## API Integration\n *\n * Three API endpoints used for configuration management:\n *\n * ### GET /api/manager/training-agent-config\n * - **Purpose**: Load current training agent configuration\n * - **Timing**: Called on component mount via useEffect\n * - **Response**: TrainingAgentConfig object { trainingAgentId, fallbackToLocal }\n * - **Success**: Updates `selectedAgentId` and `useLocalFallback` states\n * - **Error**: Logs to console, continues with default states (empty agent, fallback enabled)\n *\n * ### GET /api/strapi/agents\n * - **Purpose**: Load list of available agents from database\n * - **Timing**: Called on component mount via useEffect\n * - **Response**: { data: Agent[] } with agent objects containing id, name, description\n * - **Success**: Updates `agents` state for dropdown population\n * - **Error**: Logs to console, continues with empty agents array\n *\n * ### PUT /api/manager/training-agent-config\n * - **Purpose**: Save training agent configuration\n * - **Timing**: Called when user clicks \"Save Training Agent\" button\n * - **Request**: JSON body { agentId: string | null }\n * - **Success**: Shows success alert dialog\n * - **Error**: Shows error alert dialog, logs to console\n *\n * ## UI States\n *\n * Four distinct UI states affect the component appearance:\n *\n * ### Default State\n * - All form fields enabled and editable\n * - \"Save Changes\" button enabled for directory\n * - \"Save Training Agent\" button enabled if valid selection\n * - Agent dropdown visible when fallback disabled\n *\n * ### Loading State (initial data fetch)\n * - `loading === true` during API calls in useEffect\n * - Training Agent section shows: \"Loading...\" centered text\n * - Directory section remains functional (no dependency on API data)\n * - Lasts until both API calls complete (or fail)\n *\n * ### Saving State (training agent save)\n * - `saving === true` during PUT request\n * - \"Save Training Agent\" button shows \"Saving...\" text\n * - Button disabled to prevent duplicate requests\n * - All form fields remain editable\n *\n * ### Fallback Enabled State\n * - `useLocalFallback === true`\n * - Agent dropdown hidden (not rendered)\n * - Blue info panel displayed explaining local fallback behavior\n * - Save button enabled regardless of agent selection\n *\n * ## Styling Behavior\n *\n * Uses Tailwind CSS with dark theme support and responsive design:\n *\n * - **Page Container**: `max-w-4xl mx-auto` for centered content (max 896px width)\n * - **Animations**: `animate-fade-in` on page mount for smooth appearance\n * - **Typography**:\n *   * Title: `text-3xl sm:text-4xl font-bold` (responsive sizing)\n *   * Labels: `text-sm font-medium` for form field labels\n *   * Descriptions: `text-muted-foreground` for secondary text\n *   * Info Text: `text-xs text-muted-foreground` for hints below inputs\n * - **Spacing**:\n *   * Vertical: `space-y-4` for form field stacks\n *   * Card Gap: `mt-6` between Project Directory and Training Agent cards\n *   * Section Margin: `mb-8` below page description\n * - **Cards**: Card component with CardHeader, CardTitle, CardDescription, CardContent sections\n * - **Info Panel**: Blue background (`bg-blue-50 border-blue-200 text-blue-800`) with rounded corners\n * - **Inputs**: Full width (`w-full`) with Input and select components\n * - **Buttons**: Primary variant for save actions, disabled state with reduced opacity\n *\n * @example\n * // Basic usage in ManagerApp dashboard phase\n * function ManagerApp() {\n *   const [directory, setDirectory] = useState(() => {\n *     return localStorage.getItem('directory') || '';\n *   });\n *\n *   const handleDirectoryChange = (newDirectory: string) => {\n *     setDirectory(newDirectory);\n *     localStorage.setItem('directory', newDirectory);\n *   };\n *\n *   return (\n *     <Layout>\n *       <SettingsPage\n *         directoryName={directory}\n *         onDirectoryChange={handleDirectoryChange}\n *       />\n *     </Layout>\n *   );\n * }\n *\n * @example\n * // Understanding training agent workflow\n * // 1. User opens Settings page\n * // 2. Component loads current config from API:\n * //    GET /api/manager/training-agent-config\n * //    Response: { trainingAgentId: \"123\", fallbackToLocal: false }\n * // 3. Component loads available agents from Strapi:\n * //    GET /api/strapi/agents\n * //    Response: { data: [{ id: \"123\", name: \"GPT Trainer\", description: \"...\" }] }\n * // 4. User unchecks \"Use local fallback\" checkbox\n * // 5. Agent dropdown appears with agent list\n * // 6. User selects different agent from dropdown\n * // 7. User clicks \"Save Training Agent\" button\n * // 8. Component sends: PUT /api/manager/training-agent-config\n * //    Body: { agentId: \"456\" }\n * // 9. Success alert: \"Training agent configuration saved successfully!\"\n *\n * @example\n * // Understanding local fallback mode\n * function TrainingAgentBehavior() {\n *   // When useLocalFallback is true:\n *   // - Agent dropdown is hidden (not rendered)\n *   // - Blue info panel explains local behavior\n *   // - On save: agentId is set to null\n *   // - Training uses .claude/agents/training-agent.md file\n *\n *   // When useLocalFallback is false:\n *   // - Agent dropdown is visible\n *   // - User must select an agent to enable save button\n *   // - On save: agentId is set to selectedAgentId\n *   // - Training uses selected database agent\n *\n *   return (\n *     <SettingsPage\n *       directoryName=\"/my/project\"\n *       onDirectoryChange={(dir) => console.log('New directory:', dir)}\n *     />\n *   );\n * }\n *\n * @example\n * // Directory path handling\n * // Empty path = current working directory\n * const emptyPath = ''; // Uses CWD\n * // Absolute path = specific project directory\n * const absolutePath = '/Users/name/projects/myapp';\n * // Relative path = relative to CWD\n * const relativePath = './myapp';\n * // Display: \"Current: {directoryName || 'Current working directory'}\"\n */\nimport React, { useState, useEffect } from 'react';\nimport { Card, CardHeader, CardTitle, CardDescription, CardContent } from './ui/Card';\nimport { Input } from './ui/Input';\nimport { Button } from './ui/Button';\n\n/**\n * Props for the SettingsPage component.\n *\n * @property {string} [directoryName] - Optional current project directory path. Pre-fills the directory input field. If empty or undefined, displays \"Current working directory\" as fallback. Typically comes from localStorage in parent component.\n * @property {function} onDirectoryChange - Callback invoked when user saves directory changes. Receives new directory path as parameter. Parent should handle persistence (e.g., localStorage) and state updates.\n */\ninterface SettingsPageProps {\n  directoryName?: string;\n  onDirectoryChange: (directory: string) => void;\n}\n\n/**\n * Agent interface representing a training agent from Strapi database.\n *\n * @property {string} id - Unique agent identifier from Strapi\n * @property {string} name - Agent display name shown in dropdown\n * @property {string} [description] - Optional agent description appended in dropdown (format: \"name - description\")\n */\ninterface Agent {\n  id: string;\n  name: string;\n  description?: string;\n}\n\n/**\n * Training agent configuration interface.\n *\n * @property {string | null} trainingAgentId - ID of selected training agent from Strapi, or null if using local fallback\n * @property {boolean} fallbackToLocal - Whether to use local training-agent.md file instead of database agent\n */\ninterface TrainingAgentConfig {\n  trainingAgentId: string | null;\n  fallbackToLocal: boolean;\n}\n\nconst SettingsPage: React.FC<SettingsPageProps> = ({ directoryName, onDirectoryChange }) => {\n  const [inputValue, setInputValue] = useState(directoryName || '');\n  const [agents, setAgents] = useState<Agent[]>([]);\n  const [selectedAgentId, setSelectedAgentId] = useState<string>('');\n  const [useLocalFallback, setUseLocalFallback] = useState(true);\n  const [loading, setLoading] = useState(false);\n  const [saving, setSaving] = useState(false);\n\n  /**\n   * Handles saving the project directory preference.\n   *\n   * Invokes the onDirectoryChange callback with the current input value. Parent component\n   * is responsible for persisting the directory path (typically to localStorage) and updating\n   * its own state. No loading state or API call is involved - this is a synchronous callback.\n   *\n   * @internal\n   */\n  const handleSave = () => {\n    onDirectoryChange(inputValue);\n  };\n\n  /**\n   * Loads training agent configuration and available agents on component mount.\n   *\n   * Fetches data from two API endpoints in parallel:\n   * 1. GET /api/manager/training-agent-config - Current training agent config\n   * 2. GET /api/strapi/agents - List of available agents from database\n   *\n   * On success, updates selectedAgentId, useLocalFallback, and agents states.\n   * On error, logs to console and continues with default states (empty agent, fallback enabled).\n   * Sets loading state to true during fetch, false after completion.\n   *\n   * @internal\n   */\n  useEffect(() => {\n    const loadData = async () => {\n      setLoading(true);\n      try {\n        // Fetch training agent config\n        const configRes = await fetch('/api/manager/training-agent-config');\n        if (configRes.ok) {\n          const config: TrainingAgentConfig = await configRes.json();\n          setSelectedAgentId(config.trainingAgentId || '');\n          setUseLocalFallback(config.fallbackToLocal);\n        }\n\n        // Fetch all agents from Strapi\n        const agentsRes = await fetch('/api/strapi/agents');\n        if (agentsRes.ok) {\n          const data = await agentsRes.json();\n          setAgents(data.data || []);\n        }\n      } catch (error) {\n        console.error('Failed to load training agent config:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadData();\n  }, []);\n\n  /**\n   * Handles saving the training agent configuration.\n   *\n   * Determines the agent ID based on local fallback preference:\n   * - If useLocalFallback is true: agentId = null (use local training-agent.md)\n   * - If useLocalFallback is false: agentId = selectedAgentId (use database agent)\n   *\n   * Sends PUT request to /api/manager/training-agent-config with the determined agentId.\n   * Shows success alert on successful save, error alert on failure.\n   * Sets saving state to true during request, false after completion.\n   * Button is disabled during save to prevent duplicate requests.\n   *\n   * @internal\n   */\n  const handleTrainingAgentSave = async () => {\n    setSaving(true);\n    try {\n      const agentId = useLocalFallback ? null : (selectedAgentId || null);\n\n      const res = await fetch('/api/manager/training-agent-config', {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ agentId })\n      });\n\n      if (!res.ok) {\n        throw new Error('Failed to update training agent config');\n      }\n\n      alert('Training agent configuration saved successfully!');\n    } catch (error) {\n      console.error('Failed to save training agent config:', error);\n      alert('Failed to save training agent configuration');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  return (\n    <div className=\"animate-fade-in max-w-4xl mx-auto\">\n      <h1 className=\"text-3xl sm:text-4xl font-bold mb-2\">Settings</h1>\n      <p className=\"text-muted-foreground mb-8\">Configure your manager settings.</p>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Project Directory</CardTitle>\n          <CardDescription>\n            Specify the directory containing your .claude folder. Leave empty to use the current working directory.\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-4\">\n            <div>\n              <label className=\"block text-sm font-medium mb-2\">Directory Path</label>\n              <Input\n                type=\"text\"\n                value={inputValue}\n                onChange={(e) => setInputValue(e.target.value)}\n                placeholder=\"e.g., /path/to/your/project or leave empty for current directory\"\n                className=\"w-full\"\n              />\n              <p className=\"text-xs text-muted-foreground mt-2\">\n                Current: {directoryName || 'Current working directory'}\n              </p>\n            </div>\n            <Button onClick={handleSave}>\n              Save Changes\n            </Button>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Training Agent Configuration Card */}\n      <Card className=\"mt-6\">\n        <CardHeader>\n          <CardTitle>Training Agent Configuration</CardTitle>\n          <CardDescription>\n            Select which agent to use for skill training. This agent will be used when training skills to evaluate and improve them.\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          {loading ? (\n            <div className=\"text-center py-4 text-muted-foreground\">Loading...</div>\n          ) : (\n            <div className=\"space-y-4\">\n              <div className=\"flex items-center space-x-2\">\n                <input\n                  type=\"checkbox\"\n                  id=\"use-local-fallback\"\n                  checked={useLocalFallback}\n                  onChange={(e) => setUseLocalFallback(e.target.checked)}\n                  className=\"h-4 w-4 rounded border-gray-300\"\n                />\n                <label htmlFor=\"use-local-fallback\" className=\"text-sm font-medium cursor-pointer\">\n                  Use local training-agent.md (fallback)\n                </label>\n              </div>\n\n              {!useLocalFallback && (\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">Select Training Agent</label>\n                  <select\n                    value={selectedAgentId}\n                    onChange={(e) => setSelectedAgentId(e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                  >\n                    <option value=\"\">Select an agent...</option>\n                    {agents.map((agent) => (\n                      <option key={agent.id} value={agent.id}>\n                        {agent.name} {agent.description ? `- ${agent.description}` : ''}\n                      </option>\n                    ))}\n                  </select>\n                  <p className=\"text-xs text-muted-foreground mt-2\">\n                    {selectedAgentId\n                      ? `Selected: ${agents.find((a) => a.id === selectedAgentId)?.name || 'Unknown'}`\n                      : 'No agent selected. Will fallback to local training-agent.md'}\n                  </p>\n                </div>\n              )}\n\n              <div className=\"pt-2\">\n                <Button onClick={handleTrainingAgentSave} disabled={saving || (!useLocalFallback && !selectedAgentId)}>\n                  {saving ? 'Saving...' : 'Save Training Agent'}\n                </Button>\n              </div>\n\n              {useLocalFallback && (\n                <div className=\"bg-blue-50 border border-blue-200 rounded-md p-3 text-sm text-blue-800\">\n                  <p className=\"font-medium\">Using Local Fallback</p>\n                  <p className=\"mt-1\">\n                    Skills will be trained using the training-agent.md file from .claude/agents/ directory.\n                    To use a database agent, uncheck the fallback option and select an agent.\n                  </p>\n                </div>\n              )}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n};\n\nSettingsPage.displayName = 'SettingsPage';\n\nexport default SettingsPage;\n",
        "last_modified": "2026-01-02T15:11:36.284563"
      },
      "task_intent": {
        "title": "Document Frontend React Components and Hooks",
        "description": "Add comprehensive JSDoc documentation to all React components and custom hooks in the frontend, including prop types, usage examples, component purposes, state management, and side effects.",
        "from_plan": true
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2026-01-02T14:01:11.362542",
  "last_updated": "2026-01-02T14:22:14.882042"
}
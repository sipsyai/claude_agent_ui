{
  "file_path": "src/web/manager/components/SkillsPage.tsx",
  "main_branch_history": [],
  "task_views": {
    "004-document-frontend-react-components-and-hooks": {
      "task_id": "004-document-frontend-react-components-and-hooks",
      "branch_point": {
        "commit_hash": "34a3f60da53773d90bd6579cb1cfd8417a1dd0b9",
        "content": "import React, { useState, useEffect } from 'react';\nimport type { Skill } from '../../../types/agent.types';\nimport * as api from '../services/api';\nimport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from './ui/Card';\nimport { Button } from './ui/Button';\nimport { Input } from './ui/Input';\nimport { ProgressBar } from './ui/ProgressBar';\nimport SkillCreationModal from './SkillCreationModal';\nimport SkillDetailsModal from './SkillDetailsModal';\nimport SkillCreatorChatPanel from './SkillCreatorChatPanel';\nimport SkillTrainingChatPanel from './SkillTrainingChatPanel';\nimport { CheckCircleIcon, SearchIcon, TrashIcon, XCircleIcon, ServerIcon, SparklesIcon } from './ui/Icons';\n\ninterface SkillsPageProps {\n  skills: Skill[];\n  onRefresh?: () => void;\n  directory?: string;\n}\n\ntype FilterMode = 'all' | 'used' | 'unused' | 'high-usage';\n\nconst SkillsPage: React.FC<SkillsPageProps> = ({ skills: initialSkills, onRefresh, directory }) => {\n  const [skills, setSkills] = useState<Skill[]>(initialSkills);\n  const [isCreationModalOpen, setIsCreationModalOpen] = useState(false);\n  const [editingSkill, setEditingSkill] = useState<Skill | null>(null);\n  const [selectedSkill, setSelectedSkill] = useState<Skill | null>(null);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [filterMode, setFilterMode] = useState<FilterMode>('all');\n  const [selectedSkillIds, setSelectedSkillIds] = useState<Set<string>>(new Set());\n  const [isDeleting, setIsDeleting] = useState(false);\n  const [autoRefreshEnabled, setAutoRefreshEnabled] = useState(true);\n  const [showCreatorChat, setShowCreatorChat] = useState(false);\n  const [trainingSkill, setTrainingSkill] = useState<Skill | null>(null);\n  const [showTrainingPanel, setShowTrainingPanel] = useState(false);\n\n  // Load skills with usage info\n  const loadSkillsWithUsage = async () => {\n    try {\n      const skillsWithUsage = await api.getSkills(directory, true);\n      setSkills(skillsWithUsage);\n    } catch (error) {\n      console.error('Failed to load skills with usage:', error);\n    }\n  };\n\n  // Initial load and when initialSkills change\n  useEffect(() => {\n    loadSkillsWithUsage();\n  }, [initialSkills, directory]);\n\n  // Auto-refresh every 30 seconds\n  useEffect(() => {\n    if (!autoRefreshEnabled) return;\n\n    const interval = setInterval(() => {\n      loadSkillsWithUsage();\n    }, 30000); // 30 seconds\n\n    return () => clearInterval(interval);\n  }, [autoRefreshEnabled, directory]);\n\n  const handleSkillCreated = () => {\n    loadSkillsWithUsage();\n    if (onRefresh) {\n      onRefresh();\n    }\n  };\n\n  const handleViewDetails = (skill: Skill) => {\n    setSelectedSkill(skill);\n  };\n\n  const handleEditClick = (skill: Skill) => {\n    setEditingSkill(skill);\n    setIsCreationModalOpen(true);\n  };\n\n  const handleSkillClick = (skill: Skill) => {\n    setTrainingSkill(skill);\n    setShowTrainingPanel(true);\n  };\n\n  const handleTrainingComplete = () => {\n    // Refresh skills to show updated experience scores\n    loadSkillsWithUsage();\n    if (onRefresh) {\n      onRefresh();\n    }\n  };\n\n  const toggleSkillSelection = (skillId: string) => {\n    const newSet = new Set(selectedSkillIds);\n    if (newSet.has(skillId)) {\n      newSet.delete(skillId);\n    } else {\n      newSet.add(skillId);\n    }\n    setSelectedSkillIds(newSet);\n  };\n\n  const toggleSelectAll = () => {\n    if (selectedSkillIds.size === filteredSkills.length) {\n      setSelectedSkillIds(new Set());\n    } else {\n      setSelectedSkillIds(new Set(filteredSkills.map(s => s.id)));\n    }\n  };\n\n  const handleBulkDelete = async () => {\n    if (selectedSkillIds.size === 0) return;\n\n    const confirmed = window.confirm(\n      `Are you sure you want to delete ${selectedSkillIds.size} skill(s)? This action cannot be undone.`\n    );\n\n    if (!confirmed) return;\n\n    setIsDeleting(true);\n    try {\n      // Delete skills one by one (could be optimized with a bulk endpoint)\n      const deletePromises = Array.from(selectedSkillIds).map(async (skillId) => {\n        try {\n          const response = await fetch(`/api/manager/skills/${skillId}`, {\n            method: 'DELETE',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({ directory }),\n          });\n          if (!response.ok) {\n            throw new Error(`Failed to delete ${skillId}`);\n          }\n        } catch (error) {\n          console.error(`Error deleting skill ${skillId}:`, error);\n          throw error;\n        }\n      });\n\n      await Promise.all(deletePromises);\n      setSelectedSkillIds(new Set());\n      loadSkillsWithUsage();\n      if (onRefresh) {\n        onRefresh();\n      }\n    } catch (error) {\n      alert(`Some skills could not be deleted. Check console for details.`);\n    } finally {\n      setIsDeleting(false);\n    }\n  };\n\n  // Filter and search logic\n  const filteredSkills = skills.filter((skill) => {\n    // Search filter\n    if (searchTerm.trim()) {\n      const term = searchTerm.toLowerCase();\n      const matchesSearch =\n        skill.name.toLowerCase().includes(term) ||\n        skill.description.toLowerCase().includes(term);\n      if (!matchesSearch) return false;\n    }\n\n    // Usage filter\n    const usageCount = skill.analytics?.executionCount || 0;\n    switch (filterMode) {\n      case 'used':\n        return usageCount > 0;\n      case 'unused':\n        return usageCount === 0;\n      case 'high-usage':\n        return usageCount >= 3;\n      case 'all':\n      default:\n        return true;\n    }\n  });\n\n  const allSelected = filteredSkills.length > 0 && selectedSkillIds.size === filteredSkills.length;\n  const someSelected = selectedSkillIds.size > 0 && !allSelected;\n\n  return (\n    <div className=\"animate-fade-in\">\n      {/* Header */}\n      <div className=\"flex justify-between items-center mb-6\">\n        <div className=\"flex-1 text-center\">\n          <h1 className=\"text-3xl sm:text-4xl font-bold mb-2\">Skills</h1>\n          <p className=\"text-muted-foreground\">\n            Discovered {skills.length} skills in .claude/skills/\n          </p>\n        </div>\n        <div className=\"absolute right-8 top-8 flex gap-2\">\n          <Button\n            onClick={() => setIsCreationModalOpen(true)}\n            variant=\"secondary\"\n          >\n            Create New Skill\n          </Button>\n          <Button\n            onClick={() => setShowCreatorChat(true)}\n            className=\"flex items-center gap-2 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700\"\n          >\n            <SparklesIcon className=\"h-4 w-4\" />\n            Create with Claude Manager\n          </Button>\n        </div>\n      </div>\n\n      {/* Search and Filter Bar */}\n      <div className=\"mb-6 space-y-3\">\n        {/* Search */}\n        <div className=\"relative\">\n          <SearchIcon className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n          <Input\n            type=\"text\"\n            placeholder=\"Search skills by name or description...\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            className=\"pl-10\"\n          />\n        </div>\n\n        {/* Filters and Controls */}\n        <div className=\"flex flex-wrap items-center gap-3\">\n          {/* Filter Dropdown */}\n          <div className=\"flex items-center gap-2\">\n            <label className=\"text-sm text-muted-foreground\">Filter:</label>\n            <select\n              value={filterMode}\n              onChange={(e) => setFilterMode(e.target.value as FilterMode)}\n              className=\"text-sm border border-border rounded px-3 py-1.5 focus:outline-none focus:ring-2 focus:ring-primary/50\"\n            >\n              <option value=\"all\">All Skills ({skills.length})</option>\n              <option value=\"used\">Used in Agents ({skills.filter(s => (s.analytics?.executionCount || 0) > 0).length})</option>\n              <option value=\"unused\">Not Used ({skills.filter(s => (s.analytics?.executionCount || 0) === 0).length})</option>\n              <option value=\"high-usage\">High Usage (3+) ({skills.filter(s => (s.analytics?.executionCount || 0) >= 3).length})</option>\n            </select>\n          </div>\n\n          {/* Auto-refresh Toggle */}\n          <label className=\"flex items-center gap-2 text-sm cursor-pointer\">\n            <input\n              type=\"checkbox\"\n              checked={autoRefreshEnabled}\n              onChange={(e) => setAutoRefreshEnabled(e.target.checked)}\n              className=\"w-4 h-4 rounded\"\n            />\n            <span className=\"text-muted-foreground\">Auto-refresh (30s)</span>\n          </label>\n\n          {/* Results Count */}\n          <div className=\"ml-auto text-sm text-muted-foreground\">\n            Showing {filteredSkills.length} of {skills.length} skills\n          </div>\n        </div>\n\n        {/* Bulk Actions Bar */}\n        {selectedSkillIds.size > 0 && (\n          <div className=\"flex items-center justify-between p-3 bg-blue-50 border border-blue-200 rounded-md\">\n            <div className=\"flex items-center gap-3\">\n              <span className=\"text-sm font-medium\">\n                {selectedSkillIds.size} skill(s) selected\n              </span>\n              <Button\n                size=\"sm\"\n                variant=\"secondary\"\n                onClick={() => setSelectedSkillIds(new Set())}\n              >\n                Clear Selection\n              </Button>\n            </div>\n            <Button\n              size=\"sm\"\n              variant=\"destructive\"\n              onClick={handleBulkDelete}\n              disabled={isDeleting}\n              className=\"bg-red-600 hover:bg-red-700 text-white\"\n            >\n              <TrashIcon className=\"h-4 w-4 mr-1\" />\n              {isDeleting ? 'Deleting...' : 'Delete Selected'}\n            </Button>\n          </div>\n        )}\n\n        {/* Select All */}\n        {filteredSkills.length > 0 && (\n          <div className=\"flex items-center gap-2\">\n            <label className=\"flex items-center gap-2 text-sm cursor-pointer\">\n              <input\n                type=\"checkbox\"\n                checked={allSelected}\n                ref={(input) => {\n                  if (input) {\n                    input.indeterminate = someSelected;\n                  }\n                }}\n                onChange={toggleSelectAll}\n                className=\"w-4 h-4 rounded\"\n              />\n              <span className=\"text-muted-foreground\">\n                {allSelected ? 'Deselect All' : someSelected ? 'Select All' : 'Select All'}\n              </span>\n            </label>\n          </div>\n        )}\n      </div>\n\n      {/* Modals */}\n      <SkillCreationModal\n        isOpen={isCreationModalOpen}\n        onClose={() => {\n          setIsCreationModalOpen(false);\n          setEditingSkill(null);\n        }}\n        onSkillCreated={handleSkillCreated}\n        editSkill={editingSkill || undefined}\n      />\n\n      <SkillDetailsModal\n        skill={selectedSkill}\n        isOpen={!!selectedSkill}\n        onClose={() => setSelectedSkill(null)}\n        onEdit={(skill) => {\n          setSelectedSkill(null);\n          handleEditClick(skill);\n        }}\n      />\n\n      <SkillCreatorChatPanel\n        isOpen={showCreatorChat}\n        onClose={() => setShowCreatorChat(false)}\n        onSkillCreated={handleSkillCreated}\n        directory={directory}\n      />\n\n      <SkillTrainingChatPanel\n        isOpen={showTrainingPanel}\n        onClose={() => {\n          setShowTrainingPanel(false);\n          setTrainingSkill(null);\n        }}\n        skill={trainingSkill}\n        directory={directory}\n        onTrainingComplete={handleTrainingComplete}\n      />\n\n      {/* Skills Grid */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {filteredSkills.length === 0 ? (\n          <div className=\"col-span-full text-center text-muted-foreground py-12\">\n            {searchTerm || filterMode !== 'all'\n              ? 'No skills match your search or filter criteria'\n              : 'No skills found in .claude/skills/'}\n          </div>\n        ) : (\n          filteredSkills.map((skill) => {\n            const isSelected = selectedSkillIds.has(skill.id);\n            const usageCount = skill.analytics?.executionCount || 0;\n\n            return (\n              <Card\n                key={skill.id}\n                className=\"flex flex-col hover:border-primary/80 transition-colors duration-300 group cursor-pointer\"\n                onClick={() => handleSkillClick(skill)}\n              >\n                <CardHeader className=\"pb-3\">\n                  <div className=\"flex items-start justify-between gap-2\">\n                    <CardTitle className=\"flex items-center gap-2 flex-1\">\n                      <span className=\"text-primary\">\ud83e\udde9</span>\n                      <span className=\"truncate\">{skill.name}</span>\n                    </CardTitle>\n                    {usageCount > 0 && (\n                      <span className=\"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded-full font-medium flex-shrink-0\">\n                        {usageCount} use{usageCount !== 1 ? 's' : ''}\n                      </span>\n                    )}\n                  </div>\n                  <CardDescription className=\"line-clamp-2\">{skill.description}</CardDescription>\n                </CardHeader>\n\n                <CardContent className=\"flex-grow space-y-3\">\n                  {/* Experience Progress */}\n                  <div className=\"pb-3 border-b border-border\">\n                    <ProgressBar\n                      value={skill.experienceScore || 0}\n                      showLabel={true}\n                      size=\"sm\"\n                    />\n                  </div>\n\n                  {/* Quick Stats */}\n                  <div className=\"grid grid-cols-2 gap-2 pb-3 border-b border-border\">\n                    {/* Usage Status */}\n                    {usageCount > 0 ? (\n                      <div className=\"flex items-center gap-2 text-sm\">\n                        <CheckCircleIcon className=\"h-4 w-4 text-green-600 flex-shrink-0\" />\n                        <span className=\"text-muted-foreground\">{usageCount} Agent{usageCount !== 1 ? 's' : ''}</span>\n                      </div>\n                    ) : (\n                      <div className=\"flex items-center gap-2 text-sm\">\n                        <XCircleIcon className=\"h-4 w-4 text-gray-600 flex-shrink-0\" />\n                        <span className=\"text-muted-foreground\">Unused</span>\n                      </div>\n                    )}\n\n                    {/* Tools Count */}\n                    {skill.toolConfig?.allowedTools && skill.toolConfig.allowedTools.length > 0 && (\n                      <div className=\"flex items-center gap-2 text-sm\">\n                        <span className=\"h-4 w-4 text-blue-600 flex-shrink-0\">\ud83d\udd27</span>\n                        <span className=\"text-muted-foreground\">{skill.toolConfig.allowedTools.length} Tool{skill.toolConfig.allowedTools.length !== 1 ? 's' : ''}</span>\n                      </div>\n                    )}\n                  </div>\n\n                  {/* Used in Agents */}\n                  {skill.agentSelection && skill.agentSelection.length > 0 && (\n                    <div>\n                      <div className=\"flex items-center gap-1.5 mb-1.5\">\n                        <CheckCircleIcon className=\"h-3.5 w-3.5 text-green-600\" />\n                        <h4 className=\"font-semibold text-xs text-muted-foreground uppercase\">Used In Agents</h4>\n                      </div>\n                      <div className=\"flex flex-wrap gap-1\">\n                        {skill.agentSelection.slice(0, 3).map((selection, idx) => {\n                          const agentName = typeof selection.agent === 'string' ? selection.agent : selection.agent.name;\n                          return (\n                            <span key={idx} className=\"text-xs bg-green-50 text-green-700 border border-green-200 px-2 py-0.5 rounded font-medium\">\n                              {agentName}\n                            </span>\n                          );\n                        })}\n                        {skill.agentSelection.length > 3 && (\n                          <span className=\"text-xs text-green-600 px-2 py-0.5 font-medium\">\n                            +{skill.agentSelection.length - 3} more\n                          </span>\n                        )}\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Allowed Tools */}\n                  {skill.toolConfig?.allowedTools && skill.toolConfig.allowedTools.length > 0 && (\n                    <div>\n                      <div className=\"flex items-center gap-1.5 mb-1.5\">\n                        <span className=\"h-3.5 w-3.5 text-blue-600\">\ud83d\udd27</span>\n                        <h4 className=\"font-semibold text-xs text-muted-foreground uppercase\">Allowed Tools</h4>\n                      </div>\n                      <div className=\"flex flex-wrap gap-1\">\n                        {skill.toolConfig.allowedTools.slice(0, 4).map((tool, idx) => (\n                          <span key={idx} className=\"text-xs bg-blue-50 text-blue-700 border border-blue-200 px-2 py-0.5 rounded\">\n                            {tool}\n                          </span>\n                        ))}\n                        {skill.toolConfig.allowedTools.length > 4 && (\n                          <span className=\"text-xs text-blue-600 px-2 py-0.5\">\n                            +{skill.toolConfig.allowedTools.length - 4}\n                          </span>\n                        )}\n                      </div>\n                    </div>\n                  )}\n\n                  {/* MCP Tools */}\n                  {skill.mcpConfig && skill.mcpConfig.length > 0 && (\n                    <div>\n                      <div className=\"flex items-center gap-1.5 mb-1.5\">\n                        <ServerIcon className=\"h-3.5 w-3.5 text-indigo-600\" />\n                        <h4 className=\"font-semibold text-xs text-muted-foreground uppercase\">MCP Servers</h4>\n                      </div>\n                      <div className=\"space-y-1.5\">\n                        {skill.mcpConfig.slice(0, 2).map((config, idx) => {\n                          const serverName = typeof config.mcpServer === 'string' ? config.mcpServer : config.mcpServer.name;\n                          const toolsCount = config.selectedTools?.length || 0;\n                          return (\n                            <div key={idx}>\n                              <div className=\"text-xs font-medium text-indigo-600 mb-0.5\">{serverName}</div>\n                              {toolsCount > 0 && (\n                                <div className=\"flex flex-wrap gap-1\">\n                                  {config.selectedTools!.slice(0, 3).map((toolSel, tidx) => {\n                                    const toolName = typeof toolSel.mcpTool === 'string' ? toolSel.mcpTool : toolSel.mcpTool.name;\n                                    return (\n                                      <span key={tidx} className=\"text-xs bg-indigo-50 text-indigo-700 border border-indigo-200 px-2 py-0.5 rounded\">\n                                        {toolName}\n                                      </span>\n                                    );\n                                  })}\n                                  {toolsCount > 3 && (\n                                    <span className=\"text-xs text-indigo-600 px-2 py-0.5\">\n                                      +{toolsCount - 3}\n                                    </span>\n                                  )}\n                                </div>\n                              )}\n                            </div>\n                          );\n                        })}\n                        {skill.mcpConfig.length > 2 && (\n                          <div className=\"text-xs text-indigo-600 font-medium\">\n                            +{skill.mcpConfig.length - 2} more server(s)\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  )}\n\n                  {/* File Info */}\n                  <div className=\"text-xs text-muted-foreground pt-2 border-t border-border\">\n                    \ud83d\udcc4 {skill.id}.md\n                  </div>\n                </CardContent>\n\n                <CardFooter className=\"flex gap-2 pt-3\">\n                  <Button\n                    className=\"flex-1\"\n                    size=\"sm\"\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      handleViewDetails(skill);\n                    }}\n                  >\n                    View Details\n                  </Button>\n                  <Button\n                    variant=\"secondary\"\n                    size=\"sm\"\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      handleEditClick(skill);\n                    }}\n                  >\n                    Edit\n                  </Button>\n                </CardFooter>\n              </Card>\n            );\n          })\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default SkillsPage;\n",
        "timestamp": "2026-01-02T14:22:14.293924"
      },
      "worktree_state": {
        "content": "import React, { useState, useEffect } from 'react';\nimport type { Skill } from '../../../types/agent.types';\nimport * as api from '../services/api';\nimport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from './ui/Card';\nimport { Button } from './ui/Button';\nimport { Input } from './ui/Input';\nimport { ProgressBar } from './ui/ProgressBar';\nimport SkillCreationModal from './SkillCreationModal';\nimport SkillDetailsModal from './SkillDetailsModal';\nimport SkillCreatorChatPanel from './SkillCreatorChatPanel';\nimport SkillTrainingChatPanel from './SkillTrainingChatPanel';\nimport { CheckCircleIcon, SearchIcon, TrashIcon, XCircleIcon, ServerIcon, SparklesIcon } from './ui/Icons';\n\n/**\n * SkillsPage - Comprehensive skill management interface\n *\n * Page-level component for managing skills with listing, creation, editing, training,\n * search/filter capabilities, and bulk operations. Provides both form-based and\n * chat-based creation workflows.\n *\n * ## Features\n *\n * - Skill listing with responsive grid layout (1/2/3 columns)\n * - Dual creation modes (form-based and AI-powered chat-based)\n * - Search and filter capabilities (name, description, usage patterns)\n * - Bulk operations (multi-select and bulk delete)\n * - Skill training workflow with interactive chat panel\n * - Auto-refresh with configurable interval (30 seconds)\n * - Usage analytics and experience score tracking\n *\n * ## Skill Listing\n *\n * Skills are displayed in a responsive grid with rich information cards showing:\n *\n * - **Header**: Skill name with emoji icon, usage count badge (if > 0)\n * - **Description**: Two-line truncated description with line-clamp-2\n * - **Experience Progress**: Visual progress bar showing skill experience score (0-100)\n * - **Quick Stats**:\n *   - Usage Status: CheckCircleIcon (green) if used, XCircleIcon (gray) if unused\n *   - Tools Count: Number of allowed tools configured for the skill\n * - **Agent Usage**: First 3 agents using this skill with overflow indicator (+N more)\n * - **Allowed Tools**: First 4 tools with overflow indicator (+N)\n * - **MCP Servers**: First 2 MCP server configurations with nested tool display\n * - **File Info**: Skill markdown filename (e.g., \"skill-name.md\")\n * - **Action Buttons**: View Details and Edit buttons in card footer\n * - **Click to Train**: Entire card is clickable to open training panel\n *\n * ## Creation Workflow\n *\n * Two creation modes are available:\n *\n * 1. **Form-Based Creation**: \"Create New Skill\" button opens SkillCreationModal\n *    - Manual configuration with form fields\n *    - Detailed tool configuration (allowed/disallowed tabs)\n *    - MCP server tool selection\n *    - Input fields builder with 7 field types\n *    - Advanced model configuration override\n *    - Additional files upload support\n *\n * 2. **Chat-Based Creation**: \"Create with Claude Manager\" button opens SkillCreatorChatPanel\n *    - AI-powered interactive skill creation\n *    - Natural language conversation workflow\n *    - SSE streaming integration\n *    - Automatic skill file generation and saving\n *    - Success/error state handling with visual feedback\n *\n * ## Search and Filtering\n *\n * Advanced search and filtering capabilities:\n *\n * - **Search**: Real-time search by skill name or description (case-insensitive, partial matching)\n *   - SearchIcon displayed in input field (left side)\n *   - Filters skills as user types\n *\n * - **Filter Modes**: Four filter options with dynamic counts:\n *   - `all`: Show all skills (default)\n *   - `used`: Skills used in at least one agent (executionCount > 0)\n *   - `unused`: Skills not used in any agent (executionCount === 0)\n *   - `high-usage`: Skills used in 3+ agents (executionCount >= 3)\n *   - Each option shows count in parentheses (e.g., \"Used in Agents (5)\")\n *\n * - **Results Count**: \"Showing X of Y skills\" display in filter bar\n *\n * ## Bulk Operations\n *\n * Multi-select functionality for bulk actions:\n *\n * - **Checkbox Selection**: Each filtered skill can be selected via checkbox\n * - **Select All**: Checkbox with indeterminate state support\n *   - Unchecked: No skills selected\n *   - Indeterminate: Some skills selected (someSelected state)\n *   - Checked: All filtered skills selected (allSelected state)\n *   - Toggle behavior: Select All \u2194 Deselect All\n * - **Bulk Actions Bar**: Appears when skills are selected (blue background)\n *   - Shows selection count: \"N skill(s) selected\"\n *   - Clear Selection button (secondary variant)\n *   - Delete Selected button (red destructive variant)\n * - **Bulk Delete Workflow**:\n *   1. Select skills via checkboxes\n *   2. Click \"Delete Selected\" button\n *   3. Confirmation dialog appears\n *   4. Skills deleted via DELETE API calls (sequential Promise.all)\n *   5. Success: Refresh list and clear selection\n *   6. Error: Alert with error message, check console for details\n *\n * ## Skill Training\n *\n * Interactive skill training workflow:\n *\n * - **Training Trigger**: Click on any skill card to open SkillTrainingChatPanel\n * - **Training Panel**: Slide-in panel with chat interface\n *   - Auto-start training conversation\n *   - Status tracking (idle, analyzing, training, evaluating, updating, completed, error)\n *   - Score progression display (before \u2192 after with visual indicators)\n *   - Message flow with user and assistant messages\n *   - Progress bar showing training status\n * - **Training Completion**:\n *   - Refresh skills list to show updated experience scores\n *   - Invoke onRefresh callback for parent component\n *   - Close panel or retry on error\n *\n * ## Auto-Refresh\n *\n * Automatic data refresh capability:\n *\n * - **Toggle**: Checkbox to enable/disable auto-refresh (enabled by default)\n * - **Interval**: 30 seconds (30000ms)\n * - **Mechanism**: setInterval with cleanup on unmount or toggle off\n * - **API Call**: loadSkillsWithUsage() fetches fresh skill data with usage analytics\n * - **Use Case**: Keep skill list and usage statistics up-to-date without manual refresh\n *\n * ## Directory Integration\n *\n * Skills are filtered and loaded based on directory context:\n *\n * - **Directory Prop**: Optional directory path for filtering skills\n * - **API Integration**: getSkills(directory, true) with includeUsage flag\n * - **Auto-Reload**: useEffect dependency on directory triggers reload when directory changes\n * - **Scoped Operations**: All create/edit/delete/train operations use directory context\n *\n * ## Styling Behavior\n *\n * Tailwind CSS classes and responsive design:\n *\n * - **Animation**: animate-fade-in on page mount for smooth entry\n * - **Header**: Centered title with absolute-positioned action buttons (right-8 top-8)\n * - **Create Buttons**:\n *   - \"Create New Skill\": secondary variant, standard styling\n *   - \"Create with Claude Manager\": gradient background (purple-600 to blue-600), SparklesIcon\n * - **Grid Layout**: grid-cols-1 md:grid-cols-2 lg:grid-cols-3 (responsive columns)\n * - **Skill Cards**:\n *   - hover:border-primary/80 transition-colors (300ms duration)\n *   - cursor-pointer for click-to-train interaction\n *   - group class for coordinated hover effects\n * - **Color-Coding**:\n *   - Used skills: Green badges (bg-green-50, text-green-700, border-green-200)\n *   - Unused skills: Gray icon (text-gray-600)\n *   - Tools: Blue badges (bg-blue-50, text-blue-700, border-blue-200)\n *   - MCP Servers: Indigo badges (bg-indigo-50, text-indigo-700, border-indigo-200)\n *   - Bulk Actions: Blue background (bg-blue-50, border-blue-200)\n *   - Delete Button: Red background (bg-red-600, hover:bg-red-700)\n *\n * @example\n * // Basic usage in ManagerApp dashboard phase\n * import ManagerApp from './ManagerApp';\n *\n * function App() {\n *   return <ManagerApp />;\n * }\n *\n * // Inside ManagerApp, when activeView === 'Skills':\n * <SkillsPage\n *   skills={skills}\n *   onRefresh={handleRefreshSkills}\n *   directory={directory}\n * />\n *\n * @example\n * // Skill creation workflow (form-based)\n * // 1. User clicks \"Create New Skill\" button\n * // 2. SkillCreationModal opens with empty form\n * // 3. User fills in:\n * //    - Core Configuration (name, description, category, version, license, isPublic)\n * //    - Tool Configuration (allowed/disallowed tools tabs)\n * //    - MCP Server Tools (hierarchical multi-select)\n * //    - Input Fields (dynamic field builder with 7 types)\n * //    - Advanced Settings (model override, temperature, maxTokens)\n * //    - Additional Files (upload up to 8 file types)\n * //    - Skill Instructions (markdown textarea)\n * // 4. Form validation runs (required fields, JSON schema, patterns)\n * // 5. Submit creates skill via POST /api/manager/skills\n * // 6. Success: Green banner, auto-close after 1.5s, refresh list\n * // 7. Error: Red banner with error message\n *\n * @example\n * // Skill creation workflow (chat-based)\n * // 1. User clicks \"Create with Claude Manager\" button (gradient purple-to-blue)\n * // 2. SkillCreatorChatPanel slides in from right\n * // 3. Auto-start conversation with initial prompt\n * // 4. User describes skill requirements in natural language\n * // 5. Assistant asks clarifying questions (tools, behavior, inputs)\n * // 6. SSE streaming displays real-time messages\n * // 7. Assistant creates skill file using Write tool\n * // 8. useSkillCreator detects creation (tool use parsing)\n * // 9. Panel state changes: chat \u2192 creating \u2192 success\n * // 10. Success message: \"Skill created successfully!\"\n * // 11. Skills list refreshes to show new skill\n * // 12. User can close panel or create another skill\n *\n * @example\n * // Search and filter workflow\n * // 1. User types \"api\" in search box\n * // 2. filteredSkills filters to skills matching \"api\" in name or description\n * // 3. Results count updates: \"Showing 3 of 15 skills\"\n * // 4. User changes filter from \"All Skills (15)\" to \"Used in Agents (8)\"\n * // 5. filteredSkills further filters to skills with executionCount > 0\n * // 6. Results count updates: \"Showing 2 of 15 skills\"\n * // 7. User clears search box\n * // 8. Results count updates: \"Showing 8 of 15 skills\"\n * // 9. User changes filter to \"High Usage (3+) (5)\"\n * // 10. Only skills with executionCount >= 3 are shown\n *\n * @example\n * // Bulk delete workflow\n * // 1. User clicks \"Select All\" checkbox\n * // 2. All filtered skills are selected (checkboxes checked)\n * // 3. selectedSkillIds Set populated with all filtered skill IDs\n * // 4. Bulk Actions Bar appears: \"8 skill(s) selected\"\n * // 5. User clicks \"Delete Selected\" button (red)\n * // 6. Confirmation dialog: \"Are you sure you want to delete 8 skill(s)?\"\n * // 7. User confirms\n * // 8. isDeleting state set to true, button shows \"Deleting...\"\n * // 9. Sequential DELETE API calls via Promise.all\n * // 10. Success: selectedSkillIds cleared, list refreshed, banner disappears\n * // 11. Error: Alert shown, console logs errors, isDeleting set to false\n */\n\n/**\n * Props for SkillsPage component\n *\n * @property {Skill[]} skills - Array of Skill objects to display (initial skills from parent)\n * @property {() => void} [onRefresh] - Optional callback invoked after skill creation, edit, delete, or training completion\n * @property {string} [directory] - Optional directory path for filtering skills (e.g., \"/path/to/project\")\n */\ninterface SkillsPageProps {\n  skills: Skill[];\n  onRefresh?: () => void;\n  directory?: string;\n}\n\n/**\n * Filter modes for skill listing\n *\n * @typedef {'all' | 'used' | 'unused' | 'high-usage'} FilterMode\n *\n * - `all`: Show all skills regardless of usage\n * - `used`: Show only skills used in at least one agent (executionCount > 0)\n * - `unused`: Show only skills not used in any agent (executionCount === 0)\n * - `high-usage`: Show only skills used in 3+ agents (executionCount >= 3)\n */\ntype FilterMode = 'all' | 'used' | 'unused' | 'high-usage';\n\nconst SkillsPage: React.FC<SkillsPageProps> = ({ skills: initialSkills, onRefresh, directory }) => {\n  const [skills, setSkills] = useState<Skill[]>(initialSkills);\n  const [isCreationModalOpen, setIsCreationModalOpen] = useState(false);\n  const [editingSkill, setEditingSkill] = useState<Skill | null>(null);\n  const [selectedSkill, setSelectedSkill] = useState<Skill | null>(null);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [filterMode, setFilterMode] = useState<FilterMode>('all');\n  const [selectedSkillIds, setSelectedSkillIds] = useState<Set<string>>(new Set());\n  const [isDeleting, setIsDeleting] = useState(false);\n  const [autoRefreshEnabled, setAutoRefreshEnabled] = useState(true);\n  const [showCreatorChat, setShowCreatorChat] = useState(false);\n  const [trainingSkill, setTrainingSkill] = useState<Skill | null>(null);\n  const [showTrainingPanel, setShowTrainingPanel] = useState(false);\n\n  /**\n   * Load skills with usage analytics\n   *\n   * Fetches skills from the API with includeUsage flag to get execution counts\n   * and experience scores. Updates local skills state with the fetched data.\n   *\n   * @internal\n   */\n  const loadSkillsWithUsage = async () => {\n    try {\n      const skillsWithUsage = await api.getSkills(directory, true);\n      setSkills(skillsWithUsage);\n    } catch (error) {\n      console.error('Failed to load skills with usage:', error);\n    }\n  };\n\n  // Initial load and when initialSkills change\n  useEffect(() => {\n    loadSkillsWithUsage();\n  }, [initialSkills, directory]);\n\n  // Auto-refresh every 30 seconds\n  useEffect(() => {\n    if (!autoRefreshEnabled) return;\n\n    const interval = setInterval(() => {\n      loadSkillsWithUsage();\n    }, 30000); // 30 seconds\n\n    return () => clearInterval(interval);\n  }, [autoRefreshEnabled, directory]);\n\n  /**\n   * Handle skill creation completion\n   *\n   * Callback invoked after a skill is successfully created (via form or chat).\n   * Refreshes the skills list to show the new skill and invokes parent onRefresh callback.\n   *\n   * @internal\n   */\n  const handleSkillCreated = () => {\n    loadSkillsWithUsage();\n    if (onRefresh) {\n      onRefresh();\n    }\n  };\n\n  /**\n   * Handle view details click\n   *\n   * Opens the SkillDetailsModal for the selected skill. Triggered by clicking\n   * \"View Details\" button in skill card footer.\n   *\n   * @internal\n   * @param {Skill} skill - Skill object to view details for\n   */\n  const handleViewDetails = (skill: Skill) => {\n    setSelectedSkill(skill);\n  };\n\n  /**\n   * Handle edit click\n   *\n   * Opens the SkillCreationModal in edit mode with pre-populated skill data.\n   * Triggered by clicking \"Edit\" button in skill card footer.\n   *\n   * @internal\n   * @param {Skill} skill - Skill object to edit\n   */\n  const handleEditClick = (skill: Skill) => {\n    setEditingSkill(skill);\n    setIsCreationModalOpen(true);\n  };\n\n  /**\n   * Handle skill card click\n   *\n   * Opens the SkillTrainingChatPanel for the selected skill. Triggered by clicking\n   * anywhere on the skill card (except action buttons which have stopPropagation).\n   *\n   * @internal\n   * @param {Skill} skill - Skill object to train\n   */\n  const handleSkillClick = (skill: Skill) => {\n    setTrainingSkill(skill);\n    setShowTrainingPanel(true);\n  };\n\n  /**\n   * Handle training completion\n   *\n   * Callback invoked after skill training completes successfully. Refreshes the\n   * skills list to show updated experience scores and invokes parent onRefresh callback.\n   *\n   * @internal\n   */\n  const handleTrainingComplete = () => {\n    // Refresh skills to show updated experience scores\n    loadSkillsWithUsage();\n    if (onRefresh) {\n      onRefresh();\n    }\n  };\n\n  /**\n   * Toggle individual skill selection\n   *\n   * Adds or removes a skill ID from the selectedSkillIds Set. Used for bulk\n   * delete operations. Creates a new Set to trigger React re-render.\n   *\n   * @internal\n   * @param {string} skillId - Skill ID to toggle selection for\n   */\n  const toggleSkillSelection = (skillId: string) => {\n    const newSet = new Set(selectedSkillIds);\n    if (newSet.has(skillId)) {\n      newSet.delete(skillId);\n    } else {\n      newSet.add(skillId);\n    }\n    setSelectedSkillIds(newSet);\n  };\n\n  /**\n   * Toggle select all filtered skills\n   *\n   * If all filtered skills are selected, deselects all. Otherwise, selects all\n   * filtered skills. Note: Only operates on currently filtered skills, not all skills.\n   *\n   * @internal\n   */\n  const toggleSelectAll = () => {\n    if (selectedSkillIds.size === filteredSkills.length) {\n      setSelectedSkillIds(new Set());\n    } else {\n      setSelectedSkillIds(new Set(filteredSkills.map(s => s.id)));\n    }\n  };\n\n  /**\n   * Handle bulk delete operation\n   *\n   * Deletes all selected skills after user confirmation. Shows confirmation dialog,\n   * then deletes skills sequentially via DELETE API calls. On success, clears selection\n   * and refreshes the list. On error, shows alert with error message.\n   *\n   * Workflow:\n   * 1. Check if any skills are selected (return early if none)\n   * 2. Show confirmation dialog with skill count\n   * 3. If confirmed, set isDeleting to true (shows \"Deleting...\" in button)\n   * 4. Map selected skill IDs to DELETE API calls\n   * 5. Execute all DELETE calls in parallel with Promise.all\n   * 6. On success: Clear selectedSkillIds, refresh list, invoke onRefresh\n   * 7. On error: Show alert, log errors to console, keep selection intact\n   * 8. Finally: Set isDeleting to false (restore button state)\n   *\n   * @internal\n   */\n  const handleBulkDelete = async () => {\n    if (selectedSkillIds.size === 0) return;\n\n    const confirmed = window.confirm(\n      `Are you sure you want to delete ${selectedSkillIds.size} skill(s)? This action cannot be undone.`\n    );\n\n    if (!confirmed) return;\n\n    setIsDeleting(true);\n    try {\n      // Delete skills one by one (could be optimized with a bulk endpoint)\n      const deletePromises = Array.from(selectedSkillIds).map(async (skillId) => {\n        try {\n          const response = await fetch(`/api/manager/skills/${skillId}`, {\n            method: 'DELETE',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({ directory }),\n          });\n          if (!response.ok) {\n            throw new Error(`Failed to delete ${skillId}`);\n          }\n        } catch (error) {\n          console.error(`Error deleting skill ${skillId}:`, error);\n          throw error;\n        }\n      });\n\n      await Promise.all(deletePromises);\n      setSelectedSkillIds(new Set());\n      loadSkillsWithUsage();\n      if (onRefresh) {\n        onRefresh();\n      }\n    } catch (error) {\n      alert(`Some skills could not be deleted. Check console for details.`);\n    } finally {\n      setIsDeleting(false);\n    }\n  };\n\n  // Filter and search logic\n  const filteredSkills = skills.filter((skill) => {\n    // Search filter\n    if (searchTerm.trim()) {\n      const term = searchTerm.toLowerCase();\n      const matchesSearch =\n        skill.name.toLowerCase().includes(term) ||\n        skill.description.toLowerCase().includes(term);\n      if (!matchesSearch) return false;\n    }\n\n    // Usage filter\n    const usageCount = skill.analytics?.executionCount || 0;\n    switch (filterMode) {\n      case 'used':\n        return usageCount > 0;\n      case 'unused':\n        return usageCount === 0;\n      case 'high-usage':\n        return usageCount >= 3;\n      case 'all':\n      default:\n        return true;\n    }\n  });\n\n  const allSelected = filteredSkills.length > 0 && selectedSkillIds.size === filteredSkills.length;\n  const someSelected = selectedSkillIds.size > 0 && !allSelected;\n\n  return (\n    <div className=\"animate-fade-in\">\n      {/* Header */}\n      <div className=\"flex justify-between items-center mb-6\">\n        <div className=\"flex-1 text-center\">\n          <h1 className=\"text-3xl sm:text-4xl font-bold mb-2\">Skills</h1>\n          <p className=\"text-muted-foreground\">\n            Discovered {skills.length} skills in .claude/skills/\n          </p>\n        </div>\n        <div className=\"absolute right-8 top-8 flex gap-2\">\n          <Button\n            onClick={() => setIsCreationModalOpen(true)}\n            variant=\"secondary\"\n          >\n            Create New Skill\n          </Button>\n          <Button\n            onClick={() => setShowCreatorChat(true)}\n            className=\"flex items-center gap-2 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700\"\n          >\n            <SparklesIcon className=\"h-4 w-4\" />\n            Create with Claude Manager\n          </Button>\n        </div>\n      </div>\n\n      {/* Search and Filter Bar */}\n      <div className=\"mb-6 space-y-3\">\n        {/* Search */}\n        <div className=\"relative\">\n          <SearchIcon className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n          <Input\n            type=\"text\"\n            placeholder=\"Search skills by name or description...\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            className=\"pl-10\"\n          />\n        </div>\n\n        {/* Filters and Controls */}\n        <div className=\"flex flex-wrap items-center gap-3\">\n          {/* Filter Dropdown */}\n          <div className=\"flex items-center gap-2\">\n            <label className=\"text-sm text-muted-foreground\">Filter:</label>\n            <select\n              value={filterMode}\n              onChange={(e) => setFilterMode(e.target.value as FilterMode)}\n              className=\"text-sm border border-border rounded px-3 py-1.5 focus:outline-none focus:ring-2 focus:ring-primary/50\"\n            >\n              <option value=\"all\">All Skills ({skills.length})</option>\n              <option value=\"used\">Used in Agents ({skills.filter(s => (s.analytics?.executionCount || 0) > 0).length})</option>\n              <option value=\"unused\">Not Used ({skills.filter(s => (s.analytics?.executionCount || 0) === 0).length})</option>\n              <option value=\"high-usage\">High Usage (3+) ({skills.filter(s => (s.analytics?.executionCount || 0) >= 3).length})</option>\n            </select>\n          </div>\n\n          {/* Auto-refresh Toggle */}\n          <label className=\"flex items-center gap-2 text-sm cursor-pointer\">\n            <input\n              type=\"checkbox\"\n              checked={autoRefreshEnabled}\n              onChange={(e) => setAutoRefreshEnabled(e.target.checked)}\n              className=\"w-4 h-4 rounded\"\n            />\n            <span className=\"text-muted-foreground\">Auto-refresh (30s)</span>\n          </label>\n\n          {/* Results Count */}\n          <div className=\"ml-auto text-sm text-muted-foreground\">\n            Showing {filteredSkills.length} of {skills.length} skills\n          </div>\n        </div>\n\n        {/* Bulk Actions Bar */}\n        {selectedSkillIds.size > 0 && (\n          <div className=\"flex items-center justify-between p-3 bg-blue-50 border border-blue-200 rounded-md\">\n            <div className=\"flex items-center gap-3\">\n              <span className=\"text-sm font-medium\">\n                {selectedSkillIds.size} skill(s) selected\n              </span>\n              <Button\n                size=\"sm\"\n                variant=\"secondary\"\n                onClick={() => setSelectedSkillIds(new Set())}\n              >\n                Clear Selection\n              </Button>\n            </div>\n            <Button\n              size=\"sm\"\n              variant=\"destructive\"\n              onClick={handleBulkDelete}\n              disabled={isDeleting}\n              className=\"bg-red-600 hover:bg-red-700 text-white\"\n            >\n              <TrashIcon className=\"h-4 w-4 mr-1\" />\n              {isDeleting ? 'Deleting...' : 'Delete Selected'}\n            </Button>\n          </div>\n        )}\n\n        {/* Select All */}\n        {filteredSkills.length > 0 && (\n          <div className=\"flex items-center gap-2\">\n            <label className=\"flex items-center gap-2 text-sm cursor-pointer\">\n              <input\n                type=\"checkbox\"\n                checked={allSelected}\n                ref={(input) => {\n                  if (input) {\n                    input.indeterminate = someSelected;\n                  }\n                }}\n                onChange={toggleSelectAll}\n                className=\"w-4 h-4 rounded\"\n              />\n              <span className=\"text-muted-foreground\">\n                {allSelected ? 'Deselect All' : someSelected ? 'Select All' : 'Select All'}\n              </span>\n            </label>\n          </div>\n        )}\n      </div>\n\n      {/* Modals */}\n      <SkillCreationModal\n        isOpen={isCreationModalOpen}\n        onClose={() => {\n          setIsCreationModalOpen(false);\n          setEditingSkill(null);\n        }}\n        onSkillCreated={handleSkillCreated}\n        editSkill={editingSkill || undefined}\n      />\n\n      <SkillDetailsModal\n        skill={selectedSkill}\n        isOpen={!!selectedSkill}\n        onClose={() => setSelectedSkill(null)}\n        onEdit={(skill) => {\n          setSelectedSkill(null);\n          handleEditClick(skill);\n        }}\n      />\n\n      <SkillCreatorChatPanel\n        isOpen={showCreatorChat}\n        onClose={() => setShowCreatorChat(false)}\n        onSkillCreated={handleSkillCreated}\n        directory={directory}\n      />\n\n      <SkillTrainingChatPanel\n        isOpen={showTrainingPanel}\n        onClose={() => {\n          setShowTrainingPanel(false);\n          setTrainingSkill(null);\n        }}\n        skill={trainingSkill}\n        directory={directory}\n        onTrainingComplete={handleTrainingComplete}\n      />\n\n      {/* Skills Grid */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {filteredSkills.length === 0 ? (\n          <div className=\"col-span-full text-center text-muted-foreground py-12\">\n            {searchTerm || filterMode !== 'all'\n              ? 'No skills match your search or filter criteria'\n              : 'No skills found in .claude/skills/'}\n          </div>\n        ) : (\n          filteredSkills.map((skill) => {\n            const isSelected = selectedSkillIds.has(skill.id);\n            const usageCount = skill.analytics?.executionCount || 0;\n\n            return (\n              <Card\n                key={skill.id}\n                className=\"flex flex-col hover:border-primary/80 transition-colors duration-300 group cursor-pointer\"\n                onClick={() => handleSkillClick(skill)}\n              >\n                <CardHeader className=\"pb-3\">\n                  <div className=\"flex items-start justify-between gap-2\">\n                    <CardTitle className=\"flex items-center gap-2 flex-1\">\n                      <span className=\"text-primary\">\ud83e\udde9</span>\n                      <span className=\"truncate\">{skill.name}</span>\n                    </CardTitle>\n                    {usageCount > 0 && (\n                      <span className=\"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded-full font-medium flex-shrink-0\">\n                        {usageCount} use{usageCount !== 1 ? 's' : ''}\n                      </span>\n                    )}\n                  </div>\n                  <CardDescription className=\"line-clamp-2\">{skill.description}</CardDescription>\n                </CardHeader>\n\n                <CardContent className=\"flex-grow space-y-3\">\n                  {/* Experience Progress */}\n                  <div className=\"pb-3 border-b border-border\">\n                    <ProgressBar\n                      value={skill.experienceScore || 0}\n                      showLabel={true}\n                      size=\"sm\"\n                    />\n                  </div>\n\n                  {/* Quick Stats */}\n                  <div className=\"grid grid-cols-2 gap-2 pb-3 border-b border-border\">\n                    {/* Usage Status */}\n                    {usageCount > 0 ? (\n                      <div className=\"flex items-center gap-2 text-sm\">\n                        <CheckCircleIcon className=\"h-4 w-4 text-green-600 flex-shrink-0\" />\n                        <span className=\"text-muted-foreground\">{usageCount} Agent{usageCount !== 1 ? 's' : ''}</span>\n                      </div>\n                    ) : (\n                      <div className=\"flex items-center gap-2 text-sm\">\n                        <XCircleIcon className=\"h-4 w-4 text-gray-600 flex-shrink-0\" />\n                        <span className=\"text-muted-foreground\">Unused</span>\n                      </div>\n                    )}\n\n                    {/* Tools Count */}\n                    {skill.toolConfig?.allowedTools && skill.toolConfig.allowedTools.length > 0 && (\n                      <div className=\"flex items-center gap-2 text-sm\">\n                        <span className=\"h-4 w-4 text-blue-600 flex-shrink-0\">\ud83d\udd27</span>\n                        <span className=\"text-muted-foreground\">{skill.toolConfig.allowedTools.length} Tool{skill.toolConfig.allowedTools.length !== 1 ? 's' : ''}</span>\n                      </div>\n                    )}\n                  </div>\n\n                  {/* Used in Agents */}\n                  {skill.agentSelection && skill.agentSelection.length > 0 && (\n                    <div>\n                      <div className=\"flex items-center gap-1.5 mb-1.5\">\n                        <CheckCircleIcon className=\"h-3.5 w-3.5 text-green-600\" />\n                        <h4 className=\"font-semibold text-xs text-muted-foreground uppercase\">Used In Agents</h4>\n                      </div>\n                      <div className=\"flex flex-wrap gap-1\">\n                        {skill.agentSelection.slice(0, 3).map((selection, idx) => {\n                          const agentName = typeof selection.agent === 'string' ? selection.agent : selection.agent.name;\n                          return (\n                            <span key={idx} className=\"text-xs bg-green-50 text-green-700 border border-green-200 px-2 py-0.5 rounded font-medium\">\n                              {agentName}\n                            </span>\n                          );\n                        })}\n                        {skill.agentSelection.length > 3 && (\n                          <span className=\"text-xs text-green-600 px-2 py-0.5 font-medium\">\n                            +{skill.agentSelection.length - 3} more\n                          </span>\n                        )}\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Allowed Tools */}\n                  {skill.toolConfig?.allowedTools && skill.toolConfig.allowedTools.length > 0 && (\n                    <div>\n                      <div className=\"flex items-center gap-1.5 mb-1.5\">\n                        <span className=\"h-3.5 w-3.5 text-blue-600\">\ud83d\udd27</span>\n                        <h4 className=\"font-semibold text-xs text-muted-foreground uppercase\">Allowed Tools</h4>\n                      </div>\n                      <div className=\"flex flex-wrap gap-1\">\n                        {skill.toolConfig.allowedTools.slice(0, 4).map((tool, idx) => (\n                          <span key={idx} className=\"text-xs bg-blue-50 text-blue-700 border border-blue-200 px-2 py-0.5 rounded\">\n                            {tool}\n                          </span>\n                        ))}\n                        {skill.toolConfig.allowedTools.length > 4 && (\n                          <span className=\"text-xs text-blue-600 px-2 py-0.5\">\n                            +{skill.toolConfig.allowedTools.length - 4}\n                          </span>\n                        )}\n                      </div>\n                    </div>\n                  )}\n\n                  {/* MCP Tools */}\n                  {skill.mcpConfig && skill.mcpConfig.length > 0 && (\n                    <div>\n                      <div className=\"flex items-center gap-1.5 mb-1.5\">\n                        <ServerIcon className=\"h-3.5 w-3.5 text-indigo-600\" />\n                        <h4 className=\"font-semibold text-xs text-muted-foreground uppercase\">MCP Servers</h4>\n                      </div>\n                      <div className=\"space-y-1.5\">\n                        {skill.mcpConfig.slice(0, 2).map((config, idx) => {\n                          const serverName = typeof config.mcpServer === 'string' ? config.mcpServer : config.mcpServer.name;\n                          const toolsCount = config.selectedTools?.length || 0;\n                          return (\n                            <div key={idx}>\n                              <div className=\"text-xs font-medium text-indigo-600 mb-0.5\">{serverName}</div>\n                              {toolsCount > 0 && (\n                                <div className=\"flex flex-wrap gap-1\">\n                                  {config.selectedTools!.slice(0, 3).map((toolSel, tidx) => {\n                                    const toolName = typeof toolSel.mcpTool === 'string' ? toolSel.mcpTool : toolSel.mcpTool.name;\n                                    return (\n                                      <span key={tidx} className=\"text-xs bg-indigo-50 text-indigo-700 border border-indigo-200 px-2 py-0.5 rounded\">\n                                        {toolName}\n                                      </span>\n                                    );\n                                  })}\n                                  {toolsCount > 3 && (\n                                    <span className=\"text-xs text-indigo-600 px-2 py-0.5\">\n                                      +{toolsCount - 3}\n                                    </span>\n                                  )}\n                                </div>\n                              )}\n                            </div>\n                          );\n                        })}\n                        {skill.mcpConfig.length > 2 && (\n                          <div className=\"text-xs text-indigo-600 font-medium\">\n                            +{skill.mcpConfig.length - 2} more server(s)\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  )}\n\n                  {/* File Info */}\n                  <div className=\"text-xs text-muted-foreground pt-2 border-t border-border\">\n                    \ud83d\udcc4 {skill.id}.md\n                  </div>\n                </CardContent>\n\n                <CardFooter className=\"flex gap-2 pt-3\">\n                  <Button\n                    className=\"flex-1\"\n                    size=\"sm\"\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      handleViewDetails(skill);\n                    }}\n                  >\n                    View Details\n                  </Button>\n                  <Button\n                    variant=\"secondary\"\n                    size=\"sm\"\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      handleEditClick(skill);\n                    }}\n                  >\n                    Edit\n                  </Button>\n                </CardFooter>\n              </Card>\n            );\n          })\n        )}\n      </div>\n    </div>\n  );\n};\n\nSkillsPage.displayName = 'SkillsPage';\n\nexport default SkillsPage;\n",
        "last_modified": "2026-01-02T14:22:15.562592"
      },
      "task_intent": {
        "title": "Document Frontend React Components and Hooks",
        "description": "Add comprehensive JSDoc documentation to all React components and custom hooks in the frontend, including prop types, usage examples, component purposes, state management, and side effects.",
        "from_plan": true
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2026-01-02T14:01:11.526000",
  "last_updated": "2026-01-02T14:22:15.081691"
}
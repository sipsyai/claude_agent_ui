{
  "file_path": "src/web/manager/components/SkillDetailsModal.tsx",
  "main_branch_history": [],
  "task_views": {
    "004-document-frontend-react-components-and-hooks": {
      "task_id": "004-document-frontend-react-components-and-hooks",
      "branch_point": {
        "commit_hash": "34a3f60da53773d90bd6579cb1cfd8417a1dd0b9",
        "content": "import React from 'react';\nimport type { Skill } from '../../../types/agent.types';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription } from './ui/Dialog';\nimport { Button } from './ui/Button';\n\ninterface SkillDetailsModalProps {\n  skill: Skill | null;\n  isOpen: boolean;\n  onClose: () => void;\n  onEdit?: (skill: Skill) => void;\n}\n\nconst SkillDetailsModal: React.FC<SkillDetailsModalProps> = ({ skill, isOpen, onClose, onEdit }) => {\n  if (!skill) return null;\n\n  return (\n    <Dialog open={isOpen} onOpenChange={(open) => !open && onClose()}>\n      <DialogContent className=\"sm:max-w-[800px] max-h-[80vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>{skill.name}</DialogTitle>\n          <DialogDescription>{skill.description}</DialogDescription>\n        </DialogHeader>\n\n        <div className=\"space-y-6 py-4\">\n          {/* Metadata Section */}\n          <div>\n            <h3 className=\"text-lg font-semibold mb-3\">Metadata</h3>\n            <div className=\"space-y-2\">\n              <div className=\"grid grid-cols-3 gap-2 text-sm\">\n                <span className=\"font-medium text-muted-foreground\">ID:</span>\n                <span className=\"col-span-2\">{skill.id}</span>\n              </div>\n              <div className=\"grid grid-cols-3 gap-2 text-sm\">\n                <span className=\"font-medium text-muted-foreground\">Name:</span>\n                <span className=\"col-span-2 font-mono text-xs break-all\">{skill.name}</span>\n              </div>\n              <div className=\"grid grid-cols-3 gap-2 text-sm\">\n                <span className=\"font-medium text-muted-foreground\">Category:</span>\n                <span className=\"col-span-2\">{skill.category || 'general'}</span>\n              </div>\n            </div>\n          </div>\n\n          {/* Allowed Tools Section */}\n          {skill.toolConfig?.allowedTools && skill.toolConfig.allowedTools.length > 0 && (\n            <div>\n              <h3 className=\"text-lg font-semibold mb-3\">Allowed Tools</h3>\n              <div className=\"flex flex-wrap gap-2\">\n                {skill.toolConfig.allowedTools.map((tool, idx) => (\n                  <span\n                    key={idx}\n                    className=\"px-3 py-1 bg-secondary text-secondary-foreground rounded-md text-sm font-medium\"\n                  >\n                    {tool}\n                  </span>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Content Section */}\n          <div>\n            <h3 className=\"text-lg font-semibold mb-3\">Instructions</h3>\n            <div className=\"bg-muted p-4 rounded-md overflow-x-auto\">\n              <pre className=\"text-xs font-mono whitespace-pre-wrap\">{skill.skillmd}</pre>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"flex justify-end gap-2 pt-4 border-t\">\n          {onEdit && (\n            <Button variant=\"secondary\" onClick={() => onEdit(skill)}>\n              Edit\n            </Button>\n          )}\n          <Button variant=\"secondary\" onClick={onClose}>\n            Close\n          </Button>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default SkillDetailsModal;\n",
        "timestamp": "2026-01-02T14:22:14.293924"
      },
      "worktree_state": {
        "content": "/**\n * @file SkillDetailsModal.tsx\n * @description Modal dialog for viewing comprehensive skill information in read-only mode with optional editing.\n * This component displays skill metadata, tool configuration, and instructions with a clean, organized layout\n * that makes it easy to understand a skill's capabilities and configuration at a glance.\n *\n * ## Features\n * - **Read-Only Display**: View skill details without modification\n * - **Metadata Section**: ID, name, category display\n * - **Tool Configuration**: Visual display of allowed tools with badges\n * - **Instructions Display**: Formatted view of skill instructions (skill.md content)\n * - **Optional Edit Mode**: Conditionally rendered Edit button when onEdit callback provided\n * - **Responsive Layout**: Adapts to different screen sizes (sm:max-w-[800px])\n * - **Scrollable Content**: Handles long instructions with overflow-y-auto (max-h-[80vh])\n * - **Clean Styling**: Organized sections with clear headings and spacing\n * - **Action Buttons**: Edit (optional) and Close buttons in footer\n *\n * ## Skill Details Display\n * The modal presents skill information in three main sections:\n *\n * ### Metadata Section\n * - **ID**: Skill's unique identifier (numeric or string)\n * - **Name**: Skill name in monospace font with break-all for long names\n * - **Category**: Skill category (defaults to 'general' if not specified)\n * - **Grid Layout**: 3-column grid with labels (1 col) and values (2 cols)\n * - **Typography**: Labels use muted foreground color, font-medium weight\n *\n * ### Allowed Tools Section\n * - **Conditional Display**: Only shown when `toolConfig.allowedTools` array exists and has items\n * - **Badge Layout**: Flex wrap layout with gap-2 spacing\n * - **Tool Badges**: Secondary background with rounded corners, medium font weight\n * - **Visual Feedback**: Each tool displayed as individual badge for easy scanning\n *\n * ### Instructions Section\n * - **Header**: \"Instructions\" heading with semibold font\n * - **Content Display**: Pre-formatted text in monospace font\n * - **Background**: Muted background with padding and rounded corners\n * - **Overflow Handling**: overflow-x-auto for wide content\n * - **Whitespace**: whitespace-pre-wrap preserves formatting\n * - **Source**: Displays skill.skillmd content (skill.md file content from backend)\n *\n * ## Edit Mode\n * The component supports optional edit functionality:\n *\n * ### Edit Button Behavior\n * - **Conditional Rendering**: Button only appears when `onEdit` prop is provided\n * - **Button Action**: Calls `onEdit(skill)` callback passing the current skill object\n * - **Parent Responsibility**: Parent component handles opening edit modal/form\n * - **Button Variant**: Secondary variant for non-primary action\n * - **Typical Flow**:\n *   1. User clicks Edit button\n *   2. onEdit(skill) callback invoked\n *   3. Parent component opens SkillCreationModal in edit mode\n *   4. Details modal remains open or closes (controlled by parent)\n *\n * ## Action Buttons\n * Footer contains action buttons aligned to the right:\n *\n * ### Button Layout\n * - **Container**: flex with justify-end and gap-2 spacing\n * - **Border**: Top border separates footer from content\n * - **Padding**: pt-4 for vertical spacing\n * - **Order**: Edit button (if present), then Close button\n *\n * ### Edit Button (Optional)\n * - **Variant**: Secondary (gray background)\n * - **Label**: \"Edit\"\n * - **Action**: Invokes `onEdit(skill)` callback\n * - **Conditional**: Only rendered when `onEdit` prop provided\n *\n * ### Close Button (Always Present)\n * - **Variant**: Secondary (gray background)\n * - **Label**: \"Close\"\n * - **Action**: Invokes `onClose()` callback\n * - **Behavior**: Closes modal without changes\n *\n * ## Modal Behavior\n * The component provides controlled modal interactions:\n *\n * ### Opening/Closing\n * - **Controlled**: Modal state managed by parent via `isOpen` prop\n * - **Dialog Integration**: Uses Dialog component from ui/Dialog.tsx\n * - **Backdrop Close**: Clicking outside modal triggers `onClose()` via `onOpenChange` handler\n * - **ESC Key**: Dialog component handles ESC key to close (built-in)\n * - **Null Guard**: Returns null if skill is null, prevents rendering empty modal\n *\n * ### Layout Structure\n * - **Max Width**: sm:max-w-[800px] for readable content width\n * - **Max Height**: max-h-[80vh] prevents modal from exceeding viewport\n * - **Scrollable**: overflow-y-auto enables scrolling for long content\n * - **Sections**: Header (title, description) \u2192 Content (metadata, tools, instructions) \u2192 Footer (actions)\n *\n * ## Styling Behavior\n * Uses Tailwind CSS classes for consistent theme-aware styling:\n * - **Section Spacing**: space-y-6 between main sections, py-4 padding\n * - **Headings**: text-lg font-semibold for section titles, mb-3 bottom margin\n * - **Metadata Grid**: grid-cols-3 layout with gap-2\n * - **Tool Badges**: px-3 py-1 padding, bg-secondary background, rounded-md corners\n * - **Instructions**: bg-muted background, p-4 padding, text-xs monospace\n * - **Footer**: border-t top border, flex with justify-end\n * - **Color Scheme**: Uses theme colors (muted-foreground, secondary, foreground)\n *\n * @example Basic Usage - View Skill Details\n * ```tsx\n * function SkillsPage() {\n *   const [selectedSkill, setSelectedSkill] = useState<Skill | null>(null);\n *   const [detailsOpen, setDetailsOpen] = useState(false);\n *\n *   const handleViewDetails = (skill: Skill) => {\n *     setSelectedSkill(skill);\n *     setDetailsOpen(true);\n *   };\n *\n *   return (\n *     <>\n *       <SkillList onViewDetails={handleViewDetails} />\n *       <SkillDetailsModal\n *         skill={selectedSkill}\n *         isOpen={detailsOpen}\n *         onClose={() => setDetailsOpen(false)}\n *       />\n *     </>\n *   );\n * }\n * ```\n *\n * @example With Edit Functionality\n * ```tsx\n * function SkillsPage() {\n *   const [selectedSkill, setSelectedSkill] = useState<Skill | null>(null);\n *   const [detailsOpen, setDetailsOpen] = useState(false);\n *   const [editOpen, setEditOpen] = useState(false);\n *\n *   const handleEdit = (skill: Skill) => {\n *     setSelectedSkill(skill);\n *     setDetailsOpen(false); // Close details modal\n *     setEditOpen(true);     // Open edit modal\n *   };\n *\n *   return (\n *     <>\n *       <SkillDetailsModal\n *         skill={selectedSkill}\n *         isOpen={detailsOpen}\n *         onClose={() => setDetailsOpen(false)}\n *         onEdit={handleEdit}\n *       />\n *       <SkillCreationModal\n *         isOpen={editOpen}\n *         onClose={() => setEditOpen(false)}\n *         editSkill={selectedSkill}\n *       />\n *     </>\n *   );\n * }\n * ```\n *\n * @example Understanding Displayed Information\n * ```tsx\n * // Example skill object structure displayed in modal:\n * const exampleSkill: Skill = {\n *   id: 123,\n *   name: \"code-analyzer\",\n *   description: \"Analyzes code quality and suggests improvements\",\n *   category: \"code-analysis\",\n *   skillmd: \"# Code Analyzer\\n\\nThis skill analyzes code...\",\n *   toolConfig: {\n *     allowedTools: [\"Read\", \"Grep\", \"Bash\"]\n *   }\n * };\n *\n * // Modal displays:\n * // - Metadata: ID=123, Name=code-analyzer, Category=code-analysis\n * // - Allowed Tools: [Read] [Grep] [Bash] badges\n * // - Instructions: Full skillmd content in pre-formatted view\n * ```\n *\n * @example Read-Only Skill Viewer (No Edit)\n * ```tsx\n * function PublicSkillsGallery() {\n *   const [viewSkill, setViewSkill] = useState<Skill | null>(null);\n *\n *   // No onEdit prop = read-only mode, Edit button won't appear\n *   return (\n *     <SkillDetailsModal\n *       skill={viewSkill}\n *       isOpen={!!viewSkill}\n *       onClose={() => setViewSkill(null)}\n *       // onEdit omitted - read-only mode\n *     />\n *   );\n * }\n * ```\n */\n\nimport React from 'react';\nimport type { Skill } from '../../../types/agent.types';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription } from './ui/Dialog';\nimport { Button } from './ui/Button';\n\n/**\n * Props for the SkillDetailsModal component.\n *\n * @property {Skill | null} skill - The skill object to display, or null when no skill selected\n * @property {boolean} isOpen - Controls modal visibility (true = open, false = closed)\n * @property {() => void} onClose - Callback invoked when modal should close (backdrop click, Close button, ESC key)\n * @property {(skill: Skill) => void} [onEdit] - Optional callback invoked when Edit button clicked, receives skill object\n *\n * @example\n * ```tsx\n * <SkillDetailsModal\n *   skill={selectedSkill}\n *   isOpen={isModalOpen}\n *   onClose={() => setIsModalOpen(false)}\n *   onEdit={(skill) => openEditModal(skill)}\n * />\n * ```\n */\ninterface SkillDetailsModalProps {\n  skill: Skill | null;\n  isOpen: boolean;\n  onClose: () => void;\n  onEdit?: (skill: Skill) => void;\n}\n\n/**\n * SkillDetailsModal Component\n *\n * A read-only modal dialog for viewing comprehensive skill information including metadata,\n * tool configuration, and instructions. Optionally supports editing via callback.\n *\n * @component\n * @param {SkillDetailsModalProps} props - Component props\n * @returns {JSX.Element | null} Rendered modal or null if no skill selected\n */\nconst SkillDetailsModal: React.FC<SkillDetailsModalProps> = ({ skill, isOpen, onClose, onEdit }) => {\n  if (!skill) return null;\n\n  return (\n    <Dialog open={isOpen} onOpenChange={(open) => !open && onClose()}>\n      <DialogContent className=\"sm:max-w-[800px] max-h-[80vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>{skill.name}</DialogTitle>\n          <DialogDescription>{skill.description}</DialogDescription>\n        </DialogHeader>\n\n        <div className=\"space-y-6 py-4\">\n          {/* Metadata Section */}\n          <div>\n            <h3 className=\"text-lg font-semibold mb-3\">Metadata</h3>\n            <div className=\"space-y-2\">\n              <div className=\"grid grid-cols-3 gap-2 text-sm\">\n                <span className=\"font-medium text-muted-foreground\">ID:</span>\n                <span className=\"col-span-2\">{skill.id}</span>\n              </div>\n              <div className=\"grid grid-cols-3 gap-2 text-sm\">\n                <span className=\"font-medium text-muted-foreground\">Name:</span>\n                <span className=\"col-span-2 font-mono text-xs break-all\">{skill.name}</span>\n              </div>\n              <div className=\"grid grid-cols-3 gap-2 text-sm\">\n                <span className=\"font-medium text-muted-foreground\">Category:</span>\n                <span className=\"col-span-2\">{skill.category || 'general'}</span>\n              </div>\n            </div>\n          </div>\n\n          {/* Allowed Tools Section */}\n          {skill.toolConfig?.allowedTools && skill.toolConfig.allowedTools.length > 0 && (\n            <div>\n              <h3 className=\"text-lg font-semibold mb-3\">Allowed Tools</h3>\n              <div className=\"flex flex-wrap gap-2\">\n                {skill.toolConfig.allowedTools.map((tool, idx) => (\n                  <span\n                    key={idx}\n                    className=\"px-3 py-1 bg-secondary text-secondary-foreground rounded-md text-sm font-medium\"\n                  >\n                    {tool}\n                  </span>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Content Section */}\n          <div>\n            <h3 className=\"text-lg font-semibold mb-3\">Instructions</h3>\n            <div className=\"bg-muted p-4 rounded-md overflow-x-auto\">\n              <pre className=\"text-xs font-mono whitespace-pre-wrap\">{skill.skillmd}</pre>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"flex justify-end gap-2 pt-4 border-t\">\n          {onEdit && (\n            <Button variant=\"secondary\" onClick={() => onEdit(skill)}>\n              Edit\n            </Button>\n          )}\n          <Button variant=\"secondary\" onClick={onClose}>\n            Close\n          </Button>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nSkillDetailsModal.displayName = 'SkillDetailsModal';\n\nexport default SkillDetailsModal;\n",
        "last_modified": "2026-01-02T14:22:15.561027"
      },
      "task_intent": {
        "title": "Document Frontend React Components and Hooks",
        "description": "Add comprehensive JSDoc documentation to all React components and custom hooks in the frontend, including prop types, usage examples, component purposes, state management, and side effects.",
        "from_plan": true
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2026-01-02T14:01:11.432281",
  "last_updated": "2026-01-02T14:22:14.968338"
}